{"version":3,"file":"app-init.js","mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;AAEA;;AALA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AATA;;;;;;AAYA;AACA;AACA;AACA;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;;AAEA;;;;;;AAAA;AAAA;;AAAA;;;;AAKA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRA;;AAEA;AAEA;AACA;AAAA;;AAAA;AACA;;AAAA;AACA;;;;;;AALA;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;;AAEA;AACA;;;;AAYA;;AAEA;;AAEA;;AAEA;;;AAjBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAVA;;;;;AAqBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AA1QA;AA4QA;;;;;;;;;;;;;;;;;;;;;;;;;;;AChRA;;;;AAGA;AAEA;AACA;AACA;;AAEA;AAAA;;AAGA;AACA;;;;;;;;;;;;;;;;;AAVA;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBA;;;;AAGA;AAGA;AACA;AACA;;AAEA;AAAA;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;AAXA;;AAAA;;;;AAcA","sources":["webpack://testApp/./dist/I18n/components/javascript/home-comp/ lazy ^\\.\\/.*$ chunkName: I18n/compiledFiles/components/javascript/home-comp/[request] namespace object","webpack://testApp/./dist/I18n/components/javascript/welcome-comp/ lazy ^\\.\\/.*$ chunkName: I18n/compiledFiles/components/javascript/welcome-comp/[request] namespace object","webpack://testApp/./dist/I18n/router/routes/index/ lazy ^\\.\\/.*$ chunkName: I18n/compiledFiles/router/routes/index/[request] namespace object","webpack://testApp/./app-init.js","webpack://testApp/./app.js","webpack://testApp/./components/component.js","webpack://testApp/./data-store/db.js","webpack://testApp/./router/maps/map.js","webpack://testApp/./router/router.js","webpack://testApp/./services/i18n.js","webpack://testApp/./router/routes/home.js","webpack://testApp/./router/routes/index.js"],"sourcesContent":["var map = {\n\t\"./messages_en\": [\n\t\t77274615,\n\t\t\"I18n/compiledFiles/components/javascript/home-comp/messages_en\"\n\t],\n\t\"./messages_en.js\": [\n\t\t77274615,\n\t\t\"I18n/compiledFiles/components/javascript/home-comp/messages_en\"\n\t],\n\t\"./messages_fr\": [\n\t\t15298502,\n\t\t\"I18n/compiledFiles/components/javascript/home-comp/messages_fr\"\n\t],\n\t\"./messages_fr.js\": [\n\t\t15298502,\n\t\t\"I18n/compiledFiles/components/javascript/home-comp/messages_fr\"\n\t],\n\t\"./messages_ja\": [\n\t\t33954214,\n\t\t\"I18n/compiledFiles/components/javascript/home-comp/messages_ja\"\n\t],\n\t\"./messages_ja.js\": [\n\t\t33954214,\n\t\t\"I18n/compiledFiles/components/javascript/home-comp/messages_ja\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 21854494;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./messages_en\": [\n\t\t17210872,\n\t\t\"I18n/compiledFiles/components/javascript/welcome-comp/messages_en\"\n\t],\n\t\"./messages_en.js\": [\n\t\t17210872,\n\t\t\"I18n/compiledFiles/components/javascript/welcome-comp/messages_en\"\n\t],\n\t\"./messages_fr\": [\n\t\t44809370,\n\t\t\"I18n/compiledFiles/components/javascript/welcome-comp/messages_fr\"\n\t],\n\t\"./messages_fr.js\": [\n\t\t44809370,\n\t\t\"I18n/compiledFiles/components/javascript/welcome-comp/messages_fr\"\n\t],\n\t\"./messages_ja\": [\n\t\t77513763,\n\t\t\"I18n/compiledFiles/components/javascript/welcome-comp/messages_ja\"\n\t],\n\t\"./messages_ja.js\": [\n\t\t77513763,\n\t\t\"I18n/compiledFiles/components/javascript/welcome-comp/messages_ja\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 53144469;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./messages_en\": [\n\t\t82720985,\n\t\t\"I18n/compiledFiles/router/routes/index/messages_en\"\n\t],\n\t\"./messages_en.js\": [\n\t\t82720985,\n\t\t\"I18n/compiledFiles/router/routes/index/messages_en\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 11527568;\nmodule.exports = webpackAsyncContext;","import {TestApp} from \"./app.js\";\n\nvar app = new TestApp({\n    performance : true,\n    debug : true\n});\n\nexport {app};\n","import { Lyte } from \"@slyte/core\";\nimport  {TestAppDb} from \"./data-store/db\";\nimport  {TestAppComponentRegistry}  from \"./components/component\";\nimport  {TestAppRouter}  from \"./router/router\";\nimport {I18n} from \"./services/i18n\"\n\nclass TestApp extends Lyte{\n    lookups(){\n        return [{component : TestAppComponentRegistry}, {router : TestAppRouter} , {db : TestAppDb}, I18n];\n    }\n}\nexport {TestApp};\n\n","import { ComponentRegistry } from \"@slyte/component\";\n\nclass TestAppComponentRegistry extends ComponentRegistry{\n    constructor(){\n        super();\n    }\n    lookups(){\n        return [];\n    }\n    // addRegistries() {\n\n    // }\n}\n\nclass Component extends TestAppComponentRegistry.Component {\n    lookups() {\n        return [{component : TestAppComponentRegistry}]\n    }\n}\nexport {TestAppComponentRegistry,Component}; \n\n","import { Db,RESTConnector,RESTSerializer } from \"@slyte/data\";\n\nclass TestAppDb extends Db{\n    static Connector = RESTConnector;\n    static Serializer = RESTSerializer;\n}\n\nlet Schema = TestAppDb.Schema;\nexport {TestAppDb,Schema};\n","import { RouterMap } from \"@slyte/router\";\n\nclass TestAppMap extends RouterMap {\n\tstatic path='../routes'\n\tmap() {\n        this.route(\"index\",{path:'/'})\n        this.route(\"home\");\n    }\n}\nexport {TestAppMap};\n","import { Router } from \"@slyte/router\";\nimport  {TestAppMap}  from \"./maps/map\";\n\nwindow.lang = \"messages_en\";\nclass TestAppRouter extends Router {\n\tgetComponentRegistry() {\n\t\treturn this.$app.$component;\n\t}\n\n\tgetConfig() {\n\t\tvar config = {\n\t\t\tbaseMap : TestAppMap\n\t\t}\n\t\treturn config;\n\t}\n\t\n    beforeRouteNavigation = function(prev,current) { \n\t\t\n\t}\n\t\n    afterRouteNavigation = function(current) {\n\n\t}\n}\n\nexport {TestAppRouter} ;\n\n","import { Service } from \"@slyte/core\";\nimport { extendEventListeners } from \"@slyte/core/src/lyte-utils\"\nimport { ComponentRegistry } from \"@slyte/component\";\n\nclass I18n extends Service {\n  static properties = new Map();\n  requestProperties(urlObj, namespace){\n    return new Promise(function(resolve, reject){\n        var self = this;\n        var xhttp = new XMLHttpRequest();\n        xhttp.open(urlObj.method || \"POST\", urlObj.url, true);\n        for(var header in urlObj.headers){\n            xhttp.setRequestHeader(header, urlObj.headers[header]);\n        }\n        xhttp.onreadystatechange = function() {\n            if (this.readyState == 4 && this.status == 200) {\n                if(xhttp.responseText){\n                    try{\n                        var props = JSON.parse(xhttp.responseText)\n                    }\n                    catch(exp){\n                        console.warn(\"Cannot parse response\", exp);\n                        reject(\"Cannot parse response\", exp)\n                    }\n                    if(props){\n                        self.setProperties(props, namespace);\n                        resolve(self.getProperties());\n                    }\n                }\n            }\n        };\n        xhttp.send();\n    }.bind(this))\n  }\n\n  getProperties(namespace){\n      namespace = namespace || this.cNamespace;\n      if(this.properties && this.properties.has(namespace)){\n          return this.properties.get(namespace);\n      }\n      return {};\n  }\n\n  hasProperty(key, scope){\n    return scope && this.properties.has(scope) ? this.properties.get(scope).hasOwnProperty(key) : false;\n  }\n\n  getLyteIns(context){\n    return context.$app || context.$addon;\n  }\n\n  getScope(ins, key){\n    var hash, \n    cons = ins.constructor;\n    if(ins.__isApp || ins.__isAddon){\n      hash = ins._hash;\n    }\n    else if(cons){\n      if(cons.__lMod == \"Component\"){\n        // hash = cons;\n        hash = cons._hash;\n        var cins = ins, parentLyteIns = this.getLyteIns(ins);\n        // while(cins.$node._callee != undefined && cins.$node._route == undefined ){\n        //   if(this.hasProperty(key, cins.constructor)){\n        //     // hash = cins.constructor;\n        //     hash = cins.constructor._hash;\n        //     break;\n        //   }\n        //   cins = cins.$node._callee.component;\n        //   if(parentLyteIns != this.getLyteIns(cins)){\n        //     // hash = cins.constructor\n        //     hash = cins.constructor._hash\n        //     break;\n        //   }\n        //   // hash = cins.constructor;\n        //   hash = cins.constructor._hash;\n        // }\n        var cRoute;\n        if(cins.$node._route){\n          cRoute = cins.$node._route;\n        }\n        if(!this.hasProperty(key, hash)){\n          hash = cons._registryClass._hash;\n          // hash = cons._registryClass;\n          if(!this.hasProperty(key, hash)){\n            // hash = ins.$app.constructor._hash;\n            if(cRoute){\n              if(parentLyteIns.$.modules.router){\n                var rIns = parentLyteIns.$.modules.router[0].getRouteInstance(cRoute), router;\n                while(rIns){\n                  router = rIns.$router;\n                  if(this.hasProperty(key, rIns.constructor._hash)){\n                    hash = rIns.constructor._hash;\n                    break;\n                  }\n                  rIns = rIns.parent;\n                }\n                if(!rIns && router){\n                  hash = rIns.constructor._hash;\n                  if(!this.hasProperty(key, hash)){\n                    hash = ins.$app.constructor._hash;\n                    // hash = this.getLyteIns(ins).constructor;\n                  }\n                }\n              }\n            }\n            else{\n              hash = this.getLyteIns(ins).constructor;\n            }\n          }\n        }\n      }\n      else if(cons.__lMod == \"Route\"){\n        var rIns = ins, router;\n        while(rIns){\n          router = rIns.$router;\n          if(this.hasProperty(key, rIns.constructor._hash)){\n            hash = rIns.constructor._hash;\n            break;\n          }\n          rIns = rIns.parent;\n        }\n        if(!rIns && router){\n          hash = router.constructor;\n          if(!this.hasProperty(key, hash)){\n            // hash = ins.$app.constructor._hash;\n            hash = this.getLyteIns(ins).constructor;\n          }\n        }\n      }\n      else if(cons.__lMod == \"ComponentRegistry\"){\n        hash = cons._hash;\n        // hash = cons;\n        if(!this.hasProperty(key, hash)){\n          hash = ins.$app.constructor._hash;\n          // hash = this.getLyteIns(ins).constructor;\n        }\n      }\n      else if(cons.__lMod == \"Router\"){\n        hash = cons;\n        if(!this.hasProperty(key, hash)){\n          hash = ins.$app.constructor._hash;\n          // hash = this.getLyteIns(ins).constructor;\n        }\n      }\n    }\n    else if(typeof ins == \"string\"){\n      return ins;\n    }\n    return hash;\n  }\n\n  translate(key,params,scope){\n    debugger;\n    //console.log(\"I18n.translate ::: called for key :: \"+key+\" ::: \"+params+\" :::: \"+module);\n    if(scope){\n      scope = this.getScope(scope, key);\n    }\n    var namespace = scope || this.cNamespace;\n    var i18nedKey = key;\n    if(this.properties){\n        var props = this.properties.get(namespace);\n        params = (params && !Array.isArray(params)) ? [params] : params;\n        if(props && props[key]){\n            i18nedKey = props[key];\n        }\n        if(i18nedKey &&  Array.isArray(params) && params.length){\n            i18nedKey = i18nedKey.replace(/{(\\d+)}/g, function(template, idx) {\n                var param = params[idx]\n                if(typeof param == \"string\"){\n                    return param;\n                }\n                else if(param && typeof param == \"object\"){\n                    return this.translate(param.key, param.params, param.namespace || namespace);\n                }\n            });\n        }\n    }\n    return i18nedKey;\n  }\n\n  translateMultiple(keysJSONArray, namespace){\n      var keysArrayLen = keysJSONArray.length;\n      namespace = namespace || this.cNamespace;\n      var translatedKeys = {};\n      for(var idx = 0 ; idx < keysArrayLen ; idx++ ){\n          var data = keysJSONArray[idx], key, params = [], nmspace = namespace;\n          if(data && typeof data == \"object\"){\n              key = data.key, params = data.params, nmspace = data.namespace;\n          }\n          else if(typeof data == \"string\"){\n              key = data;\n          }\n          translatedKeys[key] = this.translate(key, params, nmspace || namespace);\n      }      \n      return translatedKeys;\n  }\n\n  setDefaultNamespace(name){\n      this.cNamespace = name || \"root\";\n  }\n\n  set(key,val,namespace){         \n      namespace = namespace || this.cNamespace;\n      if(this.properties){\n          if(!this.properties.has(namespace)){\n            this.properties.set(namespace, {});\n          }\n          var props = this.properties.get(namespace);\n          // var props = this.properties[namespace] = this.properties[namespace] || {};\n          if(key && val){\n              props[key] = val;    \n          }        \n      }\n  }\n\n  static setProperties(keyvaljson, namespace){\n      namespace = namespace || this.cNamespace;\n      if(this.properties){\n          if(!this.properties.has(namespace)){\n            this.properties.set(namespace, {});\n          }\n          var props = this.properties.get(namespace);\n          // var props = this.properties[namespace] = this.properties[namespace] || {};\n          if(props){\n              Object.assign(props, keyvaljson);\n          }\n      }\n  }\n  \n  setProperties(keyvaljson, namespace){\n    I18n.setProperties.apply(this, [keyvaljson, namespace]);\n  }\n\n  constructor(options) {\n      super(options);\n      var self = this;\n      this.properties = new Map();\n      if(I18n.properties.size){\n        I18n.properties.forEach(function(value, key){\n          self.properties.set(key, value);\n        });\n      }\n      // this.properties = Object.assign({},I18n.properties);\n      this.dNamespace = \"root\";\n      this.globalKey = \"I18n\";\n      this.cNamespace = this.dNamespace;\n      options = options || {};\n      options.defaultNamespace ? this.dNamespace = this.cNamespace = options.defaultNamespace : undefined;\n      var namespace = options.namespace || this.cNamespace;\n      if(options.properties && typeof options.properties == \"object\"){\n        this.setProperties(options.properties, namespace);\n      }\n      var glbKey = options.globalKey || this.globalKey;\n      Object.defineProperty(window, glbKey, {\n          value : this\n      });\n      I18n.addEventListener(\"add\", function(obj, hash){\n        self.setProperties(obj, hash);\n      });\n      ComponentRegistry.registerHelper(options.helperName || \"translate\", function(key, params, namespace){\n          return self.translate(key, params, this);\n      });\n      ComponentRegistry.registerHelper((options.helperName || \"translate\")+\"Params\", function(){\n          return Array.from(arguments);\n      });\n  }\n  static register(properties, hash){\n    I18n.setProperties(properties, hash);\n    this.triggerEvent(\"add\", properties, hash);\n  }\n}\nextendEventListeners(I18n);\nexport  {I18n};","import {Route} from \"@slyte/router\";\nimport {HomeComp} from \"../../components/javascript/home-comp\"\n\nclass Home extends  Route {\n\n    render() {\n\t\treturn {outlet : \"#outlet\",component : HomeComp}\n\t}\n\n    static actions(){\n        return {\n\n        }\n    }\n}\n\nexport {Home};\n\n","import { Route } from \"@slyte/router\";\nimport  {WelcomeComp} from \"../../components/javascript/welcome-comp\";\n\nclass Index extends Route {\n\tstatic routePath = \"index\";\n\n\trender() {\n\t\treturn {outlet : \"#outlet\",component : WelcomeComp}\n\t}\n\n\tstatic actions(){\n\t\treturn{\n\t\t\t\n\t\t}\n\t}\n}\n\nexport {Index};\n\n"],"names":[],"sourceRoot":""}