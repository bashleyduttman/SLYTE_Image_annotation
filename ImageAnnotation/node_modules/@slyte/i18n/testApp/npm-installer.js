var execSync = function(cmd) {require("child_process").execSync(cmd,{stdio: [process.stdin, process.stdout, process.stderr]})};
execSync("rm -rf node_modules")
execSync("npm install")

var fs = require('fs-extra');
[
    {
        name : "core",
        git : "https://zrepository.zoho.com/zohocorp/slyte/core.git",
        folder: "./node_modules/@slyte/core",
        branch : "v1.0"
    }, {
        name : "router",
        git : "https://zrepository.zoho.com/zohocorp/slyte/router.git",
        folder: "./node_modules/@slyte/router",
        branch : "v1.0"
    },
    {
        name : "component",
        git : "https://zrepository.zoho.com/zohocorp/slyte/component.git",
        folder: "./node_modules/@slyte/component",
        branch : "v1.0"
    },
    {
        name : "data",
        git : "https://zrepository.zoho.com/zohocorp/slyte/data.git",
        folder: "./node_modules/@slyte/data",
        branch : "v1.0"
    }
].forEach(function(package) {
    if(fs.existsSync(package.folder) ) {
        fs.removeSync(package.folder)
    }
    execSync('git clone '+package.git+' '+package.folder+' -b '+package.branch);
    if(package.name == "component"){
        execSync('cd '+package.folder+' && npm install && node build/prepublish.js');
    }
})