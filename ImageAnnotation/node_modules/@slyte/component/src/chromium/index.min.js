debug||(console.warn=console.log=function(){}),win=window||{},dom=document||{},win.elifHold=!1;var templateWorker=new Worker("worker.js");function replaceErrors(e,t){var r;return t instanceof Error?(r={},Object.getOwnPropertyNames(t).forEach(function(e){r[e]=t[e]}),r):t}var defaultComponents=["link-to"],defaultSrcComponents=["lyte-event-listener","import-shadow-style"],defaultHelpers=["unbound","action","lbind","method","unescape","escape","debugger","log","ifEquals","if","negate","ifNotEquals","concat","encAttr","expHandlers"],defaultDirectives=["shadow","shadow-supported","turbo","turbo-supported","view-in","view-out","unbound"],defaultImpDetails={components:[],helpers:[],alreadyImported:!1};function getArgString(e,t){let r;for(let e=0;e<t.length;e++)console.log("array content"+JSON.stringify(t[e])),t[e]&&"object"==typeof t[e]&&(t[e]=this.getArgString(t[e].value.name,t[e].value.args));return r=e?e+"("+t.toString()+")":t.toString()}function getImportedHelpers(t,r){for(let e=0;e<t.length;e++){var n;t[e]&&"object"==typeof t[e]&&(n=t[e].value.name,-1==r.indexOf(n)&&-1==defaultHelpers.indexOf(n)&&r.push(n),t[e]=this.getImportedHelpers(t[e].value.args,r))}}function trimAttr(t,r,n,i,e){var o=t.replace(/((const)|(continue)|(default)|(delete)|(do)|(else)|(enum)|(export)|(extends)|(finally)|(for)|(function)|(if)|(import)|(in)|(instanceof)|(new)|(return)|(super)|(switch)|(try)|(typeof)|(var)|(void)|(while)|(with))(?!\w)/g,"__LyteHelper$1__");try{var a=expHandlers.handleExpression(Espree.parse(o),!0);a&&a!==o&&(t="{{"+(a=a.replace(/__LyteHelper(\w*?)__/g,"$1"))+"}}")}catch(e){t=o=o.replace(/__LyteHelper(\w*?)__/g,"$1"),"Only helper function calls are allowed"===e.message&&(e.message=i?"(LC:1)Syntax error in node "+n.nodeName+" for the attribute: "+i.nodeName+" - "+i.nodeValue+". Only helper function calls are allowed":"(LC:2)Syntax Error in node "+n.nodeName+" for :"+n.nodeValue+". Only helper function calls are allowed",r.push(new Error(e)))}return t}function syntaxCheckWorkerNew(e){var t,r,n,o,a,s={mustache:0,bool:!0,err:null};for(i=0;i<e.length;i++)if(a)if("\\"==e[i])i+=1;else if("'"==e[i])'"'!=o&&(o=n?void(n=!1):(n=!0,"'"));else if('"'==e[i])"'"!=o&&(o=n?void(n=!1):(n=!0,'"'));else{if("{"==e[i]&&!n)return s.bool=!1,s.err=" unexpected '{' bracket ",s;if("{"==e[i]&&n&&"{"==e[i-1])s.mustache++;else if("}"!=e[i]||"}"!=e[i-1]||n)if("["!=e[i]||n)if("]"!=e[i]||n)if("("!=e[i]||n){if(")"==e[i]&&!n){if(!t.length)return s.bool=!1,s.err=" unmatched ')' bracket ",s;t.pop()}}else t.push("(");else{if(!r.length)return s.bool=!1,s.err=" unmatched ']' bracket ",s;r.pop()}else r.push("[");else{if(t.length)return s.bool=!1,s.err=" error unmatched '(' bracket ",s;if(r.length)return s.bool=!1,s.err=" unmatched '['bracket ",s;a=!1}}else"{"==e[i]&&"{"==e[i-1]&&"\\"!=e[i-2]&&(t=[],r=[],a=!0);return a&&(s.bool=!1,s.err=" unmatched '{' bracket"),s}function pushDir(e,t){var r;-1!=defaultDirectives.indexOf(t)?(r=e.dirMap[t])&&-1==e.defaultDirectives.indexOf(r)?e.defaultDirectives.push(r):-1==e.defaultDirectives.indexOf(t)&&e.defaultDirectives.push(t):-1==e.directives.indexOf(t)&&e.directives.push(t)}function getDynamicNodes(h){return new Promise(async function(e,t){var r=(new Date).getTime(),n=[],i=[],o=(debug,dom.querySelector("template[tag-name='"+h+"']"));if(console.log("components generating dynamicNodes"+h),o){var a=o.nextElementSibling;if(a&&"TEMPLATE"==a.tagName&&a.hasAttribute("view-port-template")){i.push({message:"Depricated Syntax : 'view-port-template' found in "+h+" . Migrate your app to using latest slyte-migrator."});(l=dom.createElement("template")).setAttribute("lyte-if","{{lyteViewPort}}"),l.setAttribute("__vp","c-old"),l.content.appendChild(dom.createElement("dummy-port-element")),l.content.appendChild(a.content),l.content.appendChild(dom.createElement("dummy-port-element"));var s=dom.createElement("template");s.setAttribute("lyte-else",""),s.content.appendChild(o.content),o.innerHTML="",o.content.appendChild(l),o.content.appendChild(s),a.remove()}else if(a&&"TEMPLATE"==a.tagName&&a.attributes["@view-out"]){var l=dom.createElement("template");let e=o.getAttribute("@view-in");e.startsWith("{{")?(e=e.substring(2,e.length-2),l.setAttribute("lyte-if","{{lyteViewPort("+e+")}}")):""===e?l.setAttribute("lyte-if","{{lyteViewPort()}}"):l.setAttribute("lyte-if","{{lyteViewPort("+e+")}}"),l.setAttribute("__vp","c-new"),l.content.appendChild(o.content),o.removeAttribute("@view-in");s=dom.createElement("template");s.setAttribute("lyte-else",""),s.content.appendChild(dom.createElement("dummy-port-element")),s.content.appendChild(a.content),s.content.appendChild(dom.createElement("dummy-port-element")),o.innerHTML="",o.content.appendChild(l),o.content.appendChild(s),a.remove(),o.setAttribute("__vp","c-new")}l=o.content}else n.push(new Error("(LC:20)Cannot find template "+h)),popTheTab(h,{componentName:h,errors:JSON.stringify(n,replaceErrors),warnings:i});if(l){var u={components:[],helpers:[],directives:[],defaultDirectives:[],defaultComponents:[],registryMap:{},options:{internalSlicer:{}},dirMap:{"shadow-supported":"lyte-shadow",shadow:"lyte-shadow","turbo-supported":"lyte-turbo",unbound:"lyte-turbo",turbo:"lyte-turbo","view-in":"lyte-view","view-out":"lyte-view"}},s=(splitTextNodes(l,i,void 0,u,n,h),[]),a=o.getAttribute("use-strict"),a=0!=a&&"false"!=a&&null==a?window.useStrict:a;if("false"==a?a=!1:"true"==a&&(a=!0),a){let e;l.querySelector("script")&&((e=new Error("(LC:21)Security: Script tags should not be included")).strict=!0,n.push(e)),l.querySelector("style")&&((e=new Error("(LC:22)Security: Style tags should not be included")).strict=!0,n.push(e))}var d=[];try{await newGetDeepNodes(h,o,d,[],void 0,!0,n,i),await processTemplate(l,s,h,a,n,i),getTransitionOrder(s)}catch(e){n.push(new Error("Syntax error :  : "+e))}var l={},c=(getTemplateDirectChild(s,l),(l.hc||l.trans)&&s.push({type:"dc",trans:l.trans,hc:l.hc,p:l.dc}),o.attributes);for(let e=0;e<c.length;e++){var p=c[e].name;p.startsWith("@")&&pushDir(u,p.split("@")[1])}n.length?popTheTab(h,{componentName:h,timeoutError:localStorage.getItem(h),errors:JSON.stringify(n,replaceErrors),warnings:i}):(a=o.outerHTML,a="_template = "+JSON.stringify(a+"____cssContent")+";",s="_dynamicNodes = "+JSON.stringify(s)+";",popTheTab(h,{componentName:h,timeoutError:localStorage.getItem(h),template:a,dynamicNodes:s,_templateAttributes:d[0],warnings:i,importDetails:u,needToImpDetails:defaultImpDetails}),defaultImpDetails={components:[],helpers:[],alreadyImported:!1})}1e4<(new Date).getTime()-r&&((l=new XMLHttpRequest).open("POST","http://localhost:"+window.location.port+"/warning",!0),l.setRequestHeader("Content-Type","application/text"),l.send(h)),e()})}function popTheTab(e,t){production?response[e]=response[e]?Object.assign(response[e],t):t:worker.port.postMessage({msg:"tabfree",finalObj:t,componentName:e,portNo:portNo,endTime:(new Date).getTime(),tabno:tabno})}function getImpDetails(e){var t={},r=e.getAttribute("name"),e=!!e.hasAttribute("from")&&e.getAttribute("from");try{r=JSON.parse(r)}catch(e){}return Array.isArray(r)||(r=[r]),t.name=r,e&&(t.from=e),t}function impDetails(e,i){function t(t,e){var r=t.name,n=r.length;for(let e=0;e<n;e++)i.registryMap[r[e]]=t.from;e.push(...r)}var r=e.localName,n=i.components,o=i.helpers;switch(r){case"import-component":t(this.getImpDetails(e),n);break;case"import-helper":t(this.getImpDetails(e),o)}}function pushImpDetails(e,t){if(e&&e.importHelperArray&&e.importHelperArray.length)for(var r=0;r<e.importHelperArray.length;r++){var n=e.importHelperArray[r];t.includes(n)||t.push(n)}}function checkAttr(e,t){return!!e.hasAttribute(t)&&t}function getErrorInfo(e){let t=checkAttr(e,"lyte-if")||checkAttr(e,"lyte-switch")||checkAttr(e,"lyte-for")||checkAttr(e,"lyte-for-in"),r=void 0;return!t&&/(for|forIn|if|switch)$/.test(e.getAttribute("is"))&&(t=e.getAttribute("is")),r=t?{name:"errorInfo",details:{tagName:e.tagName,name:t,value:e.getAttribute(t).replace(/{{/g,"@mus@")}}:r}function addUnbound(r,n,i,o){let a,s,l,u;if(r.hasAttribute("@unbound")&&(a=!0,s=r.getAttribute("@unbound"),r.removeAttribute("@unbound")),r.hasAttribute("@turbo")&&(l=!0,u=r.getAttribute("@turbo"),r.removeAttribute("@turbo")),a||l){let e,t=(s||u?(e="<"+i,a&&(s?e=e+" @unbound="+s:e+=" @unbound"),l&&(u?e=e+" @turbo="+u:e+=" @turbo"),e=e+"></"+i+">"):a?e="<"+i+" @unbound></"+i+">":l&&(e="<"+i+" @turbo></"+i+">"),"div");o&&(t=o);r=dom.createElement(t);r.innerHTML=e,n=r.firstChild}else n=dom.createElement(i);return n}function splitTextNodes(r,e,n,i,o,t){var a=r.localName,s=defaultImpDetails.components;if(a&&-1!=a.indexOf("-")&&-1==s.indexOf(a)&&-1==defaultComponents.indexOf(a)&&("lyte-import"==a||"import-component"==a||"import-helper"==a?defaultImpDetails.alreadyImported=!0:(-1!=defaultSrcComponents.indexOf(a)&&-1==i.defaultComponents.indexOf(a)?i.defaultComponents:s).push(a)),"svg"===r.tagName&&(n=!0),r.hasAttribute){if(!r.hasAttribute("is")||!/(for|forIn|if|switch)$/.test(r.getAttribute("is"))||"true"==r.getAttribute("_jsp")||r.hasAttribute("lyte-for")||r.hasAttribute("lyte-for-in")||r.hasAttribute("lyte-if")||r.hasAttribute("lyte-switch")||r.hasAttribute("_new")||e.push({message:"Depricated Syntax : '"+errorNodeDetails(r)+"' Change it to 'lyte-"+r.getAttribute("is")+"' syntax. It will not be supported in upcoming versions.\n"}),n&&"template"==r.tagName&&r.hasAttribute("is")&&/(for|forIn|if|switch)$/.test(r.getAttribute("is"))){(m=dom.createElement("template")).innerHTML=r.innerHTML;for(var l=r.attributes,u=0;u<l.length;u++)m.setAttribute(l[u].nodeName,l[u].nodeValue);r.replaceWith(m),r=m}if(r.hasAttribute("lyte-for")){var s=getErrorInfo(r),d=r.getAttribute("lyte-for"),c={};if(r.hasAttribute("lyte-options"))try{c=JSON.parse(r.getAttribute("lyte-options"))}catch(e){c={}}var p=d.split(" ");"TEMPLATE"===r.tagName?m=r:r=(n&&"template"==r.tagName?(m=this.addUnbound(r,m,"template"),r.removeAttribute("lyte-for"),r.removeAttribute("lyte-options"),m.innerHTML=r.innerHTML):(m=this.addUnbound(r,m,"template"),r.removeAttribute("lyte-for"),r.removeAttribute("lyte-options"),m.innerHTML=r.outerHTML),r.replaceWith(m),m),r.removeAttribute("lyte-for"),r.removeAttribute("lyte-options"),m.setAttribute("items",p[0]),m.setAttribute("item",p[2]||"item"),m.setAttribute("index",p[3]||"index"),m.setAttribute("is","for"),m.setAttribute("_new","true"),m.setAttribute("errorinfo",JSON.stringify(s)),c.unbound&&m.setAttribute("unbound",c.unbound)}else if(r.hasAttribute("lyte-for-in")){a=getErrorInfo(r),d=r.getAttribute("lyte-for-in"),c={};if(r.hasAttribute("lyte-options"))try{c=JSON.parse(r.getAttribute("lyte-options"))}catch(e){c={}}p=d.split(" ");"TEMPLATE"===r.tagName?((m=r).removeAttribute("lyte-for-in"),r.removeAttribute("lyte-options")):r=(n&&"template"==r.tagName?(m=this.addUnbound(r,m,"template"),r.removeAttribute("lyte-for-in"),r.removeAttribute("lyte-options"),m.innerHTML=r.innerHTML):(m=this.addUnbound(r,m,"template"),r.removeAttribute("lyte-for-in"),r.removeAttribute("lyte-options"),m.innerHTML=r.outerHTML),r.replaceWith(m),m),m.setAttribute("object",p[0]),m.setAttribute("value",p[2]||"value"),m.setAttribute("key",p[3]||"key"),m.setAttribute("is","forIn"),m.setAttribute("_new","true"),m.setAttribute("errorinfo",JSON.stringify(a)),c.unbound&&m.setAttribute("unbound",c.unbound)}else if(r.hasAttribute("lyte-if")){var h=handleLyteIf(r,n);r.replaceWith(h),r=h}else if(r.hasAttribute("lyte-switch")){s=handleLyteSwitch(r,n);r.replaceWith(s),r=s}else if(n&&"template"==r.tagName&&r.hasAttribute("is")&&/(for|forIn|if|switch)$/.test(r.getAttribute("is"))){(m=dom.createElement("template")).innerHTML=r.innerHTML;for(var m,l=r.attributes,u=0;u<l.length;u++)m.setAttribute(l[u].nodeName,l[u].nodeValue);r.replaceWith(m),r=m}else r.hasAttribute("is")&&"if"==r.getAttribute("is")&&(h=jspIfToSwitch(r),r.replaceWith(h),r=h);for(let t=0;t<r.attributes.length;t++){var f=r.attributes[t].name;if(f.startsWith("@")){var b=f.substring(1);if(pushDir(i,b),"view-in"==b){let e=r.attributes[t].value;e.startsWith("{{")?(e=e.substring(2,e.length-2),r.setAttribute("lyte-if","{{lyteViewPort("+e+")}}")):""===e?r.setAttribute("lyte-if","{{lyteViewPort()}}"):r.setAttribute("lyte-if","{{lyteViewPort("+e+")}}"),r.removeAttribute(f),r.nextElementSibling&&r.nextElementSibling.hasAttribute("@view-out")?(r.nextElementSibling.removeAttribute("@view-out"),r.nextElementSibling.setAttribute("lyte-else",""),h=handleLyteIf(r,n),r.replaceWith(h),r=h):o.push(new Error("(LC:26) view-out directive not found"))}}}for(let e=0;e<r.attributes.length;e++){var g=r.attributes[e].name;g.startsWith("@")&&pushDir(i,g.substring(1))}}if(r&&r.childNodes&&r.childNodes.length)for(u=r.childNodes.length-1;0<=u;u--){var y=r.childNodes[u];y.hasAttribute?y.hasAttribute("lyte-if-else")||y.hasAttribute("lyte-else")?y.previousElementSibling&&(y.previousElementSibling.hasAttribute("lyte-if")||y.previousElementSibling.hasAttribute("lyte-else-if"))||e.push({message:"Element with lyte-else must be preceded by a element having lyte-if or lyte-else :\n \t"+y.cloneNode().outerHTML}):(ide&&"false"==r.childNodes[u].getAttribute("case")&&(win.elifHold=!0),splitTextNodes(r.childNodes[u],e,n,i,o,t)):splitTextNodes(r.childNodes[u],e,n,i,o,t)}if("TEMPLATE"===r.tagName&&splitTextNodes(r.content||createDocFragment(r),e,n,i,o,t),"LYTE-IMPORT"==r.tagName){for(var v=r;v.previousSibling;)""!=v.previousSibling.nodeValue.trim()&&o.push(new Error("(LC:25) lyte-import tag should be the first child of the component.")),v=v.previousSibling;for(let e=0;e<r.children.length;e++)impDetails(r.children[e],i);r.previousSibling&&" "==r.previousSibling.nodeValue&&r.nextSibling&&" "==r.nextSibling.nodeValue&&r.previousSibling.remove(),r.remove()}else if(r.nodeType===r.TEXT_NODE){var A=r.nodeValue;if(A){var T=A.match(/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}/g);if(T){for(var N=[],u=0;u<T.length;u++){var w=A.indexOf(T[u]),E=w+T[u].length;w&&N.push(dom.createTextNode(A.substring(0,w))),N.push(dom.createTextNode(A.substring(w,E))),A=A.substring(E)}N.push(dom.createTextNode(A)),r.replaceWith.apply(r,N)}}}}async function processTemplate(r,n,i,o,a,s,l){var e=r.querySelector("template[is=break]"),e=(e&&this.getTrimmedContent(r,void 0,e),r.querySelector("template[is=continue]"));if(e&&this.getTrimmedContent(r,void 0,e),this.helperNodes=[],r.hasChildNodes()){let t;"svg"!=l&&"foreignObject"!=l||(t=l);for(let e=0;e<r.childNodes.length;e++){var u,d=[],c=(d.push(e),r.childNodes[e].tagName);c?("svg"==c?l="svg":"foreignObject"!=c&&"FOREIGNOBJECT"!=c||(l="foreignObject"),u=r.childNodes[e].getAttribute("is"),"TEMPLATE"===c&&u?await this.newGetDeepNodes(i,r.childNodes[e],n,d,u,o,a,s,l):await this.newGetDeepNodes(i,r.childNodes[e],n,d,void 0,o,a,s,l),r.childNodes[e].removeAttribute("errorinfo")):await this.newGetDeepNodes(i,r.childNodes[e],n,d,void 0,o,a,s,l),l=t}}}function errorNodeDetails(e){var t;return e.hasAttribute("errorinfo")?"`"+(t=JSON.parse(e.getAttribute("errorinfo"))).details.tagName+"` with attribute "+t.details.name+'="'+t.details.value.replace(/@mus@/g,"{{")+'"':((t=e.cloneNode(!0)).innerHTML=".....",t.outerHTML)}function checkForMixedCase(e){let t=!1,r=!1,n=!1,i=!1,o=0,a=[],s="",l={};for(var u=0;u<e.length;u++){if(n&&(t||r||e[u].match(/\S/))&&(s+=e[u]),"\\"!=e[u-1]&&"{"==e[u]&&"{"==e[u+1]&&!t&&!r){if(n)return{bool:!1,errorIndex:u-l.index[0]+1,err:"Invalid dynamic value inside dynamic value `{{`"};i||0==u||(i=!0),(l={}).index=[u],n=!0}"}"!=e[u]||"}"!=e[u+1]||t||r||!n||(i||u+1==e.length-1||(i=!0),l.index[1]=u+1,l.orgMus=e.substring(l.index[0],l.index[1]+1),l.mus="{"+s+"}",s="",a.push(l),n=!1),"\\"==e[u]&&o++,("\\"!=e[u-1]||"\\"==e[u-1]&&o%2==0)&&("'"==e[u]&&!t&&n&&(r=!r),'"'==e[u])&&!r&&n&&(t=!t),"\\"!=e[u]&&(o=0)}return{bool:!0,mixedCase:i,mustacheSpots:a}}async function processAttr(s,l,e,t,r,u,d,c){if(l.hasAttributes&&l.hasAttributes()){let i=!1,o=[],a=[];var n,p,h={};for(let n=0;n<l.attributes.length;n++){let t;if(/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onmouseenter|onmouseleave|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu|ondragstart|ondrag|ondragenter|ondragleave|ondragover|ondrop|ondragend|onload|onunload|onabort|onerror|onscroll|onreset|onblur|onafterprint|onbeforeprint|ononbeforeunload|onerror|onhashchange|onload|onmessage|onoffline|ononline|onpagehide|onpageshow|onpopstate|onstorage|onunload|oninput|oninvalid|onsearch|ononmousewheel|onwheel|ondrag|ondragend|ondragenter|ondragleave|ondragover|ondragstart|ondrop|onscroll|ondrag|ondragend|ondragenter|ondragleave|ondragover|ondragstart|ondrop|onscroll|ondrag|ondragend|ondragenter|ondragleave|ondragover|ondragstart|ondrop|onscroll|onabort|oncanplay|oncanplaythrough|oncuechange|ondurationchange|onemptied|onended|onloadeddata|onloadedmetadata|onloadstart|onpause|onplay|onplaying|onprogress|onratechange|onseeked|onseeking|onstalled|onsuspend|ontimeupdate|onvolumechange|onwaiting|onpaste)$/.test(l.attributes[n].nodeName)&&u&&(t=!0),-1!==l.attributes[n].nodeValue.indexOf("{{")){l.attributes[n].nodeValue=l.attributes[n].nodeValue.replace(".{}","____lyteinternal____").trim();let r=l.attributes[n].nodeValue,e=checkForMixedCase(r);if(e.bool){var m=e["mustacheSpots"];if(m.length&&0<m.length)for(let t=0;t<m.length;t++){let e=m[t].mus;e.match(/\&|\||\!|\=|\+|-|\*|\/|<|>|\?|:|%/gm)&&(e=trimAttr(e,d,l,l.attributes[n],s)),r=r.replace(m[t].orgMus,function(){return e})}l.attributes[n].nodeValue=r}var f,b,g=syntaxCheckWorkerNew(l.attributes[n].nodeValue);if(!g.bool){d.push(new Error("(LC:syn2)Syntax error in node "+g.err+" in "+l.nodeName+" for the attribute: "+l.attributes[n].nodeName+" - "+l.attributes[n].nodeValue));continue}var y=r.split("{{").length,v=(g&&0<g.mustache&&(y-=g.mustache),r.indexOf("}}"));if(2<y||!/^{{/.test(r)||!/}}$/.test(r)||r[v+2]&&/{{.*}}/.test(r)&&!/\\{{.*}}/.test(r))f=await splitMixedText(r,s,d,l,n);else{if((b=await this.getMustache(r,s,g))&&"timeoutError"==b){d.push(new Error("(LC:timeout3)Syntax error in node "+b.err+" in "+l.nodeName+" for the attribute: "+l.attributes[n].nodeName+" - "+l.attributes[n].nodeValue));continue}if(console.log("actValue response "+b+"val given to mustache"+r),b&&"object"==typeof b&&!1===b.bool){d.push(new Error("(LC:6)Syntax error in node "+b.err+" in "+l.nodeName+" for the attribute: "+l.attributes[n].nodeName+" - "+l.attributes[n].nodeValue));continue}if(b){if((f=await this.getArray(b))&&"timeoutError"==f){d.push(new Error("(LC:timeout7)Syntax error in node "+l.nodeName+" for the attribute: "+l.attributes[n].nodeName+" - "+l.attributes[n].nodeValue));continue}if(!1===f){d.push(new Error("(LC:12)Syntax error in node "+l.nodeName+" for the attribute:"+l.attributes[n].nodeName+"- "+l.attributes[n].nodeValue));continue}}if(!f&&b){if(b=b.replace("____lyteinternal____",".{}"),(f=await this.getHelper(b,s))&&"lbindError"==f.args||"lbindError"==f){d.push(new Error("(LC:lbind4)Syntax Error : lbind are not allowed inside helpers on node "+l.nodeName+" for: "+l.attributes[n].nodeValue));continue}if(f&&"lbind"==f.name&&"TEMPLATE"==l.tagName&&l.hasAttribute("is")&&/if|for|switch/g.test(l.getAttribute("is")))d.push(new Error("(LC:lbind3)Syntax Error : lbind not allowed as value in if/for/switch nodefor: "+r));else{if(f&&"timeoutError"==f){d.push(new Error("(LC:timeout4)Syntax error in node "+l.nodeName+" for the attribute:"+l.attributes[n].nodeName+"- "+l.attributes[n].nodeValue));continue}if(!1===f){d.push(new Error("(LC:7)Syntax error in node "+l.nodeName+" for the attribute:"+l.attributes[n].nodeName+"- "+l.attributes[n].nodeValue));continue}}f&&(-1==defaultImpDetails.helpers.indexOf(f.name)&&-1==defaultHelpers.indexOf(f.name)&&defaultImpDetails.helpers.push(f.name),getImportedHelpers(f.args,defaultImpDetails.helpers))}}if(f&&("action"===f.name||"method"===f.name)&&/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onmouseenter|onmouseleave|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu)$/.test(l.attributes[n].name)){i=!0,h[l.attributes[n].name.substr(2)]={name:l.attributes[n].name.substr(2),helperInfo:f,globalEvent:!0};y=deepCopyObject(f.args);let e=y.splice(0,1)[0];"string"==typeof e&&e.startsWith("'")?e=e.startsWith("'")?e.replace(/'/g,""):e:c.push({message:" action or method must start with string on "+l.nodeName+" for the attribute:"+l.attributes[n].nodeName+"- "+l.attributes[n].nodeValue}),console.log("In action "+e+" ,"+y);this.getArgString(e,y);o.push(l.attributes[n].name)}else!f||"action"!==f.name&&"method"!==f.name||!f.args||"object"!=typeof f.args[0]&&f.args[0].startsWith("'")||c.push({message:" action or method must start with string on "+l.nodeName+" for the attribute:"+l.attributes[n].nodeName+"- "+l.attributes[n].nodeValue}),(f||b)&&(i=!0,v={},l.attributes[n].name.startsWith("lbind:")?(o.push(l.attributes[n].name),a.push({name:l.attributes[n].name.substring(6),value:l.attributes[n].nodeValue}),v.isLbind=!0,v.name=l.attributes[n].name.substring(6)):v.name=l.attributes[n].name,f?"lbind"===f.name?(v.dynamicValue=f.args[0],v.isLbind=!0):v.helperInfo=f:v.dynamicValue=b,i=!0,h[v.name]=v);l.attributes[n].nodeValue=l.attributes[n].nodeValue.replace("____lyteinternal____",".{}"),!t||f&&"action"===f.name||(console.log("(LC:22)Strict-Mode: Please specify action in "+l.nodeName+" for attribute-"+l.attributes[n].nodeName),(err=new Error("(LC:22)Strict-Mode: Please specify action in "+l.nodeName+" for attribute-"+l.attributes[n].nodeName)).strict=!0,d.push(err))}else t&&(console.log("(LC:23)Strict-Mode: Please specify action in "+l.nodeName+" for attribute-"+l.attributes[n].nodeName),(err=new Error("(LC:23)Strict-Mode: Please specify action in "+l.nodeName+" for attribute-"+l.attributes[n].nodeName)).strict=!0,d.push(err));l.attributes[n].name.startsWith("@")&&(i=!0,l._special=!0,(g={}).name=l.attributes[n].name,g.dynamicValue=l.attributes[n].nodeValue,h[g.name]=g,h._special=!0)}h&&i&&(n={},-1!==(p=Object.keys(h)).indexOf("style")&&(n.style=h.style),-1===p.indexOf("type")||"BUTTON"!==l.tagName&&"INPUT"!==l.tagName||(n.t=h.type),"INPUT"===l.tagName&&"number"===l.getAttribute("type")&&(n.value=h.value),-1!==p.indexOf("placeholder")&&"TEXTAREA"===l.tagName&&(l.removeAttribute("placeholder"),n.placeholder=h.placeholder),p={t:"a",p:t.slice()},l._special&&(p.trans=!0),Object.keys(n).length&&(p.a=n),e.push(p))}return h}async function newGetDeepNodes(o,a,i,s,l,u,d,c,p){a._parent=a.parentNode;let e;if(8!=a.nodeType){if(a.tagName&&-1!==a.tagName.indexOf("-")&&"LYTE-YIELD"!==a.tagName&&(e={t:"cD",p:s.slice()}),"LYTE-YIELD"===a.tagName)e={t:"i",p:s.slice()};else if("registerYield"===l||"yield"===l){var h=[];"TEMPLATE"!=a.tagName?d.push(new Error("(LC:24)Syntax error in node '"+errorNodeDetails(a)+"'. Yield must be given in template tag only")):(await this.processTemplate(a.content,h,o,u,d,c,p),getTransitionOrder(h),getTemplateDirectChild(h,e={t:"r",p:s.slice(),dN:h}))}else if("insertYield"===l)i.push({t:"i",p:s.slice()});else if("for"===l){var h=a;a._forTemplate={},h&&(a._forTemplate.content=h.content,a._forTemplate.content._parent=h,await this.processTemplate(a._forTemplate.content,h=[],o,u,d,c,p),getTransitionOrder(h),getTemplateDirectChild(h,e={t:"f",p:s.slice(),dN:h}),a=replaceParentNode(a,"for",e,o,d,!0,p))}else if("forIn"===l){h=a;a._forInTemplate={},h&&(a._forInTemplate.content=h.content,a._forInTemplate.content._parent=h,await this.processTemplate(a._forInTemplate.content,h=[],o,u,d,c,p),getTransitionOrder(h),getTemplateDirectChild(h,e={t:"fI",p:s.slice(),dN:h})),a=replaceParentNode(a,"forIn",e,o,d,!0,p)}else if("switch"===l||"if"===l||"case"==l){let n={},r={};var m,f=a.content.querySelector("[default]"),b=a.content.querySelectorAll("[case]"),g={},y=[];let i;for(var v={},A=0;A<b.length;A++){let e=!1;var T=[];let t=b[A],r=(m=b[A],t.getAttribute("case"));var N,w,E=r,L=(g[E]={},"switch"===l&&""==r&&(r='""'),"switch"===l&&b[A].setAttribute("is","case"),"TEMPLATE"!==t.tagName||t.getAttribute("is")&&"case"!=t.getAttribute("is")?(w=dom.createElement("template"),L=t.cloneNode(!0),w.content.appendChild(L),w.setAttribute("case",r),L.removeAttribute("case"),m=w,t=w.content,b[A].replaceWith(w)):(t.setAttribute("case",r),t=t.content),await processAttr(o,m,T,[A],l,u,d,c),T.length&&b[A].getAttribute("case").startsWith("{{")&&(N=e=!0,b[A].getAttribute("case"),b[A].dcn=!0,r="lc_id_"+A,m.setAttribute("lc-id",r),g[r]=g[E],delete g[E]),y.push(r),[]),v=(t._parent=a,await this.processTemplate(t,L,o,u,d,c,p),getTransitionOrder(L),getTemplateDirectChild(L,g[r]),{});"if"===l&&replaceCaseNode(m,o,d,a,v,p),""===r&&(r='""'),n[r]={dN:L,cdp:T[0]},L.forEach(function(e){e.cn=r}),e&&(n[r].dcn=!0),"if"!==l&&(w=n[i],e&&w&&w.additional&&w.additional.next&&(w.additional.next=b[A].getAttribute("lc-id")),(E=t.querySelector("template[is=break]"))?E.remove():b[A+1]?n[r].additional={next:b[A+1].getAttribute("case")}:f&&(n[r].additional={default:!0}),replaceCaseNode(m,o,d,a,v,p),i=r)}if(f){let e,t;g.default={},"TEMPLATE"!==f.tagName||f.getAttribute("is")?(h=dom.createElement("template"),x=f.cloneNode(!0),h.content.appendChild(x),h.setAttribute("default",""),x.removeAttribute("default"),e=h.content,t=h,f.replaceWith(h)):(e=f.content,t=f);var x=t.content.querySelector("template[is=break]"),h=(x&&x.remove(),[]);e._parent=a,await this.processTemplate(e,h,o,u,d,c,p),getTransitionOrder(h),getTemplateDirectChild(h,g.default),h.forEach(function(e){e.cn="default"}),r={dN:h},replaceCaseNode(t,o,d,a,v,p)}if("s"===(l="if"==l?"e":"s")){getSwitchOrder(n,g,r);var t=Object.keys(n);for(let e=0;e<t.length;e++)getTemplateDirectChild(n[t[e]].dN,g[t[e]])}e={t:l,p:s.slice(),c:n,d:r,dc:g,hd:N,co:y},v.svg&&(e.svg=!0),l="e"==l?"if":"switch";for(var C=Object.keys(g),S=0;S<C.length;S++)g[C[S]].hc&&(e.hc=!0,e.trans=!0);a=replaceParentNode(a,l,e,o,d,void 0,p)}else if("component"===l){a._componentTemplate={},a._componentTemplate.content=a.content;x=[];await this.processTemplate(a._componentTemplate.content,x,o,u,d,c,p),getTransitionOrder(x),getTemplateDirectChild(x,e={t:"cM",p:s.slice(),dN:x})}else if(3==a.nodeType){if(-1!==a.nodeValue.indexOf("{{")){a.nodeValue=a.nodeValue.replace(".{}","____lyteinternal____");let r=a.nodeValue,e=checkForMixedCase(r);if(e.bool){var _=e["mustacheSpots"];if(tempVal=[],_.length&&0<_.length)for(let t=0;t<_.length;t++){let e=_[t].mus;e.match(/\&|\||\!|\=|\+|-|\*|\/|<|>|\?|:|%/gm)&&(e=trimAttr(e,d,a,void 0,o)),r=r.replace(_[t].orgMus,function(){return e})}a.nodeValue=r}h=syntaxCheckWorkerNew(a.nodeValue);if(!h.bool)return void d.push(new Error("(LC:syn1)Syntax error in node "+h.err+" in "+a.nodeName+" for the node value: "+a.nodeValue));let t=await this.getMustache(a.nodeValue,o,h),n;if(t&&"timeoutError"==t)return void d.push(new Error("(LC:timeout1) Syntax error in node "+t.err+" in "+a.nodeName+" for the attribute: "+a.nodeName+" - "+a.nodeValue));if(t&&"object"==typeof t&&!1===t.bool&&d.push(new Error("(LC:3)Syntax error in node "+t.err+" in "+a.nodeName+" for the attribute: "+a.nodeName+" - "+a.nodeValue)),t){if((n=await this.getArray(t))&&"timeoutError"==n)return void d.push(new Error("(LC:timeout6)Syntax error in node "+a.nodeName+" for the value:  - "+a.nodeValue));if(!1===n)return void d.push(new Error("(LC:11)Syntax Error in node "+a.nodeName+"for the value:"+a.nodeValue))}if(t){if(!n){if(t=t.replace("____lyteinternal____",".{}"),(n=await this.getHelper(t,o))&&"lbindError"==n.args||"lbindError"==n)d.push(new Error("(LC:lbind2) Syntax Error : lbind are not allowed inside helpers in "+a.nodeName+" for : "+a.nodeValue));else if(n&&"lbind"==n.name)d.push(new Error("(LC:lbind1) Syntax Error : lbind are not allowed to render in dom "+a.nodeName+" for: "+a.nodeValue));else{if(n&&"timeoutError"==n)return void d.push(new Error("(LC:timeout2)Syntax Error in node "+a.nodeName+"for :"+a.nodeValue));if(!1===n)return void d.push(new Error("(LC:4)Syntax Error in node "+a.nodeName+"for :"+a.nodeValue))}n&&(-1==defaultImpDetails.helpers.indexOf(n.name)&&-1==defaultHelpers.indexOf(n.name)&&defaultImpDetails.helpers.push(n.name),getImportedHelpers(n.args,defaultImpDetails.helpers))}}else d.push(new Error("(LC:5)Syntax Error in node "+a.nodeName+"for :"+a.nodeValue));a.nodeValue=a.nodeValue.replace("____lyteinternal____",".{}");x=t;(n||x)&&i.push({t:"tX",p:s.slice()})}return void s.pop()}if(h=await processAttr(o,a,i,s,l,u,d,c),a.hasChildNodes()){let t;"svg"!=p&&"foreignObject"!=p||(t=p);for(let e=0;e<a.childNodes.length;e++){s.push(e);var r,n=a.childNodes[e].tagName;n?("svg"==n?p="svg":"foreignObject"!=n&&"FOREIGNOBJECT"!=n||(p="foreignObject"),r=a.childNodes[e].getAttribute("is"),n&&r?await this.newGetDeepNodes(o,a.childNodes[e],i,s,r,u,d,c,p):await this.newGetDeepNodes(o,a.childNodes[e],i,s,void 0,u,d,c,p),a.childNodes[e].removeAttribute("errorinfo")):await this.newGetDeepNodes(o,a.childNodes[e],i,s,void 0,u,d,c,p),p=t}}h&&h._special&&e&&"cD"==e.t&&(e._igTs=!0),h&&h._special&&e&&"cM"==e.t&&(e._igTs=!0),h&&h._special&&e&&"i"==e.t&&(e._igTs=!0),e&&i.push(e)}s.pop()}function getArrayIndex(t,r){for(let e=0;e<t.length;e++)if(t[e]===r)return e}function getTrimmedContent(r,n,t){var e=r;if(t){n=[];let e=t.parentNode;for(;;)if(n.unshift(this.getArrayIndex(e.childNodes,t)),e=e.parentNode,t=t.parentNode,!e)break}for(let t=0;t<n.length;t++){for(let e=r.childNodes.length-1;e>n[t];e--)r.childNodes[e].remove();r=r.childNodes[n[t]]}return e}function createDocFragment(e){for(var t=e.cloneNode(!0).childNodes,r=dom.createDocumentFragment(),n=t.length,i=0;i<n;i++)r.appendChild(t[0]);return r}async function splitMixedText(e,t,r,n,i){console.log("str",e);for(var o,a=[],s=0,l={name:"concat",args:[]},u=0;u<e.length;u++){var d=u;if("\\"!==e[u-1]&&"{"===e[u]&&"{"===e[++u])a.push("{{"),l.args.push("'"+e.substr(s,d-s)+"'"),s=u+1,o=!0;else if("}"===e[u]&&"}"===e[++u]&&a.length){a.pop(s);var c,d=e.substr(s,d-s);if((d.startsWith("'")&&d.endsWith("'")||d.startsWith('"')&&d.endsWith('"'))&&console.warn("Rendering string value inside dynamic data (mustache) is depriciated","for the value ",d,"on the attribute value ",e),(c=await this.getArray(d))&&"timeoutError"==c)return void r.push(new Error("(LC:timeout8)Syntax error in node "+n.nodeName+" for the value:  - "+n.nodeValue));if(!1===c)return void r.push(new Error("(LC:14)Syntax Error in node "+n.nodeName+"for the value:"+n.nodeValue));if(c&&l.args.push({type:"sq",value:d=c}),!c){if(c=await this.getHelper(d,t)){if("timeoutError"==c)return void r.push(new Error("(LC:timeout5)Syntax Error in node for :"+e));if("lbind"==c.name)return void r.push(new Error("(LC:lbind5) Syntax Error : lbind are not allowed with prepending or appending with texts for :"+e));if("lbindError"==c||"lbindError"==c.args)return void r.push(new Error("(LC:lbind6)Syntax Error : lbind are not allowed inside helpers on node "+n.nodeName+" for: "+e));if("lbind"==c.name&&"TEMPLATE"==n.tagName&&n.hasAttribute("is")&&/if|for|switch/g.test(n.getAttribute("is")))return void r.push(new Error("(LC:lbind7)Syntax Error : lbind not allowed as value in if/for/switch nodefor: "+e));if("action"==c.name)return void r.push(new Error("(LC:9)Syntax Error : action are not allowed with prepending or appending with texts for :"+e));if("method"==c.name)return void r.push(new Error("(LC:10)Syntax Error : method are not allowed with prepending or appending with texts for :"+e));l.args.push({type:"helper",value:d=c}),-1==defaultImpDetails.helpers.indexOf(c.name)&&-1==defaultHelpers.indexOf(c.name)&&defaultImpDetails.helpers.push(c.name),getImportedHelpers(c.args,defaultImpDetails.helpers)}else{if(!1===c)return void r.push(new Error("(LC:13)Syntax error in node "+n.nodeName+" for the attribute:"+n.attributes[i].nodeName+"- "+n.attributes[i].nodeValue));(d.startsWith("'")&&d.endsWith("'")||d.startsWith('"')&&d.endsWith('"'))&&console.warn("Rendering string value inside dynamic data (mustache) is depriciated","for the value ",d,"on the attribute value ",e),l.args.push(d)}s=u+1}}}return!!o&&(s<e.length&&l.args.push("'"+e.substr(s,e.length-s)+"'"),console.log("str is helper",l),l)}function syntaxCheck(e){for(var t,r=[],n=0;n<e.length;n++)"'"===e[n]?"'"===t&&"\\"!==e[n-1]?(r.pop(),t=void 0):r.length||(t=e[n],r.push(t)):'"'===e[n]&&('"'===t&&"\\"!==e[n-1]?(r.pop(),t=void 0):r.length||(t=e[n],r.push(t)));return!r.length}async function getMustache(n,i,o){return new Promise(function(t,e){var r=setTimeout(function(){str+="\n getMustache error : "+n,localStorage.setItem(i,str),console.log("getMustache error",n),templateWorker.terminate(),t("timeoutError"),templateWorker=new Worker("worker.js")},4e3);templateWorker.postMessage({func:"getMustache",params:[n,i,o],debug:debug}),templateWorker.onmessage=function(e){t(e.data),clearTimeout(r)}})}async function getArray(n){return new Promise(function(t,e){var r=setTimeout(function(){str+="\n getArray error : "+n,console.log("getArray error",n),templateWorker.terminate(),t("timeoutError"),templateWorker=new Worker("worker.js")},4e3);templateWorker.postMessage({func:"getArray",params:[n,[],defaultHelpers],debug:debug}),templateWorker.onmessage=function(e){t(e.data),clearTimeout(r)}})}async function getHelper(n,i){return new Promise(function(t,e){var r=setTimeout(function(){str+="\n getHelper error : "+n,localStorage.setItem(i,str),console.log("getHelper error",n),templateWorker.terminate(),t("timeoutError"),templateWorker=new Worker("worker.js")},4e6);templateWorker.postMessage({func:"getHelper",params:[n],debug:debug}),templateWorker.onmessage=function(e){t(e.data),clearTimeout(r)}})}function getDynamicValue(e){var t,r,n=[],i=n,o=[],a="",s=[],l=[],u=[];console.log("dynamic start",e);for(var d=0;d<e.length;d++)if("."===e[d])a.length&&i.push(a),a="";else if("["===e[d]){for(l.push(d),a.length&&i.push(a);"s"===e[d+1];)d++;'"'===e[d+1]||"'"===e[d+1]?(s.push(e[d+1]),t=e[d+1],d++):i=o.length?(i.push([]),u.push(i),i[i.length-1]):(o.push([]),u.push(i),o[o.length-1]),a=""}else{if(('"'===e[d]||"'"===e[d])&&e[d++]===t){for(;"s"===e[d]&&"]"!=e[d];)d++;s.pop(),r=!0}"]"===e[d]?(l.pop(),a.length&&(!0===r||isNaN(parseInt(a))?i.push(a):u.length&&(i=u.pop(),o.length&&Array.isArray(i[i.length-1])&&!i[i.length-1].length&&i.pop(),i.push(a),!l.length)&&o.length&&o.shift()),!l.length&&o.length?(n.push(o.shift()),i=n):u.length&&!o.length&&(i=u.pop()),r=a=""):a=a.concat(e[d])}return a.length&&n.push(a),(s.length||l.length)&&console.log("check the syntax",s,l),console.log(n,"dynamic end"),n}function deepCopyObject(e){for(var t,r,n,i,o,a,s=[{source:e,target:Object.create(Object.getPrototypeOf(e))}],l=[e],e=s[0].target,u=[e];t=s.shift();)for(r=Object.getOwnPropertyNames(t.source),n=0;n<r.length;n++)(i=Object.getOwnPropertyDescriptor(t.source,r[n])).value&&"object"==typeof i.value?(o=i.value,i.value=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o)),-1!=(a=l.indexOf(o))?(i.value=u[a],Object.defineProperty(t.target,r[n],i)):(l.push(o),u.push(i.value),Object.defineProperty(t.target,r[n],i),s.push({source:o,target:i.value}))):Object.defineProperty(t.target,r[n],i);return e}function replaceCaseNode(e,t,r,n,i,o){var a,s;if(o&&"svg"==o)return i.svg=!0,(s=e.cloneNode()).innerHTML="<svg>"+e.innerHTML+"</svg>",s.setAttribute("depth",1),void e.replaceWith(s);for(var l=0;l<e.content.children.length;l++)if("TEMPLATE"!==e.content.children[l].tagName){/^(TR|TD|TH|TBODY|THEAD|TFOOT)$/.test(e.content.children[l].tagName)&&(a=e.content.children[l].tagName);break}a&&("TR"===a?((s=e.cloneNode()).innerHTML="<table><tbody>"+e.innerHTML+"</tbody></table>",s.setAttribute("depth",2)):/^(TBODY|THEAD|TFOOT)$/.test(a)?((s=e.cloneNode()).innerHTML="<table>"+e.innerHTML+"</table>",s.setAttribute("depth",1)):((s=e.cloneNode()).innerHTML="<table><tbody><tr>"+e.innerHTML+"</tr></tbody></table>",s.setAttribute("depth",3)),1<s.content.childNodes.length&&s.content.childNodes.forEach(function(e){"TABLE"!=e.nodeName&&(1==e.nodeType?r.push(new Error("(LC:15)Syntax Error : Unexpected node - "+e.nodeName+"taginside "+a+" tag ")):r.push(new Error("(LC:16)Syntax Error : Unexpected text node - "+e.nodeValue+"present inside "+a+" tag ")))}),e.replaceWith(s))}function getParent(e){for(var t=e;t;){if(t._parent&&t._parent.tagName&&"TEMPLATE"!=t._parent.tagName)return t._parent;t=t._parent}}function getTemplateDirectChild(e,t){var r=[];t.dc=[];for(var n=0;n<e.length;n++){var i=e[n],o=!1;(i.trans||i.hc||i._comp||"cD"==i.t||"i"==i.t||"cM"==i.t)&&!i._igTs&&(r.forEach(function(e,t){this.subArray(i.p,e)&&(o=!0)}),o||(r.push(i.p),t.dc.push(i.in)),t.hc=!0,t.trans=!0)}if(!t.hc){for(n=0;n<e.length;n++)null!=e[n].in&&"cD"!=e[n].t&&"i"!=e[n].t&&(e[n].in=void 0);delete t.dc}}function getSwitchOrder(e,t,r){for(var n=Object.keys(e),i=n.length,o=[],a=0;a<i;a++)if(t[n[a]].trans&&e[n[a]].additional){var s=[],l=!1;for(e[n[a]].dN.forEach(function(e){o.push(e)}),s.push(n[a]);n[a]&&e[n[a]].additional;){var u,l=!0;if(e[n[a]].additional.next)u=e[n[a]].additional.next;else if(e[n[a]].additional.default){u="default",r.dN.forEach(function(e){o.push(e)}),a++;continue}t[u].trans&&e[u].dN.forEach(function(e){o.push(e)}),s.push(u),a++}l&&getTransitionOrder(o,!0)}}function getTransitionOrder(e,t){for(var r,n=0,i=e.length-1;0<=i;i--)!e[i].trans&&!/^f|fI|e|s|cD|cM|i|r|yield$/g.test(e[i].t)||e[i]._igTs||(e[i].in=n,n++,r&&(subArray(r.p,e[i].p)?e[i].chld=getChild(e,i,t):r&&(e[i].sibl=[r.in])),r=e[i])}function subArray(e,t){for(var r=!1,n=0;n<t.length;n++)if(t[n]!=e[n]){r=!0;break}return!r&&t.length!=e.length}function getChild(e,t,r){var n,i,o=[],a=t;for(r&&(i=e[t].cn);e[t]&&(t++,!r||!e[t]||e[t].cn==i);)if(e[t]&&(e[t].trans||e[t]._comp||/^f|fI|e|s|cD|i|r|yield$/g.test(e[t].t))&&!e[t]._igTs&&(null==n||!subArray(e[t].p,n))){if(!subArray(e[t].p,e[a].p))break;o.push(e[t].in),n=e[t].p}return e[t]&&(e[a].sibl=[e[t].in]),o}function svgFix(e,t,r,n,i,o){var a,s=e.cloneNode();return e.content&&e.content.children&&e.content.children[0]&&e.content.children[0].tagName?(a=e.content.children[0].tagName,s.innerHTML="<svg>"+e.innerHTML+"</svg>",s.setAttribute("depth",1),inner(e,s,t,a,n,r)):(o.push(new Error("Syntax Error in the node "+this.errorNodeDetails(e))),e)}function replaceParentNode(e,t,r,n,i,o,a){var s=getParent(e);if(s&&a)return"svg"==a?(d=s.tagName,r.svg=!0,svgFix(e,t,r,d,n,i)):e;if(s){var l,u,d=s.tagName,c=e.cloneNode();if(o)for(var p=0;p<e.content.children.length;p++)if("TEMPLATE"!==e.content.children[p].tagName){/^(TR|TD|TH|TBODY|THEAD|TFOOT)$/.test(e.content.children[p].tagName)&&(u=e.content.children[p].tagName);break}if(s&&/^(SELECT|TR|TABLE|TBODY|THEAD|TFOOT)$/.test(d)){switch(d){case"SELECT":l="option";break;case"TR":o&&u&&"TR"==u?i.push(new Error("(LC:17)Syntax Error : Unexpected node - "+u+"tag inside "+d+" tag ")):(c.innerHTML="<table><tbody><tr>"+e.innerHTML+"</tr></tbody></table>",c.setAttribute("depth",3),l="td");break;case"TABLE":l=(o&&(!u||"TBODY"!=u&&"THEAD"!=u&&"TFOOT"!=u)?u&&"TR"==u?(c.innerHTML="<table><tbody>"+e.innerHTML+"</tbody></table>",c.setAttribute("depth",2)):(c.innerHTML="<table><tbody><tr>"+e.innerHTML+"</tr></tbody></table>",c.setAttribute("depth",3)):(c.innerHTML="<table>"+e.innerHTML+"</table>",c.setAttribute("depth",1)),"tbody");break;case"TBODY":case"THEAD":case"TFOOT":l=(!o||u&&"TR"==u?(c.innerHTML="<table><tbody>"+e.innerHTML+"</tbody></table>",c.setAttribute("depth",2)):(c.innerHTML="<table><tbody><tr>"+e.innerHTML+"</tr></tbody></table>",c.setAttribute("depth",3)),"tr")}return 1<c.content.childNodes.length&&c.content.childNodes.forEach(function(e){"TABLE"!=e.nodeName&&(1==e.nodeType?i.push(new Error("(LC:18)Syntax Error : Unexpected node - "+e.nodeName+"tag inside "+d+" tag ")):i.push(new Error("(LC:19)Syntax Error : Unexpected text node - "+e.nodeValue+"present inside "+d+" tag ")))}),inner(e,c,t,l,d,r)}}return e}function inner(e,t,r,n,i,o){var a=this.addUnbound(e,void 0,n,i);dom.createElement(i);switch(r){case"for":a.setAttribute("is","for"),a.setAttribute("lyte-for","true"),e.hasAttribute("unbound")&&a.setAttribute("unbound",e.getAttribute("unbound"));break;case"if":case"switch":a.setAttribute("is",r),a.setAttribute("lyte-"+r,"true");break;case"forIn":a.setAttribute("is","forIn"),a.setAttribute("lyte-forin","true"),e.hasAttribute("unbound")&&a.setAttribute("unbound",e.getAttribute("unbound"))}for(var s=e.attributes,l=0;l<s.length;l++)s[l].nodeName.startsWith("@")||a.setAttribute(s[l].nodeName,s[l].nodeValue);return"SELECT"===i||"for"!==r&&"forIn"!==r?(this.removeAllAttributes(e),o.actualTemplate=e.outerHTML):(this.removeAllAttributes(t),o.actualTemplate=t.outerHTML,o.tagName=i,t.hasAttribute("depth")&&a.setAttribute("depth",t.getAttribute("depth"))),e.replaceWith(a),a}function removeAllAttributes(t){var r=t.querySelectorAll("errorinfo");for(let e=0;e<r.length;e++)r.removeAttribute("errorinfo");var n=Array.from(t.attributes);for(let e=0;e<n.length;e++)"depth"!=n[e].nodeName&&"is"!=n[e].nodeName&&t.removeAttribute(n[e].nodeName)}function siblingNullCheck(e){return null===e.previousSibling.nodeValue||null===e.nextSibling.nodeValue?null:1}function jspIfToSwitch(e){var t=dom.createElement("template");return e.hasAttribute("is")&&"if"==e.getAttribute("is")&&(t.setAttribute("is","switch"),t.setAttribute("l-c",!0),e.hasAttribute("_jsp"))&&t.setAttribute("_jsp",e.getAttribute("_jsp")),getCase(t,e),t}function appendBreak(e){var t=dom.createElement("template");t.setAttribute("is","break"),e.content.appendChild(t)}function getCase(e,t){var r,n,i=t.getAttribute("value"),o="true"==t.getAttribute("_jsp")?(r=t.content.children[0],t.content.children[1]):(r=t.content.querySelector("[case=true]"),t.content.querySelector("[case=false]"));!r&&o&&((n=dom.createElement("template")).setAttribute("case","true"),r=n),r||o?(r&&"true"==r.getAttribute("case")&&(caseTemp="TEMPLATE"!=r.tagName?(r.removeAttribute("case"),createCase(i,r)):createCase(i,r.content),e.content.appendChild(caseTemp),appendBreak(caseTemp)),o&&"false"==o.getAttribute("case")&&("TEMPLATE"!=o.tagName?(o.removeAttribute("case"),(n=dom.createElement("template")).setAttribute("default",""),n.content.appendChild(o),e.content.appendChild(n)):o.content.children&&o.content.children.length&&"true"==o.content.children[0].getAttribute("lyte-elif")?getCase(e,o.content.children[0]):((i=dom.createElement("template")).setAttribute("default",""),i.content.appendChild(o.content),e.content.appendChild(i)))):e.innerHTML=t.innerHTML}function createCase(e,t){var r=dom.createElement("template");return r.setAttribute("is","case"),r.setAttribute("case",e),r.content.appendChild(t),r}function handleLyteIf(e,t){var r,n,i,o,a=dom.createElement("template"),s=getErrorInfo(e),s=(e.hasAttribute("lyte-if")?(n=e.getAttribute("lyte-if"),e.removeAttribute("lyte-if"),a.setAttribute("is","switch"),e.hasAttribute("__vp")&&a.setAttribute("__vp",e.getAttribute("__vp")),a.setAttribute("value",n),a.setAttribute("l-c",!0),a.setAttribute("_new","true"),a.setAttribute("errorinfo",JSON.stringify(s))):e.hasAttribute("lyte-else-if")&&(n=e.getAttribute("lyte-else-if"),e.removeAttribute("lyte-else-if")),ide&&win.elifHold&&(a.setAttribute("el",!0),win.elifHold=!1),t&&"template"==e.tagName?(r=dom.createElement("template")).innerHTML=e.innerHTML:"TEMPLATE"===e.tagName?(r=e.cloneNode()).innerHTML=e.innerHTML:(r=dom.createElement("template")).innerHTML=e.outerHTML,r.hasAttribute("is")&&((s=dom.createElement("template")).content.appendChild(r),r=s),a.content.appendChild(r),r.setAttribute("case",n),r.setAttribute("is","case"),"switch"==a.getAttribute("is")&&a.hasAttribute("value")&&a.getAttribute("value").startsWith("{{")&&a.removeAttribute("value"),dom.createElement("template"));return s.setAttribute("is","break"),r.content.appendChild(s),e.nextElementSibling&&((n=e.nextElementSibling).hasAttribute("lyte-else")?o="lyte-else":n.hasAttribute("lyte-else-if")&&(o="lyte-else-if"),o)&&("lyte-else"===o?(n.removeAttribute("lyte-else"),t&&"template"==n.tagName?(i=dom.createElement("template")).innerHTML=n.innerHTML:"TEMPLATE"===n.tagName?(i=n.cloneNode()).innerHTML=n.innerHTML:(i=dom.createElement("template")).innerHTML=n.outerHTML,i.setAttribute("default","")):i=handleLyteIf(n,t).content,n.nextSibling&&n.previousSibling&&siblingNullCheck(n)&&""===n.nextSibling.nodeValue.trim()&&""===n.previousSibling.nodeValue.trim()&&n.nextSibling.remove(),n.remove(),a.content.appendChild(i)),a}function handleLyteSwitch(e,t){var r,n,i=e.getAttribute("lyte-switch"),o=getErrorInfo(e);if("TEMPLATE"===e.tagName)(a=e).removeAttribute("lyte-switch"),r=Array.from(a.content.children),n="template";else{if(t&&"template"==e.tagName){for(var a=dom.createElement("template"),s=e.attributes,l=0;l<s.length;l++)a.setAttribute(s[l].nodeName,s[l].nodeValue);a.removeAttribute("lyte-switch"),n="template"}else e.removeAttribute("lyte-switch"),a=dom.createElement("template"),ide&&a.setAttribute("nt",!0);r=Array.from(e.children)}a.setAttribute("_new","true");for(var u,d,c,p=0;p<r.length;p++)if((m=r[p]).hasAttribute("lyte-case")){var h="TEMPLATE"===m.tagName;if(t&&"template"===m.tagName){for(s=((v=dom.createElement("template")).innerHTML=m.innerHTML,m.attributes),l=0;l<s.length;l++)v.setAttribute(s[l].nodeName,s[l].nodeValue);m=v,h=!0}var m,f,b=m,g=m.hasAttribute("lyte-break"),y=m.getAttribute("lyte-case");m.removeAttribute("lyte-case"),m.removeAttribute("lyte-break"),m.hasAttribute("lyte-if")?(h=!1,m=handleLyteIf(f=m,t),f.remove()):m.hasAttribute("lyte-switch")&&(h=!1,handleLyteSwitch(m,t)),h?(a.content.appendChild(m),m.setAttribute("case",y),m.removeAttribute("lyte-case")):((b=dom.createElement("template")).setAttribute("case",y),m.removeAttribute("lyte-case"),b.content.appendChild(m),a.content.appendChild(b)),g&&((f=dom.createElement("template")).setAttribute("is","break"),b.content.appendChild(f),m.removeAttribute("lyte-break"))}if(d=((!t||"template"!=e.tagName)&&n?e.content:e).querySelector("[lyte-default]")){if("TEMPLATE"===d.tagName)u=!0;else if(t&&"template"===d.tagName){(v=dom.createElement("template")).innerHTML=d.innerHTML;for(var v,s=d.attributes,l=0;l<s.length;l++)v.setAttribute(s[l].nodeName,s[l].nodeValue);d=v,u=!0}d.removeAttribute("lyte-default"),d.hasAttribute("lyte-if")?(u=!1,d=handleLyteIf(c=d,t),c.remove()):d.hasAttribute("lyte-switch")&&(u=!1,handleLyteSwitch(d,t)),u?(a.content.appendChild(d),d.setAttribute("default","")):((c=dom.createElement("template")).setAttribute("default",""),c.content.appendChild(d),a.content.appendChild(c))}return a.setAttribute("value",i),a.setAttribute("is","switch"),n?(e=a).setAttribute("errorinfo",JSON.stringify(o)):(a.setAttribute("errorinfo",JSON.stringify(o)),e.innerHTML=a.outerHTML),e}