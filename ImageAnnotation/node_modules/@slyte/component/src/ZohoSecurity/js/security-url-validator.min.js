"use strict";!function(){var t={unsafeProtocolRegex:/^(?:\w+script|data)$/i,sanitizeAction:{ACTION_ENCODE:"ENCODE",ACTION_REMOVE:"REMOVE"}},n={};!function(t){function n(t){throw new RangeError(_[t])}function e(t,n){for(var e=t.length,o=[];e--;)o[e]=n(t[e]);return o}function o(t,n){var o=t.split("@"),r="";return o.length>1&&(r=o[0]+"@",t=o[1]),r+e((t=t.replace(d,".")).split("."),n).join(".")}function r(t){for(var n,e,o=[],r=0,i=t.length;r<i;)(n=t.charCodeAt(r++))>=55296&&n<=56319&&r<i?56320==(64512&(e=t.charCodeAt(r++)))?o.push(((1023&n)<<10)+(1023&e)+65536):(o.push(n),r--):o.push(n);return o}function i(t){return e(t,function(t){var n="";return t>65535&&(n+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=S(t)}).join("")}function O(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:A}function c(t,n){return t+22+75*(t<26)-((0!=n)<<5)}function u(t,n,e){var o=0;for(t=e?v(t/N):t>>1,t+=v(t/n);t>D*C>>1;o+=A)t=v(t/D);return v(o+(D+1)*t/(t+L))}function f(t){var e,o,r,c,f,E,a,L,N,I,T=[],d=t.length,_=0,D=p,S=l;for((o=t.lastIndexOf(h))<0&&(o=0),r=0;r<o;++r)t.charCodeAt(r)>=128&&n("not-basic"),T.push(t.charCodeAt(r));for(c=o>0?o+1:0;c<d;){for(f=_,E=1,a=A;c>=d&&n("invalid-input"),((L=O(t.charCodeAt(c++)))>=A||L>v((s-_)/E))&&n("overflow"),_+=L*E,N=a<=S?R:a>=S+C?C:a-S,!(L<N);a+=A)E>v(s/(I=A-N))&&n("overflow"),E*=I;S=u(_-f,e=T.length+1,0==f),v(_/e)>s-D&&n("overflow"),D+=v(_/e),_%=e,T.splice(_++,0,D)}return i(T)}function E(t){var e,o,i,O,f,E,a,L,N,I,T,d,_,D,g,U=[];for(d=(t=r(t)).length,e=p,o=0,f=l,E=0;E<d;++E)(T=t[E])<128&&U.push(S(T));for(i=O=U.length,O&&U.push(h);i<d;){for(a=s,E=0;E<d;++E)(T=t[E])>=e&&T<a&&(a=T);for(a-e>v((s-o)/(_=i+1))&&n("overflow"),o+=(a-e)*_,e=a,E=0;E<d;++E)if((T=t[E])<e&&++o>s&&n("overflow"),T==e){for(L=o,N=A;I=N<=f?R:N>=f+C?C:N-f,!(L<I);N+=A)g=L-I,D=A-I,U.push(S(c(I+g%D,0))),L=v(g/D);U.push(S(c(L,0))),f=u(o,_,i==O),o=0,++i}++o,++e}return U.join("")}var a,s=2147483647,A=36,R=1,C=26,L=38,N=700,l=72,p=128,h="-",I=/^xn--/,T=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=A-R,v=Math.floor,S=String.fromCharCode;a={version:"1.4.1",ucs2:{decode:r,encode:i},decode:f,encode:E,toASCII:function(t){return o(t,function(t){return T.test(t)?"xn--"+E(t):t})},toUnicode:function(t){return o(t,function(t){return I.test(t)?f(t.slice(4).toLowerCase()):t})}},t.punycode=a}(n),n.sanitize=function(e,o){if(!e)return"";(o=o||{}).ALLOWED_PROTOCOLS=o.ALLOWED_PROTOCOLS||["https","http"],o.RETURN_PUNYCODE=0!=o.RETURN_PUNYCODE,o.ACTION=o.ACTION||t.sanitizeAction.ACTION_ENCODE,o.RETURN_OBJECT=o.RETURN_OBJECT||!1,o.RETURN_ORIGINAL=o.RETURN_ORIGINAL||!1;var r,i=document.createElement("a");i.href=e;var O=(r=i.cloneNode(!1)).protocol.slice(0,-1),c=r.host,u=r.port,f=r.pathname,E=r.hash,a=r.href,s=!0,A=!0;if(o.RETURN_PUNYCODE?(c=n.punycode.toASCII(c),a=n.punycode.toASCII(a)):(c=n.punycode.toUnicode(c),a=n.punycode.toUnicode(a)),o.ALLOWED_PROTOCOLS){if(A=!1,o.ALLOWED_PROTOCOLS.constructor===Array&&o.ALLOWED_PROTOCOLS.length>0)for(N=0;N<o.ALLOWED_PROTOCOLS.length&&1!=A;N++){var R=o.ALLOWED_PROTOCOLS[N];R.constructor===RegExp?R.test(O)&&(A=!0):R.constructor===String&&R==O&&(A=!0)}}else t.unsafeProtocolRegex.test(O)&&(A=!1);if(o.ALLOWED_DOMAINS){s=!1;var C=n.punycode.toASCII(c),L=n.punycode.toUnicode(c);if(o.ALLOWED_DOMAINS.constructor===Array&&o.ALLOWED_DOMAINS.length>0)for(var N=0;N<o.ALLOWED_DOMAINS.length&&1!=s;N++){var l=o.ALLOWED_DOMAINS[N];l.constructor===RegExp?(l.test(C)||l.test(L))&&(s=!0):l.constructor===String&&(l!=C&&l!=L||(s=!0))}}if(s){if(A)return o.RETURN_OBJECT?{PROTOCOL:O,DOMAIN:c,PORT:u,PATH:f,HASH:E,RESOLVED_URL:a,ORIGINAL_URL:e}:o.RETURN_ORIGINAL?e:a;if(o.ACTION==t.sanitizeAction.ACTION_ENCODE)return a.replace(/:/,"%3A")}return""},n.sanitize.config={ACTION:t.sanitizeAction.ACTION_ENCODE,ALLOWED_PROTOCOLS:["https","http"],RETURN_PUNYCODE:!0,RETURN_OBJECT:!1,RETURN_ORIGINAL:!1},Object.freeze&&(n=Object.freeze(n)),ZSEC.util.defineProperty(ZSEC,"URLValidator",n,!0,!1,!1,!0)}();