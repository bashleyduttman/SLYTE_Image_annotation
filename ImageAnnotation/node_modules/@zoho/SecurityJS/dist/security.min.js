!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@stardazed/streams-compression")):"function"==typeof define&&define.amd?define(["@stardazed/streams-compression"],t):e.ZWAF=t(e.streamsCompression)}(this,function(R){"use strict";function e(e,t,r,n,o,i,a){if(n||!(t in e))return Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),1}catch(e){return}}()?(o=!0===o,i=!0===i,a=!0===a,Object.defineProperty(e,t,{value:r,writable:o,configurable:i,enumerable:a})):(e[t]=r,e)}var u,l,c=(c=String.prototype.codePointAt)||function(e){if(null===this)throw new TypeError(" ");var t=String(this),r=t.length,n=e?Number(e):0;if(!((n=window.isNan(n)?0:n)<0||r<=n)){var o=t.charCodeAt(n),e=void 0;return 55296<=o&&o<=56319&&n+1<r&&56320<=(e=t.charCodeAt(n+1))&&e<=57343?1024*(o-55296)+e-56320+65536:o}},y=String.fromCodePoint;function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}y||(u=String.fromCharCode,l=Math.floor,y=function(){for(var e=[],t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.length,i=-1;if(!o)return"";for(var a="";++i<o;){var c=Number(r[i]);if(!isFinite(c)||c<0||1114111<c||l(c)!==c)throw new RangeError("Invalid code point: "+c);c<=65535?e.push(c):(c-=65536,e.push(55296+(c>>10),c%1024+56320)),(i+1===o||16384<e.length)&&(a+=u.apply(void 0,e),e.length=0)}return a});var t=(function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(r,[{key:"debug",value:function(){var e;if(window&&window.console&&this.level!==this.LEVELS.NONE&&this.level===this.LEVELS.DEBUG){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=window.console).debug.apply(e,r.concat([performance.now()]))}}},{key:"info",value:function(){var e;if(window&&window.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.INFO)){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=window.console).log.apply(e,r.concat([performance.now()]))}}},{key:"warn",value:function(){var e;if(window&&window.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.WARN)){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=window.console).warn.apply(e,r.concat([performance.now()]))}}},{key:"error",value:function(){var e;if(window&&window.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.ERROR)){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=window.console).error.apply(e,r.concat([performance.now()]))}}}]),r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.LEVELS={NONE:-1,DEBUG:0,INFO:1,WARN:2,ERROR:3},e===this.LEVELS.NONE||e===this.LEVELS.DEBUG||e===this.LEVELS.INFO||e===this.LEVELS.WARN||e===this.LEVELS.ERROR?this.level=e:this.level=this.LEVELS.ERROR}var o=window&&window.ZWAF?window.ZWAF:{version:"7.0.0"},i=new t;o.defineProperty||(o.defineProperty=e),o.logger||(o.logger=i),o["7_0_0"]||(o["7_0_0"]={version:"7.0.0",defineProperty:e,logger:i});var a=!1,s={log:function(){if(window&&window.console&&window.console.log&&window.navigator&&window.navigator.userAgent&&!a){var e=window.navigator.userAgent.match(/opera|chrome|safari|firefox|msie|trident(?=\/)/i);if(a=!0,e&&e[0].search(/trident|msie/i)<0)return window.console.log("%cSTOP!","color:red;font-size:xx-large;font-weight:bold;"),void window.console.log("%cThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details","font-size:large;");window.console.log("STOP!\nThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details")}}};function G(e,t){if(e instanceof Object)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function M(e,t){var r;(r=Array.prototype.splice).call.apply(r,[e,e.length,0].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t)))}function H(e,t){if(!e||e.constructor===Object)return e;for(var r={},n=0;n<e.length;n++){var o=e[n];r[o[t]]=o}return r}function z(e){if(e&&e.constructor===String)return e.toLowerCase();if(e.constructor===Array)for(var t=0;t<e.length;t++)e[t]=z(e[t]);return e}function V(e,t,r,n){if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++)f(e,t,o,r);else for(var a in e)n&&-1!==n.indexOf(a)||f(e,t,a,r);return t}function f(e,t,r,n){var o;n?(o=e[r],Array.isArray(o)?(t[r]||(t[r]=[]),V(o,t[r],n)):o instanceof Object?(t[r]||(t[r]={}),V(o,t[r],n)):t[r]=o):t[r]=e[r]}var d=Array.prototype.indexOf||function(e){if(null==this)throw new TypeError(" ");var t={},r=t.length>>>0;if(0==r)return-1;var n=0;if(0<(arguments.length<=1?0:arguments.length-1)&&(n=Number(arguments.length<=2?void 0:arguments[2]),isNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),r<=n)return-1;for(var o=0<=n?n:Math.max(r-Math.abs(n),0);o<r;o++)if(o in t&&t.charAt(o)===e)return o;return-1};function m(e,t,r){var n=2<arguments.length&&void 0!==r?r:{},n=Object.assign({path:"/",SameSite:"lax","max-age":864e7},n);if(encodeURIComponent){var o,i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(o in n){i+="; "+o;var a=n[o];!0!==a&&(i+="="+a)}document.cookie=i}}function L(e,t){m(e,"",{path:1<arguments.length&&void 0!==t?t:"/","max-age":-1})}function I(e){e+="=";var t=document.cookie,n=void 0;return t.split("; ").forEach(function(t){if(void 0===n){var r=void 0;try{decodeURIComponent&&(r=decodeURIComponent(t))}catch(e){r=t,ZWAF&&ZWAF.logger&&ZWAF.logger.warn&&ZWAF.logger.warn("Error while trying to decode Cookie value!")}0===r.indexOf(e)&&(n=r.substring(e.length))}}),n}function C(e){return!!I(e)}function D(e){return window&&window.localStorage&&null!=e?window.localStorage.getItem(e):null}function P(e,t){return window&&window.localStorage&&null!=e&&window.localStorage.setItem(e,t)}function k(e){return D(e)}function x(e,t,r,n){if(!t)return e;var o=Object.keys(t);if(!o.length)return e;var i=!0,a=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s,f=u.value,d=t[f];void 0===e[f]?e[f]=t[f]:r&&(s=e[f],is(s,Object)&&is(d,Object)?x(s,d,r,n):n&&is(s,Array)&&is(d,Array)&&(e[f]=s.concat(d)))}}catch(e){a=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}return e}"7.0.0"!==o.version||o.Console||o.defineProperty(o,"Console",s,!0,!1,!1,!0),o["7_0_0"].Console||o.defineProperty(o["7_0_0"],"Console",s,!0,!1,!1,!0);["_zcsr_tmp","com_chat_owner","com_avcliq_owner","wms.agent"].some(C)&&o&&o["7_0_0"]&&o["7_0_0"].Console&&o["7_0_0"].Console.log();var p="_zwaf_ua",h={init:function(){L(p);var e=!!window.ulaa,t=navigator&&navigator.brave&&"function"==typeof navigator.brave.isBrave;e?m(p,"Ulaa"):t?m(p,"Brave"):window&&window.addEventListener("load",function(){window.setTimeout(function(){window.getComputedStyle(window.document.documentElement).getPropertyValue("--arc-palette-background")&&m(p,"Arc")},1e3)})},disable:function(){L(p)}};"7.0.0"!==o.version||o.UAIdentification||o.defineProperty(o,"UAIdentification",h,!0,!1,!1,!0),o["7_0_0"].UAIdentification||o.defineProperty(o["7_0_0"],"UAIdentification",h,!0,!1,!1,!0),o&&o["7_0_0"]&&o["7_0_0"].UAIdentification&&o["7_0_0"].UAIdentification.init();var A=null,g=null,E="csrf",v="param_name",T="cookie_name";function S(){return g=g||this.loadAppAgentConf().then(function(e){return e.json().then(function(e){var t=e&&e[E]&&e[E][v];if(!t)throw Error("Invalid CSRF Param Name in Conf");e=e&&e[E]&&e[E][T];if(!e)throw Error("Invalid CSRF Cookie Name in Conf");return[t,e]})})}var U={setCSRF:function(e){e.paramName&&e.cookieName&&(g=Promise.resolve([e.paramName,e.cookieName]))},getCSRFName:function(){return S().then(function(e){return e[0]})},getCSRFValue:function(){return S().then(function(e){return e[1]})},getCSRFDetails:S,loadAppAgentConf:function(){return A=A||fetch("/waf/appAgentConf").catch(function(e){throw Error("Error while fetching App Agent Conf: "+e)})}};Object.freeze&&Object.freeze(U),"7.0.0"!==o.version||o.configuration||o.defineProperty(o,"configuration",U,!0,!1,!1,!0),o["7_0_0"].configuration||o.defineProperty(o["7_0_0"],"configuration",U,!0,!1,!1,!0);var _=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i={};function N(e){var t=new TextEncoder;return function(e){var t=e.reduce(function(e,t){return e+t.byteLength},0),r=new Uint8Array(t),n=0,o=!0,i=!1,t=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value;r.set(new Uint8Array(u),n),n+=u.byteLength}}catch(e){i=!0,t=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw t}}return r}(e.map(function(e){return"string"==typeof e?t.encode(e).buffer:e}))}i.createMultipartFormData=function(e){return new Promise(function(i,a){var c=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="----WafFormBoundary",r=0;r<=15;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}(),u=[],l=Array.from(e.entries());(function t(r){if(r>=l.length){u.push("--"+c+"--");var e={};return e.data=N(u),e.boundary=c,void i(e)}var e=_(l[r],2),n=e[0],o=e[1];o instanceof Blob?o.arrayBuffer().then(function(e){u.push("--"+c+"\r\n",'Content-Disposition: form-data; name="'+n+'"; filename="'+o.name+'"\r\n',"Content-Type: "+o.type+"\r\n","\r\n",e,"\r\n"),t(r+1)}).catch(a):(u.push("--"+c+"\r\n",'Content-Disposition: form-data; name="'+n+'"\r\n',"\r\n",o,"\r\n"),t(r+1))})(0)})},Object.freeze&&Object.freeze(i),"7.0.0"!==o.version||o.RequestUtils||o.defineProperty(o,"RequestUtils",i,!0,!1,!1,!0),o["7_0_0"].RequestUtils||o.defineProperty(o["7_0_0"],"RequestUtils",i,!0,!1,!1,!0);s={arrayIndexOf:d};Object.freeze&&Object.freeze(s),"7.0.0"!==o.version||o.util||o.defineProperty(o,"util",s,!0,!1,!1,!0),o["7_0_0"].util||o.defineProperty(o["7_0_0"],"util",s,!0,!1,!1,!0);h={};function w(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].charCodeAt(0));return t}for(var O=s.arrayIndexOf,b={HTML:w([",",".","-","_"," "]),HTMLATTR:w([",",".","-","_"]),CSS:w([]),JAVASCRIPT:w([",",".","_"])},F={},K=(K="34=&quot|38=&amp|60=&lt|62=&gt|160=&nbsp|161=&iexcl|162=&cent|163=&pound|164=&curren|165=&yen|166=&brvbar|167=&sect|168=&uml|169=&copy|170=&ordf|171=&laquo|172=&not|173=&shy|174=&reg|175=&macr|176=&deg|177=&plusmn|178=&sup2|179=&sup3|180=&acute|181=&micro|182=&para|183=&middot|184=&cedil|185=&sup1|186=&ordm|187=&raquo|188=&frac14|189=&frac12|190=&frac34|191=&iquest|192=&Agrave|193=&Aacute|194=&Acirc|195=&Atilde|196=&Auml|197=&Aring|198=&AElig|199=&Ccedil|200=&Egrave|201=&Eacute|202=&Ecirc|203=&Euml|204=&Igrave|205=&Iacute|206=&Icirc|207=&Iuml|208=&ETH|209=&Ntilde|210=&Ograve|211=&Oacute|212=&Ocirc|213=&Otilde|214=&Ouml|215=&times|216=&Oslash|217=&Ugrave|218=&Uacute|219=&Ucirc|220=&Uuml|221=&Yacute|222=&THORN|223=&szlig|224=&agrave|225=&aacute|226=&acirc|227=&atilde|228=&auml|229=&aring|230=&aelig|231=&ccedil|232=&egrave|233=&eacute|234=&ecirc|235=&euml|236=&igrave|237=&iacute|238=&icirc|239=&iuml|240=&eth|241=&ntilde|242=&ograve|243=&oacute|244=&ocirc|245=&otilde|246=&ouml|247=&divide|248=&oslash|249=&ugrave|250=&uacute|251=&ucirc|252=&uuml|253=&yacute|254=&thorn|255=&yuml|338=&OElig|339=&oelig|352=&Scaron|353=&scaron|376=&Yuml|402=&fnof|710=&circ|732=&tilde|913=&Alpha|914=&Beta|915=&Gamma|916=&Delta|917=&Epsilon|918=&Zeta|919=&Eta|920=&Theta|921=&Iota|922=&Kappa|923=&Lambda|924=&Mu|925=&Nu|926=&Xi|927=&Omicron|928=&Pi|929=&Rho|931=&Sigma|932=&Tau|933=&Upsilon|934=&Phi|935=&Chi|936=&Psi|937=&Omega|945=&alpha|946=&beta|947=&gamma|948=&delta|949=&epsilon|950=&zeta|951=&eta|952=&theta|953=&iota|954=&kappa|955=&lambda|956=&mu|957=&nu|958=&xi|959=&omicron|960=&pi|961=&rho|962=&sigmaf|963=&sigma|964=&tau|965=&upsilon|966=&phi|967=&chi|968=&psi|969=&omega|977=&thetasym|978=&upsih|982=&piv|8194=&ensp|8195=&emsp|8201=&thinsp|8204=&zwnj|8205=&zwj|8206=&lrm|8207=&rlm|8211=&ndash|8212=&mdash|8216=&lsquo|8217=&rsquo|8218=&sbquo|8220=&ldquo|8221=&rdquo|8222=&bdquo|8224=&dagger|8225=&Dagger|8226=&bull|8230=&hellip|8240=&permil|8242=&prime|8243=&Prime|8249=&lsaquo|8250=&rsaquo|8254=&oline|8260=&frasl|8364=&euro|8465=&image|8472=&weierp|8476=&real|8482=&trade|8501=&alefsym|8592=&larr|8593=&uarr|8594=&rarr|8595=&darr|8596=&harr|8629=&crarr|8656=&lArr|8657=&uArr|8658=&rArr|8659=&dArr|8660=&hArr|8704=&forall|8706=&part|8707=&exist|8709=&empty|8711=&nabla|8712=&isin|8713=&notin|8715=&ni|8719=&prod|8721=&sum|8722=&minus|8727=&lowast|8730=&radic|8733=&prop|8734=&infin|8736=&ang|8743=&and|8744=&or|8745=&cap|8746=&cup|8747=&int|8756=&there4|8764=&sim|8773=&cong|8776=&asymp|8800=&ne|8801=&equiv|8804=&le|8805=&ge|8834=&sub|8835=&sup|8836=&nsub|8838=&sube|8839=&supe|8853=&oplus|8855=&otimes|8869=&perp|8901=&sdot|8968=&lceil|8969=&rceil|8970=&lfloor|8971=&rfloor|10216=&lang|10217=&rang|9674=&loz|9824=&spades|9827=&clubs|9829=&hearts|9830=&diams").split("|"),B=0;B<K.length;B++){var W=K[B].split("=");F[W[0]]=W[1]}for(var j=[],Y=0;Y<255;Y++)j[Y]=48<=Y&&Y<=57||65<=Y&&Y<=90||97<=Y&&Y<=122?null:Y.toString(16);function q(e){return e<256?j[e]:e.toString(16)}function Q(e,t){if(-1!==O.call(e,t))return y(t);e=q(t);if(null===e)return y(t);if(t<=31&&9!=t&&10!=t&&13!=t||127<=t&&t<=159||32===t)return"&#x20;";t=F[t];return void 0!==t?t+";":"&#x"+e+";"}function X(e,t){if(-1!==O.call(e,t))return String.fromCharCode(t);if(null===q(t))return String.fromCharCode(t);e=t.toString(16);return t<256?"\\x"+"00".substr(e.length)+e.toUpperCase():"\\u"+"0000".substr(e.length)+e.toUpperCase()}function Z(e,t){if(-1!==O.call(e,t))return y(t);e=q(t);return null===e?y(t):"\\"+e+" "}function J(e,t,r,n){if(null==t||"string"!=typeof t)return t;for(var o,i="",a=0;a<t.length;a++)n?(i+=r(e,o=c.call(t,a),n),65535<o&&a++):i+=r(e,t.charCodeAt(a));return i}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}h.encodeForHTML=function(e){return J(b.HTML,e,Q,!0)},h.encodeForHTMLAttribute=function(e){return J(b.HTMLATTR,e,Q,!0)},h.encodeForJavaScript=function(e){return J(b.JAVASCRIPT,e,X,!1)},h.encodeForCSS=function(e){return J(b.CSS,e,Z,!0)},Object.freeze&&Object.freeze(h),"7.0.0"!==o.version||o.Encoder||o.defineProperty(o,"Encoder",h,!0,!1,!1,!0),o["7_0_0"].Encoder||o.defineProperty(o["7_0_0"],"Encoder",h,!0,!1,!1,!0);var ee={algorithm:"RSA-OAEP",key_hash:"SHA-256",key_size:2048,key_encoding:"Base64",transmission_algorithm:"AES-GCM",publicKeyFormat:"spki",privateKeyFormat:"pkcs8",transmission_key_length:256,transmission_iv_length:12,logLevel:3},te=(function(e,t,r){return t&&$(e.prototype,t),r&&$(e,r),e}(re,[{key:"setLogLevel",value:function(e){this.logger=new t(e)}},{key:"base64ToUint8Array",value:function(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}},{key:"uint8ArrayToBase64",value:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}},{key:"convertToBinary",value:function(e){if(e.constructor===ArrayBuffer)return e;if("string"==typeof e)return(new TextEncoder).encode(e).buffer;if(e.constructor===Uint8Array)return e.buffer;throw new Error("Data cannot be converted to Binary!")}},{key:"exportBinary",value:function(e){var t=this;if(e.constructor===Array)return e.map(function(e){return t.exportBinary(e)});if(e.constructor===ArrayBuffer)return this.uint8ArrayToBase64(new Uint8Array(e));if(e.constructor===Uint8Array)return this.uint8ArrayToBase64(e);throw new Error("Data is not in Binary format!")}},{key:"normalizeBinaryData",value:function(e){if(e.constructor===ArrayBuffer)return e;if("string"==typeof e)return this.base64ToUint8Array(e).buffer;if(e.constructor===Uint8Array)return e.buffer;throw new Error("Data cannot be normalized to Binary!")}},{key:"getAsymmetricEncryptionAlgorithmForGeneration",value:function(e,t){return{name:e||this.asymmetricEncryptionAlgorithm,hash:this.asymmetricEncryptionHash,modulusLength:t||this.asymmetricEncryptionKeySize,publicExponent:new Uint8Array([1,0,1])}}},{key:"getAsymmetricEncryptionAlgorithmForImport",value:function(){return{name:this.asymmetricEncryptionAlgorithm,hash:this.asymmetricEncryptionHash}}},{key:"getAsymmetricEncryptionAlgorithmForUsage",value:function(){return{name:this.asymmetricEncryptionAlgorithm}}},{key:"getSymmetricEncryptionAlgorithmForGeneration",value:function(){return{name:this.symmetricKeyEncryptionAlgorithm,length:this.symmetricKeyLength}}},{key:"getSymmetricEncryptionAlgorithmForImport",value:function(){return{name:this.symmetricKeyEncryptionAlgorithm}}},{key:"getSymmetricEncryptionAlgorithmForUsage",value:function(e){return{name:this.symmetricKeyEncryptionAlgorithm,iv:e}}},{key:"generateAsymmetricKeyPair",value:function(e,t){return crypto.subtle.generateKey(this.getAsymmetricEncryptionAlgorithmForGeneration(e,t),!0,[this.KEY_USAGES.ENCRYPT,this.KEY_USAGES.DECRYPT]).catch(function(e){throw new Error("Failed to generate symmetric key! Error: "+e)})}},{key:"importAsymmetricPublicKey",value:function(e){if(null===e||e.constructor===CryptoKey)return Promise.resolve(e);var e=this.normalizeBinaryData(e),t=this.getAsymmetricEncryptionAlgorithmForImport();return crypto.subtle.importKey(this.asymmetricPublicKeyFormat,e,t,!0,[this.KEY_USAGES.ENCRYPT]).catch(function(e){throw new Error("Failed to import Asymmetric Public Key! Algorithm: "+JSON.stringify(t)+" Error: "+e)})}},{key:"importAsymmetricPrivateKey",value:function(e){if(null===e||e.constructor===CryptoKey)return Promise.resolve(e);var e=this.normalizeBinaryData(e),t=this.getAsymmetricEncryptionAlgorithmForImport();return crypto.subtle.importKey(this.asymmetricPrivateKeyFormat,e,t,!0,[this.KEY_USAGES.DECRYPT]).catch(function(e){throw new Error("Failed to import asymmetric private key! Algorithm: "+JSON.stringify(t)+" Error: "+e)})}},{key:"exportAsymmetricPublicKey",value:function(e){return null===e?Promise.resolve(e):crypto.subtle.exportKey(this.asymmetricPublicKeyFormat,e).catch(function(e){throw new Error("Failed to export asymmetric public key! Error: "+e)})}},{key:"exportAsymmetricPrivateKey",value:function(e){return null===e?Promise.resolve(e):crypto.subtle.exportKey(this.asymmetricPrivateKeyFormat,e).catch(function(e){throw new Error("Failed to export asymmetric private key! Error: "+e)})}},{key:"generateIV",value:function(){return crypto.getRandomValues(new Uint8Array(this.symmetricKeyIVLength))}},{key:"extractIVBytes",value:function(e){return e.slice(e.length-this.symmetricKeyIVLength)}},{key:"extractSymmetricKeyBytes",value:function(e){return e.slice(0,e.length-this.symmetricKeyIVLength)}},{key:"generateSymmetricKey",value:function(){return crypto.subtle.generateKey(this.getSymmetricEncryptionAlgorithmForGeneration(),!0,[this.KEY_USAGES.ENCRYPT,this.KEY_USAGES.DECRYPT]).catch(function(e){throw new Error("Failed to generate symmetric key! Error: "+e)})}},{key:"getSymmetricKey",value:function(e){var t,r,n=this,o=void 0,i=void 0;if(!e||e.constructor!==Object&&e.constructor!==String&&e.constructor!==Uint8Array&&e.constructor!==ArrayBuffer?(o=this.generateSymmetricKey(),i=this.generateIV(),o.then(function(e){n.logger.debug("Symmetric key generated: ",e)})):e.constructor===Object&&e.key&&e.key.constructor===CryptoKey&&e.iv&&e.iv.constructor===Uint8Array?(o=Promise.resolve(e.key),i=e.iv):(t=new Uint8Array(this.normalizeBinaryData(e)),r=this.extractSymmetricKeyBytes(t),i=this.extractIVBytes(t),this.logger.debug("IV Bytes extracted: ",i),(o=this.importSymmetricKey(r)).then(function(e){n.logger.debug("Symmetric key imported: ",e)})),o)return o.then(function(e){return{key:e,iv:i}});this.logger.error("Failed to get symmetric key!",e)}},{key:"importSymmetricKey",value:function(t){var r=this;return crypto.subtle.importKey("raw",t.buffer,this.getSymmetricEncryptionAlgorithmForImport(),!0,[this.KEY_USAGES.ENCRYPT,this.KEY_USAGES.DECRYPT]).catch(function(e){throw r.logger.debug("Encrypted symmetric key bytes: ",t),new Error("Failed to import symmetric key! Error: "+e)})}},{key:"exportSymmetricKey",value:function(e){return crypto.subtle.exportKey("raw",e).catch(function(e){throw new Error("Failed to export symmetric key! Error: "+e)})}},{key:"encryptWithPublicKey",value:function(r,e){var n=this;return this.importAsymmetricPublicKey(e).then(function(e){n.logger.debug("Asymmetric key imported: ",e);var t=n.getAsymmetricEncryptionAlgorithmForUsage();return n._encrypt(r,e,t).catch(function(e){throw new Error("Failed to encrypt the symmetric key with asymmetric public key! Error: "+e)})})}},{key:"decryptWithPrivateKey",value:function(r,e){var n=this;return this.importAsymmetricPrivateKey(e).then(function(e){n.logger.debug("Asymmetric key imported: ",e);var t=n.getAsymmetricEncryptionAlgorithmForUsage();return n._decrypt(r,e,t).catch(function(e){throw n.logger.warn("Failed to decrypt the symmetric key with asymmetric private key! Encrypted symmetric key bytes: ",r),new Error("Failed to decrypt the symmetric key with asymmetric private key! Error: "+e)})})}},{key:"mergeSymmetricKeyAndIV",value:function(e,t){e.constructor===ArrayBuffer&&(e=new Uint8Array(e));var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}},{key:"importSymmetricKeyAndIV",value:function(e){var t=this,r=new Uint8Array(e),e=this.extractSymmetricKeyBytes(r),n=this.extractIVBytes(r);return this.logger.debug("IV Bytes extracted: ",n),this.importSymmetricKey(e).then(function(e){return t.logger.debug("AES Key imported: ",e),{key:e,iv:n}})}},{key:"exportSymmetricKeyAndIV",value:function(e,t){var r=this;return this.exportSymmetricKey(e).then(function(e){e=r.mergeSymmetricKeyAndIV(e,t);return r.logger.debug("Symmetric key exported: ",e),e})}},{key:"encryptSymmetricKeyAndIV",value:function(e,t){var r=this;return this.encryptWithPublicKey(e,t).then(function(e){return r.logger.debug("Symmetric key encrypted: ",e),e})}},{key:"decryptSymmetricKeyAndIV",value:function(e,t){var r=this;return this.decryptWithPrivateKey(e,t).then(function(e){return r.logger.debug("AES Key Data decrypted: "),e})}},{key:"_encrypt",value:function(e,t,r){e=this.convertToBinary(e);return crypto.subtle.encrypt(r,t,e)}},{key:"_decrypt",value:function(e,t,r){e=this.normalizeBinaryData(e);return crypto.subtle.decrypt(r,t,e)}},{key:"encrypt",value:function(o,e){var i=this;return this.logger.debug("Encryption started: "),this.getSymmetricKey(e).then(function(e){var r=e.key,e=e.iv,n=i.getSymmetricEncryptionAlgorithmForUsage(e);return i.logger.debug("Symmetric Encryption Algorithm: ",n),i.exportSymmetricKeyAndIV(r,e).then(function(t){var e=(Array.isArray(o)?o:[o]).map(function(e,t){return i.logger.debug("Started encrypting data in "+t+": ",e),i._encrypt(e,r,n).then(function(e){return i.logger.debug("Finished encrypting data in "+t+": ",e),e}).catch(function(e){throw new Error("Failed to encrypt the data using Symmetric Encryption: "+e)})});return Promise.all(e).then(function(e){return i.logger.debug("Encryption finished: "),{key:t,data:1===e.length?e[0]:e}})})})}},{key:"decrypt",value:function(t,e){var o=this;return this.logger.debug("Decryption started: "),this.importSymmetricKeyAndIV(e).then(function(e){var r=e.key,e=e.iv,n=o.getSymmetricEncryptionAlgorithmForUsage(e),e=(t=!Array.isArray(t)?[t]:t).map(function(e,t){return o.logger.debug("Started decrypting data in "+t+": ",e),o._decrypt(e,r,n).then(function(e){return o.logger.debug("Completed decrypting data in "+t+": ",e),e}).catch(function(e){throw new Error("Decryption error! Error: "+e)})});return Promise.all(e).then(function(e){return o.logger.debug("Decryption finished: "),1===e.length?e[0]:e})})}}]),re);function re(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,re),e=x(e||{},ee),this.KEY_USAGES={ENCRYPT:"encrypt",DECRYPT:"decrypt"},this.asymmetricEncryptionAlgorithm=e.algorithm,this.asymmetricEncryptionHash=e.key_hash,this.asymmetricEncryptionKeySize=e.key_size,this.asymmetricPublicKeyFormat=e.publicKeyFormat,this.asymmetricPrivateKeyFormat=e.privateKeyFormat,this.symmetricKeyEncryptionAlgorithm=e.transmission_algorithm,this.symmetricKeyLength=e.transmission_key_length,this.symmetricKeyIVLength=e.transmission_iv_length,this.logger=new t(e.logLevel)}var ne={privateKey:"MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCIDx6RJqiLUYUOLGBMW2VpmrPnGfnBfH7WWenVyKul0Y3se6LpXJdSf5YwrB7355tM/g3NCzvE2VqJfOAYbi69T3diOfWKtv0M0Xqx0djSr1xpSsO7sYxFAa86Teq/bSwrGBjLrUrTDHoNK3HMYt9u/IMLKGGeZC74KlxWG2kexQS7ADPaUvtt+sbm+4J00hbUZ+6LcCyb+w183zXMPVG5hFC03hyfzVeIDn+wIYP0SCuTIAZordcj+R1E4Nsbf8BgWEUKTJlxvDSSl5tfICV/Z09pZdoBbvru2Lch5lMAiQknskgO7GC0K2EkjEreYGr7k9/jU0i+reDj+aCaKMAhAgMBAAECggEAdZDC8994obGWDDIyH6iVz5OawiWC1zqxCpz03gKgtw6E2QPYOFcGdoXCjFoeBE4/tl6MJFIBmk3J2qVpqhKDFpe0685zKiKGM+5KW56dASf/7QdqbCO1tecHt5SeNDysfqw6uLwLvKO6TujsUxRYRrmwrhJ9j3S31T4dPVZAFhIas9yNCFtVVSoejrsZBTCoccHuOCRzlvYGawBHtRPLQjXfWNjdfcbK6aU7RH3ORagJG3wiJ+GUnlPwwCCxJJaX5E6lYoP/JQfm0S8NOsN57Sm0RpQ7XruU1jSsYPBaoxzu5y5jaOPiSvgndMWBT6Y51Q9TJgH2ef5VzNvhxq94AQKBgQDGCRazu4LhRrm0bY+Ci6T0aqoV18c7lB3K1eKYFUI+dYAJHSoyqKAKG0rV/PxqVzK+rKRLl9+HSIV+G1e2TL9h5oraQAp5p46eXFj+0Lk2y4Z1nVODBmniWMk87/agp7izVLps17mrEaXpA5SyIKo5Sp2mXD3RljcJ+0uUcwjJQQKBgQCv4hnirz7+wq064pU03nWUW9WZHS2OWiDbH+3cqvHMH8mhduQUdz7pasGpH1U0k8PmqWdZBlvWdcZvaQkKdJoPEixOmTrn/ulI8KQEVnOIa4W+fJLctMPBqNZBvQdozq/uX3t3yFmx3YOLyhgPH2ezKVP2yawsOnwAxO6XKQpe4QKBgH6kFUZ+5SWXCu7dGWcMUkKTa41oXdo10A+EU9GZ1rEGhwhNBE09FIsiBOtvSyPd+2+AC9jjmGh08hlA9wh3b/P1cFo9lfVSN5wBxk+9vpPR93yDTYJ+uXur95Tmh7sZRr43srgkBHHnaUfnqFF5HiJhGwvl9Qpwm2Xgs+aM4dOBAoGBAJfHKwVmq5sXjnwRSiccjiTf9vyxpD2C43WVISPbVNwM1mgC/CH5IY42dTan9lRv648iwy+dACWa7wn3fzjJlKTKzvdo3d+UJ+as2y1vGTYxa3INeIMDbyawt2x1Xm6AZmvzc83TVCvcd4drd8WdGVUPpgiC0pQ8SAQ17Zr+bJehAoGADTgia4vtIj14cSkoR0qjK28zkrm4CPmyaB3ds2f3k7C4rrT/Z5j0SmSuv2rj1GfLCg4NrtzNhDkIsW0nIZithu7cClZFM37ZHIevpgCK3h8AV9v1M9mwVxHx8oue2fHTbuW+xZbX6mYF9/QaXqmAbKd1jDriyrgOh0Xn6k/Xet8=",publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAiA8ekSaoi1GFDixgTFtlaZqz5xn5wXx+1lnp1cirpdGN7Hui6VyXUn+WMKwe9+ebTP4NzQs7xNlaiXzgGG4uvU93Yjn1irb9DNF6sdHY0q9caUrDu7GMRQGvOk3qv20sKxgYy61K0wx6DStxzGLfbvyDCyhhnmQu+CpcVhtpHsUEuwAz2lL7bfrG5vuCdNIW1Gfui3Asm/sNfN81zD1RuYRQtN4cn81XiA5/sCGD9EgrkyAGaK3XI/kdRODbG3/AYFhFCkyZcbw0kpebXyAlf2dPaWXaAW767ti3IeZTAIkJJ7JIDuxgtCthJIxK3mBq+5Pf41NIvq3g4/mgmijAIQIDAQAB",algorithm:"RSA_2048"},oe={privateKey:"MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDVDVF6vdb0wKcdJY9G0Oe4X4slqAcZID4Zr1t6GHqTMDU/GTEjWsHgYC5c5vxg+WWP3I0tbLmu7e9Jkz+FIeVFKQz08DoxmPW9/SIvMOlKZzukmGo6r2mR/3OIyT9VICnvIEh2k9GlkiYdOIgOrNpwu+ZSCq6CzTc5YC3p+rpJAi8Fet7Ynan7uI/ysB99HsZnH450rCTMKB1AqBmIDtOgqZs0GqbRyau7BZkZV65jYecZQ0oOi3utkm+1L7U7EixEcZf+AB75TqwMdTIA4uwg3gktoOs8ZDsFgWQfkd10CK8nSs3w6onNqrfcKpiRTKF8qhBdONtPsElqR410572TAgMBAAECggEBAKyV0lhMqnGwEm/Q+kSSe/NmKlEB0WYwMT4bSE4awEi1d5y6qoyKO52oLEaDsxRXU0d7kT2n4q7q/bkrN/x/3brtqxpL88gzsXYLNYLm60SjZbRK51rMuAdV2OCIre4mVPHpw+mSivTF9GwdXFIPAhDqlYQGNSGuXbrzx53PxtHWIaP+nFU/LBMONatyq/h0iNj5HLByLLURgWkPWIiz4W5t4K12OndWAjGenR19DdbnVk5eHWwau1bSZCm750tV+qMemVUVCcSgiiQdzG51rUfvJfTFnyXq0W2qlEKmLFmWfKwrsbk+cE6ZMfE44FxYojywSoKZJ+p2cKRoP1ZGk2ECgYEA6g9hwuMeAW0WnfdnO7NrVSuPsRywRMscArJBA6wJgtnk4OCD1bh+y3obQXafOw5nEUytmOT8LJvCxfqfdL6TsNMglykU4c7ePsbmTo4558iykceI0zD/Dmsr6GncJlG/W9pJE/rXHLKcyVwGlkA141nt6thSRjz0SlK4XC0dEoMCgYEA6QXRH5rsQpBi77FXVHcP9R6GBjy19q5kCro44c8/90qZHwPVCpl50QW63/wNwuk/pnPVBYYV2Q+JVTdYK7xWVWaTlGYdd3ACxM8M/QNsd5vWDGRk2jQTFM7u6bNaxBKgBASDtNXtHK2HIKJCASTXYyQqILs5IlBnAa/iiewje7ECgYBYiCrtQWT3GyEj7RGiNlJR6+E1F+ngi4bzyiLnVapfUTXOjX2wWFG1e2FV2J2QA/meRIehPnPYF66Lnim0SeWpS6KXKpXYd5v+2NMCQa/LaVGJ7JRnda/z7zuzdF8uK1ubTay4nvfAxhqh22ouaOk5LqncW6h7ItEwT6umSfYmKwKBgQCI7QAbYD+gRZO9YSn92hCoao06sQYDtCnZG+A84DmoKE+dp/TRy6mHJ6TN5SB4/fKG7t2n50iDSdvbFTBcUskwWZwywWZjPpCB8WCidBaSmiHHGl8g0SS9P3OoI9ocCQ26DqUN5/7ysQ0MIgxC+9EM0r1mil1iSnicxyuI/BdFoQKBgQDQlKmcSjgft/2EhwN16Ck8+RWQluEG+nmoI/WB+LU56+TQzc3GGXQHjwDnrfX9vGgdBcI62Dk+S+d7HS8YY8XOAPugJ4/G1gABLjniG1N0GyeJmjjP2M+sLmljtxyLVwdz/PXVdT+7mnuwTt3TLEJUcI+EVL4D8oq6L7vwbcYzdQ==",publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1Q1Rer3W9MCnHSWPRtDnuF+LJagHGSA+Ga9behh6kzA1PxkxI1rB4GAuXOb8YPllj9yNLWy5ru3vSZM/hSHlRSkM9PA6MZj1vf0iLzDpSmc7pJhqOq9pkf9ziMk/VSAp7yBIdpPRpZImHTiIDqzacLvmUgqugs03OWAt6fq6SQIvBXre2J2p+7iP8rAffR7GZx+OdKwkzCgdQKgZiA7ToKmbNBqm0cmruwWZGVeuY2HnGUNKDot7rZJvtS+1OxIsRHGX/gAe+U6sDHUyAOLsIN4JLaDrPGQ7BYFkH5HddAivJ0rN8OqJzaq33CqYkUyhfKoQXTjbT7BJakeNdOe9kwIDAQAB",algorithm:"RSA_2048"},ie={ORG:"org",COMMON:"common"},ae={WAF_ENCRYPTION_HANDSHAKE_URL:"/zwaf/encryption/handshake",WAF_ENCRYPTION_KEY_HEADER:"Waf-Encryption-Key",WAF_ENCRYPTION_ID_HEADER:"Waf-Encryption-Id",WAF_CONTENT_ENCODING_HEADER:"Waf-Content-Encoding"};var ce={clientIDCookie:"_zwaf_enc_clientid",serverIDCookie:"_zwaf_enc_serverid",serverPublicKey:"server-public-key",clientKeyExpiry:"client-id-expiry",clientPublicKey:"client-public-key",clientPrivateKey:"client-private-key",wafEncryptionId:"waf-encryption-id",algorithm:"RSA-OAEP",keySize:2048,scope:ie.COMMON,handshakeURL:ae.WAF_ENCRYPTION_HANDSHAKE_URL,tag:window&&window.location&&window.location.hostname||"null"},i=function t(r){var c=new te,n=null,o=!1,a=null,u=null,l=null,s=null,f=null,i=!1;function d(t,e,n){return c.encrypt(t,e).then(function(e){var t=e.key,r=e.data;return c.encryptSymmetricKeyAndIV(t,n).then(function(e){return{key:(e=c.exportBinary([e,r]))[0],data:e[1]}})}).then(function(e){return c.logger.debug("Encryption complete: ",t),e}).catch(function(e){throw Error("Error while encrypting data: "+e)})}function m(t,e,r){return c.decryptSymmetricKeyAndIV(e,r).then(function(e){return c.decrypt(t,e)}).catch(function(e){throw Error("Error while decrypting data: "+e)})}function p(a){return new Promise(function(n,t){c.logger.debug("Decompressing data");var e=new Blob([a]),r=new(DecompressionStream||R.DecompressionStream)("gzip"),o=new Response(e).body.pipeThrough(r).getReader(),i=[];return function r(){try{return o.read().then(function(e){var t=e.done,e=e.value;if(!t)return c.logger.debug("Partial decompressed content:",e),i.push(e),r();c.logger.debug("Decompression complete"),n(i)})}catch(e){t("Error while decompressing data: "+e)}}()}).then(function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].length;for(var n=new Uint8Array(t),o=0,i=0;i<e.length;i++)n.set(e[i],o),o+=e[i].length;return n.buffer})}function y(e,t){var r=Promise.resolve(e);if(t&&!0===t.decompress&&(r=p(e)),t&&!0===t.returnBinary)return r;try{return r.then(function(e){return Array.isArray(e)?e.map(function(e){return(new TextDecoder).decode(e)}):(new TextDecoder).decode(e)})}catch(e){throw c.logger.error(e),c.logger.debug(value),new Error("Failed to decode the decrypted content as string!")}}function h(e){return"_zwaf__"+a.tag+"__"+e}function e(){var e,t,r=void 0,n=!1;return a.scope===ie.COMMON?r=u?Promise.resolve(u):g(ne):T()&&!i&&(e=D(h(a.serverIDCookie)),t=I(a.serverIDCookie),k(h(a.clientKeyExpiry))&&T()&&k(h(a.clientPrivateKey))&&k(h(a.serverPublicKey))&&k(h(a.clientIDCookie))&&C(a.clientIDCookie)&&e&&t&&e===t)?r=u?Promise.resolve(u):g(E(D(h(a.clientPublicKey)),D(h(a.clientPrivateKey)))):(r=c.generateAsymmetricKeyPair(a.algorithm,a.keySize),n=!0),r.then(function(e){return u=e,c.logger.info("Client Key Pair stored in memory !"),n})}function A(e){var t=!1;return(a.scope===ie.COMMON?l?Promise.resolve(l):g(oe):e?(t=!0,c.exportAsymmetricPublicKey(u.publicKey).then(function(e){return f=s=null,n=e,o=a.handshakeURL,U.getCSRFDetails().then(function(e){var t=e[0],r=I(e[1]);return(e=new FormData).append("scope",a.scope),e.append("size",a.keySize),e.append("algorithm",a.algorithm),e.append("data",JSON.stringify({"client-public-key":c.exportBinary(n)})),e.append(t,r),fetch(o,{method:"POST",headers:a.handshakeHeaders||{},body:e}).then(function(e){return e.json()}).then(function(e){if(!e[a.serverPublicKey])throw new Error("Failed to fetch Server Public Key!");return e})}).then(function(e){return s=e[a.clientKeyExpiry]||-1,f=e[a.wafEncryptionId]||null,g(E(e[a.serverPublicKey],null))});var n,o})):l?Promise.resolve(l):g(E(D(h(a.serverPublicKey)),null))).then(function(e){return l=e,c.logger.info("Server Key Pair stored in memory !"),t})}function g(e){return c.importAsymmetricPublicKey(e.publicKey).then(function(t){return c.importAsymmetricPrivateKey(e.privateKey).then(function(e){return E(t,e)})})}function E(e,t){return{publicKey:e,privateKey:t}}function v(){return e().then(function(t){return A(t).then(function(e){return e||t?function(){var e=[];try{var t=I(a.serverIDCookie);P(h(a.serverIDCookie),t)}catch(e){c.logger.error("Failed to store Server ID in localStorage!")}try{var r=c.exportAsymmetricPublicKey(l.publicKey).then(function(e){return P(h(a.serverPublicKey),c.exportBinary(e)),!0});e.push(r)}catch(e){c.logger.error("Failed to store Server Public Key in localStorage!")}try{var n=I(a.clientIDCookie);P(h(a.clientIDCookie),n)}catch(e){c.logger.error("Failed to store Client ID in localStorage!")}n=s+Math.floor(Date.now()/1e3);try{P(h(a.clientKeyExpiry),n)}catch(e){c.logger.error("Failed to store Client Expiry time in localStorage!")}try{f&&P(h(a.wafEncryptionId),f)}catch(e){c.logger.error("Failed to store Waf Encryption ID in localStorage!")}try{var o=c.exportAsymmetricPublicKey(u.publicKey).then(function(e){return P(h(a.clientPublicKey),c.exportBinary(e)),!0});e.push(o)}catch(e){c.logger.error("Failed to store Client Public Key in localStorage!")}try{var i=c.exportAsymmetricPrivateKey(u.privateKey).then(function(e){return P(h(a.clientPrivateKey),c.exportBinary(e)),!0});e.push(i)}catch(e){c.logger.error("Failed to store Client Private Key in localStorage!")}return Promise.all(e).then(function(e){return c.logger.info("Key details stored in localStorage!"),!0})}().then(function(e){return e}):(c.logger.debug("Handshake not needed, ignoring this init call!"),!0)})})}function T(){var e=D(h(a.clientKeyExpiry));if(e=Number(e))return e*=1e3,Date.now()<e}function S(){var e=[a.serverIDCookie,a.serverPublicKey,a.clientIDCookie,a.clientKeyExpiry,a.clientPublicKey,a.clientPrivateKey],t=[a.serverIDCookie,a.clientIDCookie];return e.forEach(function(t){var e,r=h(t);try{k(r)&&(e=r,window&&window.localStorage&&null!=e&&window.localStorage.removeItem(e))}catch(e){c.logger.error("Failed to delete "+t+" from localStorage!")}}),t.forEach(function(t){try{C(storageKeyName)&&L(storageKeyName)}catch(e){c.logger.error("Failed to delete "+t+" from localStorage!")}}),!0}function _(e){if(!o)throw new Error("ZWAF Encryption Agent not initialized yet!");return e=(e?u:l).publicKey,Promise.resolve(e)}function N(e){if(!o)throw new Error("ZWAF Encryption Agent not initialized yet!");return e=(a.scope===ie.COMMON&&e?l:u).privateKey,Promise.resolve(e)}function w(){if(!o&&!n)throw new Error("ZWAF Encryption Agent not initialized yet!");return n?(c.logger.debug("Handshake in progress so returning the same promise!"),n):n=v().then(function(e){return n=null,o=e})}function O(){return c.getSymmetricKey()}function b(e){return t(e=x(e||{},ce))}return b.SCOPES=ie,b.constants=ae,b.encrypt=function(t,r){return w().then(function(e){return _().then(function(e){return d(t,r,e)})})},b.decrypt=function(t,r,n){return N().then(function(e){return m(t,r,e).then(function(e){return y(e,n)})})},b.encryptAsServer=function(t,r){return w().then(function(e){return _(!0).then(function(e){return d(t,r,e)})})},b.decryptAsServer=function(t,r,n){return N(!0).then(function(e){return m(t,r,e).then(function(e){return y(e,n)})})},b.init=function(e){return a=x(e||{},r),o&&c.logger.warn("Already initialized! Is this call really necessary?"),n?(c.logger.debug("Init in progress so returning the same promise!"),n):n=v().then(function(e){return n=null,o=e})},b.reInit=function(e){return i=!0,a=x(e||{},r),c.logger.warn("Using forced handshake!"),S(),n=v().then(function(e){return n=null,i=!1,o=e})},b.deleteHandshakeDetails=S,b.getKey=function(){return O().then(function(t){return w().then(function(e){return c.exportSymmetricKeyAndIV(t.key,t.iv).then(function(t){return _().then(function(e){return c.encryptSymmetricKeyAndIV(t,e).then(function(e){return c.exportBinary(e)})})})})})},b.getReusableKey=O,b.setLogLevel=function(e){c.setLogLevel(e)},b.getEncryptAgent=function(){return c},b.getWafEncryptionId=function(){if(!o&&!n)throw new Error("ZWAF Encryption Agent not initialized yet!");return n?(c.logger.debug("Handshake in progress. Please call after Handshake is complete!"),null):D(h(a.wafEncryptionId))},b.getPublicKey=_,b.getPrivateKey=N,b}(ce);Object.freeze&&Object.freeze(i),"7.0.0"!==o.version||o.Encryption||o.defineProperty(o,"Encryption",i,!0,!1,!1,!0),o["7_0_0"].Encryption||o.defineProperty(o["7_0_0"],"Encryption",i,!0,!1,!1,!0);var ue,le=Object.hasOwnProperty,se=Object.setPrototypeOf,fe=Object.isFrozen,de=Object.getPrototypeOf,me=Object.getOwnPropertyDescriptor,We=Object.freeze,d=Object.seal,pe=Object.create,s="undefined"!=typeof Reflect&&Reflect,ye=(ye=s.apply)||function(e,t,r){return e.apply(t,r)},We=We||function(e){return e},d=d||function(e){return e},he=(he=s.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))},je=Ae(Array.prototype.forEach),Ye=Ae(Array.prototype.pop),qe=Ae(Array.prototype.push),Qe=Ae(String.prototype.toLowerCase),Xe=Ae(String.prototype.toString),Ze=Ae(String.prototype.match),Je=Ae(String.prototype.replace),$e=Ae(String.prototype.indexOf),et=Ae(String.prototype.trim),tt=Ae(RegExp.prototype.test),rt=(ue=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return he(ue,t)});function nt(e){return"number"==typeof e&&isNaN(e)}function Ae(o){return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ye(o,e,r)}}function ot(e,t,r){r=r||Qe,se&&se(e,null);for(var n=t.length;n--;){var o,i=t[n];"string"!=typeof i||(o=r(i))!==i&&(fe(t)||(t[n]=o),i=o),e[i]=!0}return e}function it(e){var t=pe(null),r=void 0;for(r in e)!0===ye(le,e,[r])&&(t[r]=e[r]);return t}function at(e,t){for(;null!==e;){var r=me(e,t);if(r){if(r.get)return Ae(r.get);if("function"==typeof r.value)return Ae(r.value)}e=de(e)}return function(e){return null}}var ct=We(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ut=We(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lt=We(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),st=We(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ft=We(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),dt=We(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mt=We(["#text"]),pt=We(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),yt=We(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ht=We(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),At=We(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gt=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Et=d(/<%[\w\W]*|[\w\W]*%>/gm),vt=d(/\${[\w\W]*}/gm),Tt=d(/^data-[\-\w.\u00B7-\uFFFF]/),St=d(/^aria-[\-\w]+$/),_t=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Nt=d(/^(?:\w+script|data):/i),wt=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ot=d(/^html$/i),bt=d(/^[a-z][.\w]*(-[.\w]+)+$/i),Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Lt(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var It=function(){return"undefined"==typeof window?null:window},Ct=function(e,t){if("object"!==(void 0===e?"undefined":Rt(e))||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix",r="dompurify"+((r=t.currentScript&&t.currentScript.hasAttribute(n)?t.currentScript.getAttribute(n):r)?"#"+r:"");try{return e.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return null}};var h=function t(e){function s(e){return t(e)}var u=0<arguments.length&&void 0!==e?e:It();if(s.version="2.5.4",s.removed=[],!u||!u.document||9!==u.document.nodeType)return s.isSupported=!1,s;var l=u.document,o=u.document,f=u.DocumentFragment,r=u.HTMLTemplateElement,d=u.Node,c=u.Element,n=u.NodeFilter,e=u.NamedNodeMap,i=void 0===e?u.NamedNodeMap||u.MozNamedAttrMap:e,a=u.HTMLFormElement,m=u.DOMParser,p=u.trustedTypes,e=c.prototype,y=at(e,"cloneNode"),h=at(e,"nextSibling"),A=at(e,"childNodes"),g=at(e,"parentNode");"function"!=typeof r||(T=o.createElement("template")).content&&T.content.ownerDocument&&(o=T.content.ownerDocument);var E=Ct(p,l),v=E?E.createHTML(""):"",T=o,S=T.implementation,_=T.createNodeIterator,N=T.createDocumentFragment,w=T.getElementsByTagName,O=l.importNode,T={};try{T=it(o).documentMode?o.documentMode:{}}catch(e){}var b={};s.isSupported="function"==typeof g&&S&&void 0!==S.createHTMLDocument&&9!==T;function R(e){return e instanceof RegExp||e instanceof Function}function L(e){Oe&&Oe===e||(e=it(e=e&&"object"===(void 0===e?"undefined":Rt(e))?e:{}),_e=-1===Ne.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,we="application/xhtml+xml"===_e?Xe:Qe,G="ALLOWED_TAGS"in e?ot({},e.ALLOWED_TAGS,we):M,z="ALLOWED_ATTR"in e?ot({},e.ALLOWED_ATTR,we):V,Te="ALLOWED_NAMESPACES"in e?ot({},e.ALLOWED_NAMESPACES,Xe):Se,pe="ADD_URI_SAFE_ATTR"in e?ot(it(ye),e.ADD_URI_SAFE_ATTR,we):ye,de="ADD_DATA_URI_TAGS"in e?ot(it(me),e.ADD_DATA_URI_TAGS,we):me,se="FORBID_CONTENTS"in e?ot({},e.FORBID_CONTENTS,we):fe,j="FORBID_TAGS"in e?ot({},e.FORBID_TAGS,we):{},Y="FORBID_ATTR"in e?ot({},e.FORBID_ATTR,we):{},I="USE_PROFILES"in e&&e.USE_PROFILES,q=!1!==e.ALLOW_ARIA_ATTR,Q=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,J=e.SAFE_FOR_TEMPLATES||!1,$=!1!==e.SAFE_FOR_XML,ee=e.WHOLE_DOCUMENT||!1,ne=e.RETURN_DOM||!1,oe=e.RETURN_DOM_FRAGMENT||!1,ie=e.RETURN_TRUSTED_TYPE||!1,H=!1!==e.DONT_TRIM,re=e.FORCE_BODY||!1,ae=!1!==e.SANITIZE_DOM,ce=e.SANITIZE_NAMED_PROPS||!1,ue=!1!==e.KEEP_CONTENT,le=e.IN_PLACE||!1,B=e.ALLOWED_URI_REGEXP||B,Ee=e.NAMESPACE||ge,W=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&R(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&R(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Q=!1),oe&&(ne=!0),I&&(G=ot({},[].concat(Lt(mt))),z=[],!0===I.html&&(ot(G,ct),ot(z,pt)),!0===I.svg&&(ot(G,ut),ot(z,yt),ot(z,At)),!0===I.svgFilters&&(ot(G,lt),ot(z,yt),ot(z,At)),!0===I.mathMl&&(ot(G,ft),ot(z,ht),ot(z,At))),e.ADD_TAGS&&ot(G=G===M?it(G):G,e.ADD_TAGS,we),e.ADD_ATTR&&ot(z=z===V?it(z):z,e.ADD_ATTR,we),e.ADD_URI_SAFE_ATTR&&ot(pe,e.ADD_URI_SAFE_ATTR,we),e.FORBID_CONTENTS&&ot(se=se===fe?it(se):se,e.FORBID_CONTENTS,we),ue&&(G["#text"]=!0),ee&&ot(G,["html","head","body"]),G.table&&(ot(G,["tbody"]),delete j.tbody),We&&We(e),Oe=e)}var I,C=gt,D=Et,P=vt,k=Tt,x=St,U=Nt,F=wt,K=bt,B=_t,G=null,M=ot({},[].concat(Lt(ct),Lt(ut),Lt(lt),Lt(ft),Lt(mt))),H=!0,z=null,V=ot({},[].concat(Lt(pt),Lt(yt),Lt(ht),Lt(At))),W=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,Y=null,q=!0,Q=!0,X=!1,Z=!0,J=!1,$=!0,ee=!1,te=!1,re=!1,ne=!1,oe=!1,ie=!1,ae=!0,ce=!1,ue=!0,le=!1,se=null,fe=ot({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),de=null,me=ot({},["audio","video","img","source","image","track"]),pe=null,ye=ot({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),he="http://www.w3.org/1998/Math/MathML",Ae="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml",Ee=ge,ve=!1,Te=null,Se=ot({},[he,Ae,ge],Xe),_e=void 0,Ne=["application/xhtml+xml","text/html"],we=void 0,Oe=null,be=o.createElement("form"),Re=ot({},["mi","mo","mn","ms","mtext"]),Le=ot({},["foreignobject","annotation-xml"]),Ie=ot({},["title","style","font","a","script"]),Ce=ot({},ut);ot(Ce,lt),ot(Ce,st);var De=ot({},ft);ot(De,dt);function Pe(t){qe(s.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=v}catch(e){t.remove()}}}function ke(e,t){try{qe(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){qe(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!z[e])if(ne||oe)try{Pe(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}function xe(e){var t=void 0,r=void 0;re?e="<remove></remove>"+e:r=(n=Ze(e,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===_e&&Ee===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var n=E?E.createHTML(e):e;if(Ee===ge)try{t=(new m).parseFromString(n,_e)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(Ee,"template",null);try{t.documentElement.innerHTML=ve?v:n}catch(e){}}return n=t.body||t.documentElement,e&&r&&n.insertBefore(o.createTextNode(r),n.childNodes[0]||null),Ee===ge?w.call(t,ee?"html":"body")[0]:ee?t.documentElement:n}function Ue(e){return _.call(e.ownerDocument||e,e,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT|n.SHOW_PROCESSING_INSTRUCTION|n.SHOW_CDATA_SECTION,null,!1)}function Fe(e){return e instanceof a&&(void 0!==e.__depth&&"number"!=typeof e.__depth||void 0!==e.__removalCount&&"number"!=typeof e.__removalCount||"string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof i)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)}function Ke(e){return"object"===(void 0===d?"undefined":Rt(d))?e instanceof d:e&&"object"===(void 0===e?"undefined":Rt(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function Be(e,t,r){b[e]&&je(b[e],function(e){e.call(s,t,r,Oe)})}function Ge(e){var t;if(Be("beforeSanitizeElements",e,null),Fe(e))return Pe(e),1;if(tt(/[\u0080-\uFFFF]/,e.nodeName))return Pe(e),1;var r=we(e.nodeName);if(Be("uponSanitizeElement",e,{tagName:r,allowedTags:G}),e.hasChildNodes()&&!Ke(e.firstElementChild)&&(!Ke(e.content)||!Ke(e.content.firstElementChild))&&tt(/<[/\w]/g,e.innerHTML)&&tt(/<[/\w]/g,e.textContent))return Pe(e),1;if("select"===r&&tt(/<template/i,e.innerHTML))return Pe(e),1;if(7===e.nodeType)return Pe(e),1;if($&&8===e.nodeType&&tt(/<[/\w]/g,e.data))return Pe(e),1;if(G[r]&&!j[r])return e instanceof c&&!function(e){var t=g(e);t&&t.tagName||(t={namespaceURI:Ee,tagName:"template"});var r=Qe(e.tagName),n=Qe(t.tagName);return Te[e.namespaceURI]&&(e.namespaceURI===Ae?t.namespaceURI===ge?"svg"===r:t.namespaceURI===he?"svg"===r&&("annotation-xml"===n||Re[n]):Boolean(Ce[r]):e.namespaceURI===he?t.namespaceURI===ge?"math"===r:t.namespaceURI===Ae?"math"===r&&Le[n]:Boolean(De[r]):e.namespaceURI===ge?(t.namespaceURI!==Ae||Le[n])&&(t.namespaceURI!==he||Re[n])&&!De[r]&&(Ie[r]||!Ce[r]):"application/xhtml+xml"===_e&&Te[e.namespaceURI])}(e)||("noscript"===r||"noembed"===r||"noframes"===r)&&tt(/<\/no(script|embed|frames)/i,e.innerHTML)?(Pe(e),1):(J&&3===e.nodeType&&(t=e.textContent,t=Je(t,C," "),t=Je(t,D," "),t=Je(t,P," "),e.textContent!==t&&(qe(s.removed,{element:e.cloneNode()}),e.textContent=t)),Be("afterSanitizeElements",e,null),0);if(!j[r]&&Ve(r)){if(W.tagNameCheck instanceof RegExp&&tt(W.tagNameCheck,r))return;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(r))return}if(ue&&!se[r]){var n=g(e)||e.parentNode,o=A(e)||e.childNodes;if(o&&n)for(var i=o.length-1;0<=i;--i){var a=y(o[i],!0);a.__removalCount=(e.__removalCount||0)+1,n.insertBefore(a,h(e))}}return Pe(e),1}function Me(e,t,r){if(ae&&("id"===t||"name"===t)&&(r in o||r in be||"__depth"===r||"__removalCount"===r))return!1;if((!Q||Y[t]||!tt(k,t))&&(!q||!tt(x,t)))if(!z[t]||Y[t]){if(!(Ve(e)&&(W.tagNameCheck instanceof RegExp&&tt(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&tt(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&tt(W.tagNameCheck,r)||W.tagNameCheck instanceof Function&&W.tagNameCheck(r))))return!1}else if(!pe[t]&&!tt(B,Je(r,F,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==$e(r,"data:")||!de[e])&&(!X||tt(U,Je(r,F,"")))&&r)return!1;return!0}function He(e){var t,r=void 0,n=void 0,o=void 0;Be("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){for(var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,nodeName:e.nodeName.toLowerCase()},o=i.length;o--;){var c=(r=i[o]).name,u=r.namespaceURI,n="value"===c?r.value:et(r.value);if(H&&(n=r.value),t=we(c),a.attrName=t,a.attrValue=n,a.keepAttr=!0,a.keepElement=!0,a.forceKeepAttr=void 0,Be("uponSanitizeAttribute",e,a),!a.keepElement)return 1;if(n=a.attrValue,!a.forceKeepAttr&&(ke(c,e),a.keepAttr))if(Z||!tt(/\/>/i,n))if($&&tt(/((--!?|])>)|<\/(style|title)/i,n))ke(c,e);else{J&&(n=Je(n,C," "),n=Je(n,D," "),n=Je(n,P," "));var l=e.nodeName.toLowerCase();if(Me(l,t,n)){if(!ce||"id"!==t&&"name"!==t||(ke(c,e),n="user-content-"+n),E&&"object"===(void 0===p?"undefined":Rt(p))&&"function"==typeof p.getAttributeType&&!u)switch(p.getAttributeType(l,t)){case"TrustedHTML":n=E.createHTML(n);break;case"TrustedScriptURL":n=E.createScriptURL(n)}try{u?e.setAttributeNS(u,c,n):e.setAttribute(c,n),Fe(e)?Pe(e):Ye(s.removed)}catch(e){}}}else ke(c,e)}return Be("afterSanitizeAttributes",e,null),0}}function ze(e){var t,r=void 0,n=Ue(e);for(Be("beforeSanitizeShadowDOM",e,null);r=n.nextNode();)Be("uponSanitizeShadowNode",r,null),Ge(r)||(t=g(r),1===r.nodeType&&(t&&t.__depth?r.__depth=(r.__removalCount||0)+t.__depth+1:r.__depth=1),(255<=r.__depth||nt(r.__depth))&&Pe(r),r.content instanceof f&&(r.content.__depth=r.__depth,ze(r.content)),He(r)&&Pe(r));Be("afterSanitizeShadowDOM",e,null)}var Ve=function(e){return"annotation-xml"!==e&&Ze(e,K)};return s.sanitize=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=void 0,n=void 0,o=void 0,i=void 0;if("string"!=typeof(e=(ve=!e)?"\x3c!--\x3e":e)&&!Ke(e)){if("function"!=typeof e.toString)throw rt("toString is not a function");if("string"!=typeof(e=e.toString()))throw rt("dirty is not a string, aborting")}if(!s.isSupported){if("object"===Rt(u.toStaticHTML)||"function"==typeof u.toStaticHTML){if("string"==typeof e)return u.toStaticHTML(e);if(Ke(e))return u.toStaticHTML(e.outerHTML)}return e}if(te||L(t),s.removed=[],le="string"!=typeof e&&le){if(e.nodeName&&(t=we(e.nodeName),!G[t]||j[t]))throw rt("root node is forbidden and cannot be sanitized in-place")}else if(e instanceof d)1===(t=(r=xe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?r=t:r.appendChild(t);else{if(!ne&&!J&&!ee&&-1===e.indexOf("<"))return E&&ie?E.createHTML(e):e;if(!(r=xe(e)))return ne?null:ie?v:""}r&&re&&Pe(r.firstChild);for(var a,c=Ue(le?e:r);n=c.nextNode();)3===n.nodeType&&n===o||Ge(n)||(a=g(n),1===n.nodeType&&(a&&a.__depth?n.__depth=(n.__removalCount||0)+a.__depth+1:n.__depth=1),(255<=n.__depth||nt(n.__depth))&&Pe(n),n.content instanceof f&&(n.content.__depth=n.__depth,ze(n.content)),He(n)?Pe(n):o=n);if(o=null,le)return e;if(ne){if(oe)for(i=N.call(r.ownerDocument);r.firstChild;)i.appendChild(r.firstChild);else i=r;return i=z.shadowroot||z.shadowrootmod?O.call(l,i,!0):i}return e=ee?r.outerHTML:r.innerHTML,ee&&G["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&tt(Ot,r.ownerDocument.doctype.name)&&(e="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+e),J&&(e=Je(e,C," "),e=Je(e,D," "),e=Je(e,P," ")),E&&ie?E.createHTML(e):e},s.setConfig=function(e){L(e),te=!0},s.clearConfig=function(){Oe=null,te=!1},s.isValidAttribute=function(e,t,r){return Oe||L({}),e=Qe(e),t=Qe(t),Me(e,t,r)},s.addHook=function(e,t){"function"==typeof t&&(b[e]=b[e]||[],qe(b[e],t))},s.removeHook=function(e){if(b[e])return Ye(b[e])},s.removeHooks=function(e){b[e]&&(b[e]=[])},s.removeAllHooks=function(){b={}},s}(),ge=(Object.seal||function(e){return e})(/\$\{[A-Z._]+?\}/i);function Ee(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var ve=Object.freeze;i={FORCE_BODY:!0,ALLOWED_URI_REGEXP:!1,REUSE_CONFIG:!1,REMOVE_ONEVENTS:!0,EXTENDS:["GLOBAL_TAGS","GLOBAL_ATTR","FORBID_TAGS","FORBID_ATTR","TAG_RULES","GLOBAL_ATTR_RULES","GLOBAL_APPEND_ATTR","ADD_DATA_URI_TAGS","ADD_URI_SAFE_ATTR"],ALLOWED_STYLE:"NONE",STYLE_RULES:{FORBID_PROPS:[],FORBID_CSSRULES:[],UNSAFE_PROP_RULES:{}}};i.GLOBAL_TAGS="a|abbr|acronym|address|area|article|aside|audio|b|bdi|bdo|big|blink|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|content|data|datalist|dd|decorator|del|details|dfn|dir|div|dl|dt|element|em|fieldset|figcaption|figure|font|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|img|input|ins|kbd|label|legend|li|main|map|mark|marquee|menu|menuitem|meter|nav|nobr|ol|optgroup|option|output|p|pre|progress|q|rp|rt|ruby|s|samp|section|select|shadow|small|source|spacer|span|strike|strong|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video|wbr|#text".split("|"),i.GLOBAL_ATTR="accept|action|align|alt|autocomplete|background|bgcolor|border|cellpadding|cellspacing|checked|cite|class|clear|color|cols|colspan|coords|datetime|default|dir|disabled|download|enctype|face|for|headers|height|hidden|high|href|hreflang|id|ismap|label|lang|list|loop|low|max|maxlength|media|method|min|multiple|name|noshade|novalidate|nowrap|open|optimum|pattern|placeholder|poster|preload|pubdate|radiogroup|readonly|rel|required|rev|reversed|role|rows|rowspan|spellcheck|scope|selected|shape|size|span|srclang|start|src|step|summary|tabindex|title|target|type|usemap|valign|value|width|xmlns|sandbox".split("|"),i.FORBID_TAGS=[],i.FORBID_ATTR=[],i.GLOBAL_ATTR_RULES={},i.GLOBAL_APPEND_ATTR={},i.ADD_DATA_URI_TAGS=[],i.ADD_URI_SAFE_ATTR=[],i.TAG_RULES={a:{APPEND_ATTR:{rel:{ATTR_NAME:"rel",APPEND_ATTR_VALUE:"noopener noreferrer",SIBLING_CONDITIONS:[{ATTR_NAME:"target",CONDITIONS:[{IS_MANDATORY:"true",CONTAINS:"_blank"}]}]}}}},i.TAG_SPECIFIC_ATTRS={};s=function t(A,r){var g="GLOBAL_TAGS",E="GLOBAL_ATTR",v="GLOBAL_ATTRIBUTES",T="FORBID_TAGS",S="FORBID_ATTR",_="TAG_RULES",N="STYLE_RULES",w="GLOBAL_ATTR_RULES",O="GLOBAL_APPEND_ATTR",b="ADD_DATA_URI_TAGS",R="ADD_URI_SAFE_ATTR",e="REMOVE_ONEVENTS",o=["ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","RETURN_DOM","RETURN_DOM_FRAGMENT","IN_PLACE","DONT_TRIM","FORCE_BODY","SANITIZE_DOM","KEEP_CONTENT","ALLOWED_URI_REGEXP"],L=[];M(L,o),M(L,["EXTENDS",e,"ALLOWED_STYLE"]);var n={iframe:{ATTR_RULES:{sandbox:{FALLBACK_VALUE:"allow-popups allow-forms allow-scripts allow-same-origin",CONDITIONS:[{NOT_CONTAINS:["allow-top-navigation","allow-popups-to-escape-sandbox"]}]}},APPEND_ATTR:{sandbox:{APPEND_ATTR_VALUE:"allow-popups allow-forms allow-scripts allow-same-origin"}}},embed:{ATTR_RULES:{type:{CONDITIONS:[{EQUAL:"application/pdf",FALLBACK_VALUE:"application/pdf"}]}},APPEND_ATTR:{type:{APPEND_ATTR_VALUE:"application/pdf"},typemustmatch:{APPEND_ATTR_VALUE:"true"}}},object:{ATTR_RULES:{type:{CONDITIONS:[{EQUAL:"application/pdf",FALLBACK_VALUE:"application/pdf"}]}},APPEND_ATTR:{type:{APPEND_ATTR_VALUE:"application/pdf"},typemustmatch:{APPEND_ATTR_VALUE:"true"}}}},i=void 0,a=void 0,c=void 0,u=A.GLOBAL_TAGS,I=A.GLOBAL_ATTR,l=A.FORBID_TAGS,s=A.FORBID_ATTR,C=A.TAG_RULES,f=A.STYLE_RULES,d=A.GLOBAL_ATTR_RULES,m=A.GLOBAL_APPEND_ATTR,D=A.TAG_SPECIFIC_ATTRS,P=f.FORBID_PROPS,k=f.FORBID_CSSRULES,x=f.UNSAFE_PROP_RULES,p=P&&0!==P.length||k&&0!==k.length;function y(i){if(!i||i.constructor!==Object)return V(A,i={},!0),i;i[_]||(i[_]={}),i[w]||(i[w]={}),i[O]||(i[O]={}),i[b]||(i[b]=[]),i[R]||(i[R]=[]),i[g]||(i[g]=[]),i[E]||(i[E]=[]),i[v]||(i[v]=[]),i[T]||(i[T]=[]),i[S]||(i[S]=[]),i[N]||(i[N]={}),i[N].FORBID_CSSRULES||(i[N].FORBID_CSSRULES=[]),i[N].FORBID_PROPS||(i[N].FORBID_PROPS=[]),i[N].UNSAFE_PROP_RULES||(i[N].UNSAFE_PROP_RULES={}),i.TAG_SPECIFIC_ATTRS={};for(var e=0;e<L.length;e++){var t=L[e];void 0===i[t]&&(i[t]=A[t])}i[_]=H(i[_],"NAME"),i[w]=H(i[w],"ATTR_NAME"),i[O]=H(i[O],"APPEND_ATTR_NAME");var r=i,a=r.TAG_RULES,n=r.TAG_SPECIFIC_ATTRS,o=r.STYLE_RULES,c=r.GLOBAL_ATTR,u=r.GLOBAL_ATTRIBUTES,l=r.GLOBAL_ATTR_RULES,s=r.GLOBAL_APPEND_ATTR,f=r.EXTENDS,d=o.FORBID_CSSRULES,m=o.FORBID_PROPS,p=o.UNSAFE_PROP_RULES;G(s,function(e,t){K(t)}),G(l,function(e,t){K(t)});for(var y=function(e){var r,t,n=f[e];switch(n){case E:var o=[];M(o,I),G(D,function(e){-1<(e=o.indexOf(e))&&o.splice(e,1)}),M(c,u),M(c,o);break;case g:case T:case S:case b:case R:M(i[n],A[n]);break;case _:r=a,(t=C)&&t.constructor===Object&&G(t,function(e,t){e in r?(void 0===r[e].APPEND_ATTR&&(r[e].APPEND_ATTR=t.APPEND_ATTR),void 0===r[e].ATTR_RULES&&(r[e].ATTR_RULES=t.ATTR_RULES)):r[e]=t});break;case O:case w:G(A[n],function(e){i[n][e]||(i[n][e]={},V(A[n][e],i[n][e],!0))});break;case N:m.push.apply(m,Ee(P)),d.push.apply(d,Ee(k)),G(x,function(e){p[e]||(p[e]={},V(x[e],p[e],!0))})}},h=0;h<f.length;h++)y(h);return G(l,function(e){-1===c.indexOf(e)&&(c.push(e),n[e]&&n[e].constructor===Array||(n[e]=[]),-1===n[e].indexOf("*")&&n[e].push("*"))}),G(a,function(r,e){r=z(r),e.APPEND_ATTR||(e.APPEND_ATTR={}),e.APPEND_ATTR=H(e.APPEND_ATTR,"APPEND_ATTR_NAME"),G(e.APPEND_ATTR,function(e,t){K(t)}),e.ATTR_RULES||(e.ATTR_RULES={}),e.ATTR_RULES=H(e.ATTR_RULES,"ATTR_NAME"),G(e.ATTR_RULES,function(e,t){K(t),e=z(e),(-1===c.indexOf(e)||n[e]&&0<n[e].length)&&(-1===c.indexOf(e)&&c.push(e),n[e]&&n[e].constructor===Array||(n[e]=[]),-1===n[e].indexOf(r)&&n[e].push(r))})}),delete i.USE_PROFILES,i}function h(e,t,r){if(e.constructor===String){if(t.CASE_SENSITIVE||(e=e.toLowerCase()),t.DONT_TRIM||(e=e.trim()),t.MAX_LENGTH&&e.length>t.MAX_LENGTH)return!1;if(t.MIN_LENGTH&&e.length<t.MIN_LENGTH)return!1;if(t.REGEX&&t.REGEX.constructor===RegExp&&-1===e.search(t.REGEX))return!1;if(t.REGEX&&t.REGEX.constructor===String&&(new RegExp(t.REGEX),-1===e.search(t.REGEX)))return!1;if(t.REGEX&&t.REGEX.constructor===Array)for(var n=0;n<t.REGEX.length;n++)if(-1===e.search(t.REGEX[n]))return!1;if(t.VALIDATOR&&t.VALIDATOR.HANDLER&&!t.VALIDATOR.HANDLER(e,t.VALIDATOR.CONFIG,r))return!1;if(void 0!==t.STARTS_WITH&&0!==e.indexOf(t.STARTS_WITH))return!1;if(void 0!==t.ENDS_WITH&&e.lastIndexOf(t.ENDS_WITH)!==e.length-t.ENDS_WITH.length)return!1;if(t.CONTAINS&&t.CONTAINS.constructor===String&&-1===e.indexOf(t.CONTAINS))return!1;if(t.CONTAINS&&t.CONTAINS.constructor===Array)for(var o=0;o<t.CONTAINS.length;o++)if(-1===e.indexOf(t.CONTAINS[o]))return!1;if(t.NOT_CONTAINS&&t.NOT_CONTAINS.constructor===String&&-1<e.indexOf(t.NOT_CONTAINS))return!1;if(t.NOT_CONTAINS&&t.NOT_CONTAINS.constructor===Array)for(var i=0;i<t.NOT_CONTAINS.length;i++)if(-1<e.indexOf(t.NOT_CONTAINS[i]))return!1;if(void 0!==t.EQUAL&&e!=t.EQUAL)return!1;if(void 0!==t.NOT_EQUAL&&e==t.NOT_EQUAL)return!1}if(t.LIST&&-1===t.LIST.indexOf(e))return!1;if("INTEGER"===t.TYPE||"FLOAT"===t.TYPE){r=void 0;try{r="INTEGER"===t.TYPE?window.parseInt(e,10):window.parseFloat(e)}catch(e){return!1}if(window.isNaN(r))return!1;if(void 0!==t.GREATER_THAN&&r<=t.GREATER_THAN)return!1;if(void 0!==t.GREATER_THAN_OR_EQUAL&&r<t.GREATER_THAN_OR_EQUAL)return!1;if(void 0!==t.LESSER_THAN&&r>=t.LESSER_THAN)return!1;if(void 0!==t.LESSER_THAN_OR_EQUAL&&r>t.LESSER_THAN_OR_EQUAL)return!1;if(void 0!==t.EQUAL&&r!==t.EQUAL)return!1;if(void 0!==t.NOT_EQUAL&&r===t.NOT_EQUAL)return!1}return!0}function U(e,t,r){var n=!0;if(!t||!t.CONDITIONS||0===t.CONDITIONS.length)return{isValid:n,rule:t};r=t.ATTR_NAME||r;for(var o,i,a,c,u=0;u<t.CONDITIONS.length;u++){var l=t.CONDITIONS[u];if(o=e,i=r,c=void 0,c=!1!==(a=l).IS_MANDATORY,n=i&&!o.hasAttribute(i.toLowerCase())?a.IS_FORBIDDEN||!c:!a.IS_FORBIDDEN&&h(o=null==(o=o.getAttribute(i.toLowerCase()))?"":o,a,i),n=l.NEGATION?!n:n){if(l.NEXT)return U(e,l.NEXT,r);break}}return{isValid:n,rule:t}}function F(o){G(o,function(e,t){if(t&&t.constructor===String&&(0<P.length&&-1<P.indexOf(e)&&(o[e]="",i=!0),x[e]))for(var r=x[e],n=0;n<r.CONDITIONS.length;n++)if(h(t,r.CONDITIONS[n],e))return o[e]=void 0===r.FALLBACK_VALUE?"":r.FALLBACK_VALUE,i=!0,0})}function K(e){if(e&&(e.CONDITIONS&&0<e.CONDITIONS.length&&(e.CONDITIONS=function(e){if(!e)return e;for(var t=0;t<e.length;t++)e[t]=function(e){if(!e||e&&e.CASE_SENSITIVE)return e;for(var t=["STARTS_WITH","ENDS_WITH","CONTAINS","EQUAL","NOT_EQUAL","LIST"],r=0;r<t.length;r++){var n=t[r];e[n]&&(e[n]=z(e[n]))}return e.NEXT&&K(e.NEXT),e}(e[t]);return e}(e.CONDITIONS)),e.SIBLING_CONDITIONS&&0<e.SIBLING_CONDITIONS.length))for(var t=0;t<e.SIBLING_CONDITIONS.length;t++)K(e.SIBLING_CONDITIONS[t])}p||G(x,function(){p=!0});function B(e){return t(e=y(e),r(window))}return B.sanitize=function(e,t){t=function(r){if(!r||r.constructor!==Object)return A;var n={};return G(A,function(e,t){e in r&&-1!==o.indexOf(e)&&(!0===r[e]||!1===r[e]||r[e]&&r[e].constructor===RegExp)?n[e]=r[e]:n[e]=t}),n.SAFE_FOR_TEMPLATES&&(n.ALLOW_DATA_ATTR=!1),n.RETURN_DOM_FRAGMENT&&(n.RETURN_DOM=!0),n.KEEP_CONTENT&&n.GLOBAL_TAGS.push("#text"),n.ADD_TAGS&&delete n.ADD_TAGS,n.ADD_ATTR&&delete n.ADD_ATTR,n}(t),e=r.sanitize(e,t);return(t=B.removed).splice.apply(t,[0,B.removed.length].concat(Ee(r.removed))),e},M(l,["script"]),M(s,[]),f=A.ALLOWED_STYLE,r.removeAllHooks(),i=!1,-1===l.indexOf("style")&&l.push("style"),-1===s.indexOf("style")&&s.push("style"),"INLINE"!==f&&"ALL"!==f||(s.splice(s.indexOf("style"),1),-1===I.indexOf("style")&&I.push("style"),p&&r.addHook("uponSanitizeAttribute",function(e,t){var r,n;"style"===t.attrName&&(e.ownerDocument.baseURI||((n=(r=window.document).createElement("base")).href=r.baseURI,e.ownerDocument.head.appendChild(n)),i=!1,F(e.style),0!==(n=e.style.cssText).length?t.attrValue=i?n:e.getAttribute("style"):t.keepAttr=!1)})),"INTERNAL"!==f&&"ALL"!==f||(l.splice(l.indexOf("style"),1),-1===u.indexOf("style")&&u.push("style"),p&&r.addHook("uponSanitizeElement",function(e,t){var r;"style"===t.tagName&&null!==e.sheet&&(r=e.sheet.cssRules,i=!1,function e(t,r){for(var n=t.length-1;0<=n;n--){var o=t[n];0<k.length&&-1<k.indexOf(o.type)?(r.deleteRule(n),i=!0):1===o.type&&o.selectorText||8===o.type&&o.keyText?o.style&&F(o.style):4!==o.type&&7!==o.type&&12!==o.type||!o.cssRules||e(o.cssRules,o)}}(r,e.sheet),i&&(function(e,t){for(var r=t.length-1;0<=r;r--)1!==t[r].type&&3!==t[r].type&&4!==t[r].type&&7!==t[r].type&&12!==t[r].type||e.push(t[r].cssText)}(t=[],r),e.textContent=t.join("\n")))})),(d||C)&&(a={},G(n,function(r,e){a[r]={},G(e.ATTR_RULES,function(e,t){return a[r][e]=t})}),G(a,function(r,e){G(d,function(e,t){return a[r][e]=t})}),G(C,function(r,e){a[r]||(a[r]={}),G(e.ATTR_RULES,function(e,t){return a[r][e]=t})}),r.addHook("uponSanitizeAttribute",function(e,t){var r,n,o=a[t.nodeName]&&a[t.nodeName][t.attrName]||d&&d[t.attrName];o&&(n=(r=U(e,o,t.attrName)).isValid,(o=r.rule)&&o.FORCE_KEEP_ATTR&&(t.forceKeepAttr=!0),n||(r=e,n=t,"REMOVE_ELEMENT"!==(e=o).ACTION?void 0!==e.FALLBACK_VALUE?(t=e.FALLBACK_VALUE,(o=ge.exec(e.FALLBACK_VALUE))&&(r=r.getAttribute(e.ATTR_NAME),"${ZWAF.URL_COMPONENT}"===o[0]&&(r=window.encodeURIComponent(r)),t=e.FALLBACK_VALUE.replace(o[0],r)),Nt.test(t.replace(wt,""))?n.keepAttr=!1:n.attrValue=t):n.keepAttr=!1:n.keepElement=!1))})),(m||C)&&(c={},G(n,function(r,e){c[r]={},G(e.APPEND_ATTR,function(e,t){return c[r][e]=t})}),G(c,function(r,e){G(d,function(e,t){return c[r][e]=t})}),G(C,function(r,e){c[r]||(c[r]={}),G(e.APPEND_ATTR,function(e,t){return c[r][e]=t})}),r.addHook("afterSanitizeAttributes",function(e){var i,t=e.nodeName.toLowerCase(),r={};G(m,function(e,t){return r[e]=t}),G(c[t],function(e,t){return r[e]=t}),i=e,G(r,function(e,t){if(!i.hasAttribute(e.toLowerCase()))if(t.SIBLING_CONDITIONS&&0!=t.SIBLING_CONDITIONS.length)for(var r=0;r<t.SIBLING_CONDITIONS.length;r++){var n=(o=U(i,t.SIBLING_CONDITIONS[r])).isValid,o=o.rule;if(n)return o=(void 0!==o.APPEND_ATTR_VALUE?o:t).APPEND_ATTR_VALUE,i.setAttribute(e,o),0}else i.setAttribute(e,t.APPEND_ATTR_VALUE)})})),A[e]&&r.addHook("uponSanitizeAttribute",function(e,t){0===t.attrName.indexOf("on")&&(t.keepAttr=!1)}),D&&r.addHook("uponSanitizeAttribute",function(e,t){D[t.attrName]&&-1===D[t.attrName].indexOf(t.nodeName)&&-1===D[t.attrName].indexOf("*")&&(t.keepAttr=!1)}),A.ALLOWED_TAGS=u,A.ALLOWED_ATTR=I,A.GLOBAL_ATTRIBUTES=I,A&&!A.REUSE_CONFIG&&ve&&ve(A),B.isSupported=r.isSupported,B.version=r.version,B.removed=[],B}(i,h);ve&&ve(s),delete window.DOMPurify,"7.0.0"!==o.version||o.HTMLPurifier||o.defineProperty(o,"HTMLPurifier",s,!0,!1,!1,!0),o["7_0_0"].HTMLPurifier||o.defineProperty(o["7_0_0"],"HTMLPurifier",s,!0,!1,!1,!0);var d=window.navigator,Te=-1!==d.userAgent.indexOf("MSIE"),i=window.chrome,h=d.vendor,s=void 0!==window.opr,d=-1<d.userAgent.indexOf("Edge"),Se=null!=i&&"Google Inc."===h&&!1==s&&!1==d,_e=!1;if(Se){_e=!0;try{var Ne=navigator.userAgent.match(/Chrome\/(\d+)/),we=Ne&&parseInt(Ne[1]);isNaN(we)||(_e=71<we)}catch(e){_e=!0}}var Oe=window.open,be={"'":"\\x27",'"':"\\x22","`":"\\x60","\n":"\\x0A","\r":"\\x0D","<":"\\x3C",">":"\\x3E",")":"\\x29"};function Re(e){return"_top"===e||"_self"===e||"_parent"===e}function Le(e,t){if(!t||!e)return e;for(var r="",n=0;n<e.length;n++)Object.prototype.hasOwnProperty.call(t,e[n])?r+=t[e[n]]:r+=e[n];return r}function Ie(e){if(1===e.nodeType){var t=e.nodeName;if("A"!=t&&"a"!=t&&(Se||"MATH"!=t&&"math"!=t)||(e.setAttribute("rel","noopener noreferrer"),_e||function(e,t,r){if(e.addEventListener)return e.addEventListener(t,r,!1);t="on"+t;{var n;e.attachEvent?e.attachEvent(t,r):e[t]?(n=e[t],e[t]=function(){r(),n()}):e[t]=r}}(e,"click",De)),e.childNodes)for(var r=e.childNodes,n=0;n<r.length;n++){var o=r[n];1===o.nodeType&&Ie(o)}}}function Ce(e,i){var t=window.MutationObserver||window.WebKitMutationObserver,r=window.addEventListener;t?new t(function(e){for(var t=0;t<e.length;t++){var r=e[t].addedNodes.length;if(r)for(var n=e[t].addedNodes,o=0;o<r;o++)i(n[o])}}).observe(e,{childList:!0,subtree:!0}):r&&e.addEventListener("DOMNodeInserted",function(e){i(e.target)},!1)}function De(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.event,t=e.currentTarget||e.srcElement,r=t.getAttribute("href");if(r=r||t.getAttribute("xlink:href")){var n=e.ctrlKey||e.shiftKey||e.metaKey,o=t.getAttribute("target"),t=t.getAttribute("xlink:show");if(n||o&&!Re(o)||t)return Pe.open(r),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}}function Pe(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(void 0===e.length)Ie(e),t&&Ce(e,Pe);else if("string"!=typeof e&&!(e instanceof String))for(var r=0;r<e.length;r++)Ie(e[r]),t&&Ce(e,Pe)}Pe.open=function(e,t,r){if(Re(t))return Oe.apply(window,arguments);if(!Te&&!_e)return function(e,t,r){var n=window.document.createElement("iframe");n.style.display="none",window.document.body.appendChild(n);var o=n.contentDocument||n.contentWindow.document,e='"'+window.encodeURI(e)+'"';return t&&(e+=', "'+Le(t,be)+'"'),r&&(e+=', "'+Le(r,be)+'"'),(r=o.createElement("script")).type="text/javascript",r.text="window.parent = null; window.top = null; window.frameElement = null; var child = window.open("+e+"); try{ child.opener = null; }catch(e){}",o.body.appendChild(r),r=n.contentWindow.child,window.document.body.removeChild(n),r}(e,t,r);r=Oe.apply(window,arguments);return r.opener=null,r},Pe.patch=function(){window.open=function(){return Pe.open.apply(this,arguments)}},Object.freeze&&Object.freeze(Pe),"7.0.0"!==o.version||o.SecureRedirector||o.defineProperty(o,"SecureRedirector",Pe,!0,!1,!1,!0),o["7_0_0"].SecureRedirector||o.defineProperty(o["7_0_0"],"SecureRedirector",Pe,!0,!1,!1,!0);we={};we.filterXML=function(e){for(var t="",r=0,n=e.length;r<n;r++){var o=c.call(e,r),i=e.charAt(r);(9===o||10===o||13===o||32<=o&&o<=55295||57344<=o&&o<=65533||65536<=o&&o<=1114111)&&(t+=i),65535<o&&r++}return t},Object.freeze&&Object.freeze(we),"7.0.0"!==o.version||o.TextFilter||o.defineProperty(o,"TextFilter",we,!0,!1,!1,!0),o["7_0_0"].TextFilter||o.defineProperty(o["7_0_0"],"TextFilter",we,!0,!1,!1,!0);var ke=2147483647,xe=/^xn--/,Ue=/[^\0-\x7E]/,Fe=/[\x2E\u3002\uFF0E\uFF61]/g,Ke={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Be=Math.floor,Ge=String.fromCharCode;function Me(e){throw new RangeError(Ke[e])}function He(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(Fe,".")).split("."),t).join(".")}function ze(e){for(var t=[],r=0,n=e.length;r<n;){var o,i=e.charCodeAt(r++);55296<=i&&i<=56319&&r<n?56320==(64512&(o=e.charCodeAt(r++)))?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--):t.push(i)}return t}function Ve(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Dt(e,t,r){var n=0;for(e=r?Be(e/700):e>>1,e+=Be(e/t);455<e;n+=36)e=Be(e/35);return Be(n+36*e/(e+38))}function Pt(e){var t=[],r=e.length,n=0,o=128,i=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var c=0;c<a;++c)128<=e.charCodeAt(c)&&Me("not-basic"),t.push(e.charCodeAt(c));for(var u=0<a?a+1:0;u<r;){for(var l=n,s=1,f=36;;f+=36){r<=u&&Me("invalid-input");var d=(m=e.charCodeAt(u++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:36;(36<=d||d>Be((ke-n)/s))&&Me("overflow"),n+=d*s;var m=f<=i?1:i+26<=f?26:f-i;if(d<m)break;m=36-m;s>Be(ke/m)&&Me("overflow"),s*=m}var p=t.length+1,i=Dt(n-l,p,0==l);Be(n/p)>ke-o&&Me("overflow"),o+=Be(n/p),n%=p,t.splice(n++,0,o)}return y.apply(void 0,t)}function kt(e){var t=[],r=(e=ze(e)).length,n=128,o=0,i=72,a=!0,c=!1,u=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var f=l.value;f<128&&t.push(Ge(f))}}catch(e){c=!0,u=e}finally{try{!a&&s.return&&s.return()}finally{if(c)throw u}}var d=t.length,m=d;for(d&&t.push("-");m<r;){var p=ke,y=!0,h=!1,A=void 0;try{for(var g,E=e[Symbol.iterator]();!(y=(g=E.next()).done);y=!0){var v=g.value;n<=v&&v<p&&(p=v)}}catch(e){h=!0,A=e}finally{try{!y&&E.return&&E.return()}finally{if(h)throw A}}var T=m+1;p-n>Be((ke-o)/T)&&Me("overflow"),o+=(p-n)*T;var n=p,S=!0,h=!1,A=void 0;try{for(var _,N=e[Symbol.iterator]();!(S=(_=N.next()).done);S=!0){var w=_.value;if(w<n&&++o>ke&&Me("overflow"),w==n){for(var O=o,b=36;;b+=36){var R=b<=i?1:i+26<=b?26:b-i;if(O<R)break;var L=O-R,I=36-R;t.push(Ge(Ve(R+L%I,0))),O=Be(L/I)}t.push(Ge(Ve(O,0))),i=Dt(o,T,m==d),o=0,++m}}}catch(e){h=!0,A=e}finally{try{!S&&N.return&&N.return()}finally{if(h)throw A}}++o,++n}return t.join("")}var xt={unsafeProtocolRegex:/^(?:\w+script|data)$/i,sanitizeAction:{ENCODE:"ENCODE",REMOVE:"REMOVE"},allowedProtocols:["https","http"]},Ut={punycode:{version:"2.1.0",ucs2:{decode:ze,encode:function(e){return y.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:Pt,encode:kt,toASCII:function(e){return He(e,function(e){return Ue.test(e)?"xn--"+kt(e):e})},toUnicode:function(e){return He(e,function(e){return xe.test(e)?Pt(e.slice(4).toLowerCase()):e})}}};return Ut.sanitize=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";var r=t.ALLOWED_PROTOCOLS||xt.allowedProtocols,n=t.ALLOWED_DOMAINS||!1,o=!1!==t.PUNYCODE,i=t.ACTION||xt.sanitizeAction.ENCODE,a=t.RETURN_OBJECT||!1,c=t.KEEP_ORIGINAL||!1,u=t.VALIDATE_ONLY||!1,l=window.document.createElement("a");l.href=e;var s=l.cloneNode(!1),f=s.protocol.slice(0,-1),d=s.host,m=s.pathname,t=s.port,l=s.hash,s=s.href,d=o?Ut.punycode.toASCII(d):Ut.punycode.toUnicode(d),s=o?Ut.punycode.toASCII(s):Ut.punycode.toUnicode(s),n=function(e,t){if(!e)return!0;for(var r=Ut.punycode.toASCII(t),n=Ut.punycode.toUnicode(t),o=0;o<e.length;o++){var i=e[o];if(i.constructor===String&&(i===r||i===n)||i.constructor===RegExp&&(i.test(r)||i.test(n)))return!0}return!1}(n,d),r=function(e,t){if(e){for(var r=0;r<e.length;r++){var n=e[r];if(n.constructor===RegExp&&n.test(t)||n.constructor===String&&n===t)return!0}return!1}return!xt.unsafeProtocolRegex.test(t)}(r,f);return!!(!u||n&&r)&&(n?r?!!u||(a?{PROTOCOL:f,DOMAIN:d,PORT:t,PATH:m,HASH:l,RESOLVED_URL:s,ORIGINAL_URL:e}:c?e:s):i===xt.sanitizeAction.ENCODE?s.replace(/:/,"%3A"):"":"")},Ut.validate=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!!e&&(t.VALIDATE_ONLY=!0,Ut.sanitize(e,t))},Object.freeze&&Object.freeze(Ut),"7.0.0"!==o.version||o.URLValidator||o.defineProperty(o,"URLValidator",Ut,!0,!1,!1,!0),o["7_0_0"].URLValidator||o.defineProperty(o["7_0_0"],"URLValidator",Ut,!0,!1,!1,!0),o});
