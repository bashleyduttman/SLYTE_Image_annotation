<template tag-name="lyte-calendar">
  <div class={{containerClass}} class="lyteCalendarPopup" ontouchstart={{action('record',event)}} ontouchend={{action('decide',event)}}>
    <div class='lyteCalendarView'>
      <div>
        <template lyte-if="{{navYield}}">
          <lyte-yield yield-name="navigator"></lyte-yield>
        </template>
        <template lyte-else>

          <div class='lyteCalendarNavigator {{if(ifEquals(ltPropHeaderAlignType,"centerdate"),"lyteCalHeaderCenterAlign","")}}'>
            <span id={{monthDropdownId}} class="lyteVisuallyHidden">{{lyteUiI18n("lyte.calendar.choose.month")}}</span>
            <span id={{yearDropdownId}} class="lyteVisuallyHidden">{{lyteUiI18n("lyte.calendar.choose.year")}}</span>
            <span class="lyteVisuallyHidden"  aria-live="polite" id="{{headerId}}">
                            <template  lyte-if="{{viewType === 'dateView'}}">
                                <span>{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span><span>{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
        </template>
        <template lyte-else-if="{{viewType === 'monthView'}}">
          <span>{{currentYear}}</span>
        </template>
        <template lyte-else>
          <span>{{decadeStart}} - {{decadeEnd}}</span>
        </template>

        </span>
        <template lyte-if="{{ifNotEquals(ltPropHeaderAlignType,&quot;centerdate&quot;)}}">
          <span class="lyteCalsCalMon">
                              <template  lyte-if="{{ltPropHeaderType === 'dropdown' || ltPropHeaderType === 'picklist'}}">
                                  

                                  <lyte-dropdown lt-prop-aria-button={{monthAriaObj}} lt-prop-freeze="false" lt-prop={{stringify(ltPropDropdown)}} on-show={{method('setClass')}}  class="lyteCalMonthDD" on-option-selected="{{method('optionSelected','M')}}">
                                      <template is="registerYield" yield-name="yield">
                                          <lyte-drop-box>
                                              <lyte-drop-body>
                                                  <template lyte-for="{{monthNames}} as item index ">
                                                      <lyte-drop-item data-value={{item}}>{{item}}</lyte-drop-item>
                                                  </template>

                                              </lyte-drop-body>
                                          </lyte-drop-box>
                                      </template>
                                  </lyte-dropdown>
                                  <template  lyte-if="{{ltPropHeaderType === 'dropdown'}}">
                                      <lyte-dropdown lt-prop-aria-button={{yearAriaObj}} lt-prop-freeze="false" lt-prop={{stringify(ltPropDropdown)}} on-show={{method('setClass')}}  class="lyteCalYearDD" on-option-selected="{{method('optionSelected','Y')}}">
                                          <template is="registerYield" yield-name="yield">
                                              <lyte-drop-box>
                                                  <lyte-drop-body>
                                                      <template lyte-for="{{years}} as item index ">
                                                          <lyte-drop-item data-value={{item}}>{{item}}</lyte-drop-item>
                                                      </template>

                                                  </lyte-drop-body>
                                              </lyte-drop-box>
                                          </template>
                                      </lyte-dropdown>
                                  </template>
  <template  lyte-else>
                                      <lyte-picklist lt-prop-options={{years}} lt-prop-dropdown='{"freeze": false, "callout": true}' class="lyteCalYearDD" on-option-select="{{method('optionSelected','Y')}}" on-show={{method('setClass')}}>
                                      </lyte-picklist>
                                  </template>


                              </template>
  <template  lyte-else-if="{{ltPropHeaderType === 'drilldown'}}">
                                  <template  lyte-if="{{viewType === 'dateView'}}">
                                      <span aria-label={{lyteUiI18n('lyte.calendar.monthview.drilldown.button')}} tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick={{action('changeToMonthView',event)}} onkeydown={{action('changeToMonthViewOnKeys',event)}}>
                                          <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span>
          <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
          </span>
  </template>
  <template lyte-else-if="{{viewType === 'monthView'}}">
    <span aria-label={{lyteUiI18n('lyte.calendar.decadeview.drilldown.button')}} tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick={{action('changeToDecadeView',event)}} onkeydown={{action('changeToDecadeViewOnKeys',event)}}>
                                          <span class="lyteCalsCalYear">{{currentYear}}</span>
    </span>
  </template>
  <template lyte-else-if="{{viewType === 'decadeView'}}">
    <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader">
    {{decadeStart}} - {{decadeEnd}}
    </span>
  </template>

  </template>
  <template lyte-else-if="{{ltPropSelectionType === 'month' || ltPropSelectionType === 'year'}}">
    <template lyte-if="{{viewType === 'monthView'}}">
      <span>
                                          <span class="lyteCalsCalYear">{{currentYear}}</span>
      </span>
    </template>
    <template lyte-else-if="{{viewType === 'decadeView'}}">
      <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader">
      {{decadeStart}} - {{decadeEnd}}
      </span>
    </template>

  </template>
  <template lyte-else>
    <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span>
    <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
  </template>

          </span>
        </template>
<template lyte-if="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}">
  <template lyte-if="{{ showYear && ltPropSelectionType !== 'month' && ltPropSelectionType !== 'year'}}">
    <span role="button" tabindex="0" class="lyteCalNav lyteCalyearNavLft" onclick="{{action('previous','Y',event)}}" onkeydown={{action('previousOnKeys','Y',event)}}>
                                    <span class="lyteVisuallyHidden">{{lyteUiI18n('lyte.calendar.previous.year')}}</span>
    </span>
  </template>

</template>

<span role="button" class="lyteCalNav lyteCaldLft {{lyteUiDisableCalendarNav(viewDate,'previous')}}" tabindex="0" onclick="{{action('previous','M',event)}}" onkeydown={{action('previousOnKeys','M',event)}}>
                            <span class="lyteVisuallyHidden">{{lyteUiI18n('lyte.calendar.previous.month')}}</span>
</span>
<template lyte-if="{{ifEquals(ltPropHeaderAlignType,&quot;centerdate&quot;)}}">
  <span class="lyteCalsCalMon">
                      <template  lyte-if="{{ltPropHeaderType === 'dropdown' || ltPropHeaderType === 'picklist'}}">
                          

                          <lyte-dropdown lt-prop-aria-button={{monthAriaObj}} lt-prop-freeze="false" lt-prop={{stringify(ltPropDropdown)}} on-show={{method('setClass')}}  class="lyteCalMonthDD" on-option-selected="{{method('optionSelected','M')}}">
                              <template is="registerYield" yield-name="yield">
                                  <lyte-drop-box>
                                      <lyte-drop-body>
                                          <template lyte-for="{{monthNames}} as item index ">
                                              <lyte-drop-item data-value={{item}}>{{item}}</lyte-drop-item>
                                          </template>

                                      </lyte-drop-body>
                                  </lyte-drop-box>
                              </template>
                          </lyte-dropdown>
                          <template  lyte-if="{{ltPropHeaderType === 'dropdown'}}">
                              <lyte-dropdown lt-prop-aria-button={{yearAriaObj}} lt-prop-freeze="false" lt-prop={{stringify(ltPropDropdown)}} on-show={{method('setClass')}}  class="lyteCalYearDD" on-option-selected="{{method('optionSelected','Y')}}">
                                  <template is="registerYield" yield-name="yield">
                                      <lyte-drop-box>
                                          <lyte-drop-body>
                                              <template lyte-for="{{years}} as item index ">
                                                  <lyte-drop-item data-value={{item}}>{{item}}</lyte-drop-item>
                                              </template>

                                          </lyte-drop-body>
                                      </lyte-drop-box>
                                  </template>
                              </lyte-dropdown>
                          </template>
<template  lyte-else>
                              <lyte-picklist lt-prop-options={{years}} lt-prop-dropdown='{"freeze": false, "callout": true}' class="lyteCalYearDD" on-option-select="{{method('optionSelected','Y')}}" on-show={{method('setClass')}}>
                              </lyte-picklist>
                          </template>


                      </template>
<template  lyte-else-if="{{ltPropHeaderType === 'drilldown'}}">
                          <template  lyte-if="{{viewType === 'dateView'}}">
                              <span aria-label={{lyteUiI18n('lyte.calendar.monthview.drilldown.button')}} tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick={{action('changeToMonthView',event)}} onkeydown={{action('changeToMonthViewOnKeys',event)}}>
                                  <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span>
  <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
  </span>
</template>
<template lyte-else-if="{{viewType === 'monthView'}}">
<span aria-label={{lyteUiI18n('lyte.calendar.decadeview.drilldown.button')}} tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick={{action('changeToDecadeView',event)}} onkeydown={{action('changeToDecadeViewOnKeys',event)}}>
                                  <span class="lyteCalsCalYear">{{currentYear}}</span>
</span>
</template>
<template lyte-else-if="{{viewType === 'decadeView'}}">
<span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader">
{{decadeStart}} - {{decadeEnd}}
</span>
</template>

</template>
<template lyte-else-if="{{ltPropSelectionType === 'month' || ltPropSelectionType === 'year'}}">
<template lyte-if="{{viewType === 'monthView'}}">
<span>
                                  <span class="lyteCalsCalYear">{{currentYear}}</span>
</span>
</template>
<template lyte-else-if="{{viewType === 'decadeView'}}">
<span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader">
{{decadeStart}} - {{decadeEnd}}
</span>
</template>

</template>
<template lyte-else>
<span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span>
<span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span>
</template>

  </span>
</template>
<span role="button" class="lyteCalNav lyteCaldRgt {{lyteUiDisableCalendarNav(viewDate,'next')}}" tabindex="0" onkeydown={{action('nextOnKeys','M',event)}} onclick="{{action('next','M',event)}}">
                            <span class="lyteVisuallyHidden">{{lyteUiI18n('lyte.calendar.next.month')}}</span>
</span>
<template lyte-if="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}">
  <template lyte-if="{{ showYear && ltPropSelectionType !== 'month' && ltPropSelectionType !== 'year'}}">
    <span role="button" class="lyteCalNav lyteCalyearNavRgt" tabindex="0" onkeydown={{action('nextOnKeys','Y',event)}} onclick="{{action('next','Y',event)}}">
                                    <span class="lyteVisuallyHidden">{{lyteUiI18n('lyte.calendar.next.year')}}</span>
    </span>
  </template>

</template>

</div>
</template>


</div>
<div class="lyteCalTableContainer" role="grid">
  <template lyte-if="{{ltPropBodyYield}}">
    <lyte-yield yield-name="body"></lyte-yield>
  </template>
  <template lyte-else>
    <template lyte-if="{{viewType === 'dateView'}}">
      <div role="row" class="lyteCalTableRowHeader">
        <template lyte-if="{{ltPropWeekNumber}}">
          <div role="columnheader" class="lyteCalTableCellHeader lyteWeekNumberGrid"><span>{{ltPropWeekNumHeader}}</span></div>
        </template>

        <template lyte-for="{{daysOfWeek}} as day idod ">
          <div role="columnheader" aria-label={{day.title}} class="{{day.class}}" id={{day.id}}>{{lyteUiI18n(day.day)}}</div>
        </template>

      </div>
    </template>

    <div class="lyteCalTableRowGroup">
      <template lyte-if="{{viewType === 'dateView'}}">
        <template lyte-for="{{matrix}} as vector rowid ">
          <template lyte-if="{{!lyteUiCheckEmpty(vector)}}">
            <div class="lyteCalTableRow" role="row">
              <template lyte-if="{{ltPropWeekNumber}}">
                <div role="gridcell" tabindex="-1" class="{{weeknum[rowid].class}}"  lt-prop-title = "Week Number" lt-prop-tooltip-config = '{"position" : "right", "appearance" : "box"}'><span >{{if(ifNotEquals(weeknum[rowid].val,0),weeknum[rowid].val,'')}}</span></div>
              </template>

              <template lyte-for="{{vector}} as date cellid ">
                <template lyte-if="{{lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat) && !lyteUiDisabledDates( date, ltPropDisabledDates )}}">
                  <template lyte-if="{{date.emptyBlock}}">
                    <div role="gridcell" class="lyteCalEmpty" data-selectable="false"></div>
                  </template>
                  <template lyte-else>
                    <div role="gridcell" tabindex="-1" id={{date.id}} aria-labelledby="{{concat(date.id, ' ', headerId, ' ', daysOfWeek[cellid]['id'])}}" onkeydown="{{action('performNavigation',event)}}" onclick="{{action('dateSelected',event)}}" class={{date.clsname}} data-date={{date.val}} data-selectable="true"><span class="lyteCalDateSpan">{{date.date}}</span></div>
                  </template>

                </template>
                <template lyte-else>
                  <template lyte-if="{{date.emptyBlock}}">
                    <div role="gridcell" class="lyteCalEmpty" data-selectable="false"></div>
                  </template>
                  <template lyte-else>
                    <div role="gridcell" tabindex="-1" id={{date.id}} aria-labelledby="{{concat(date.id, ' ', headerId, ' ', daysOfWeek[cellid]['id'])}}" aria-disabled="true" onkeydown="{{action('performNavigation',event)}}" data-date={{date.val}} class={{date.clsname}} data-selectable="false"><span class="lyteCalDateSpan">{{date.date}}</span></div>
                  </template>

                </template>

              </template>

            </div>
          </template>

        </template>

      </template>
      <template lyte-else-if="{{viewType === 'monthView'}}">
        <template lyte-for="{{monthViewData}} as row rowIndex ">
          <div class="lyteCalTableRow">
            <template lyte-for="{{row}} as column columnIndex ">
              <div aria-label="{{lyteUiI18n(lyteUiGetLinearIndex(ariaMonthNames,rowIndex,columnIndex))}}" role="gridcell" tabindex="-1" onkeydown="{{action('performNavigation',event)}}" onclick={{action('monthSelected',event)}} class={{column['class']}} class="lyteCalTableCell" data-date={{column['systemValue']}}>
                {{column['displayValue']}}
              </div>
            </template>

          </div>
        </template>

      </template>
      <template lyte-else-if="{{viewType === 'decadeView'}}">
        <template lyte-for="{{decadeViewData}} as row rowIndex ">
          <div class="lyteCalTableRow">
            <template lyte-for="{{row}} as column columnIndex ">
              <template lyte-if="{{!column.emptyBlock}}">
                <div role="gridcell" tabindex="-1" onkeydown="{{action('performNavigation',event)}}" onclick={{action('yearSelected',event)}} class="lyteCalTableCell {{column.class}}" data-date={{column.year}}>
                  {{column.year}}
                </div>
              </template>
              <template lyte-else>
                <div role="gridcell" class="lyteCalEmpty">

                </div>
              </template>

            </template>

          </div>
        </template>

      </template>

    </div>
  </template>

</div>
<div>
  <div class="lyteCalBtns">
    <template lyte-if="{{showToday && ltPropShowToday && viewType==='monthView'}}">
      <p role="button" tabindex="0" onkeydown={{action('curMonthOnKey',event)}} class="lyteCalCurrentDate"><a onclick="{{action('curMonth',event)}}">{{lyteUiI18n('Current Month')}}</a></p>
    </template>
    <template lyte-else-if="{{showToday && ltPropShowToday && viewType==='decadeView'}}">
      <p role="button" tabindex="0" onkeydown={{action('curYearOnKey',event)}} class="lyteCalCurrentDate"><a onclick="{{action('curYear',event)}}">{{lyteUiI18n('Current Year')}}</a></p>
    </template>
    <template lyte-else-if="{{showToday && ltPropShowToday && viewType==='dateView' && ltPropSelectionType==='week'}}">
      <p role="button" tabindex="0" onkeydown={{action('curWeekOnKey',event)}} class="lyteCalCurrentDate"><a onclick="{{action('curWeek',event)}}">{{lyteUiI18n('Current Week')}}</a></p>
    </template>
    <template lyte-else-if="{{showToday && ltPropShowToday}}">
      <p role="button" tabindex="0" onkeydown={{action('todayOnKey',event)}} class="lyteCalCurrentDate"><a onclick="{{action('today',event)}}">{{lyteUiI18n('today')}}</a></p>
    </template>

    <template lyte-if="{{ltPropYield}}">
      <lyte-yield yield-name="footer"></lyte-yield>
    </template>

  </div>
</div>
</div>
</div>
</template>