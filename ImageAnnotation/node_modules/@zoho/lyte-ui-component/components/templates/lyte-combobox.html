<template tag-name="lyte-combobox">
  <lyte-dropdown class="{{ltPropDropdownClass}} {{if(ifEquals(ltPropType,'buttonSearch'),'lyteComboboxButtonSearch','lyteComboboxBoxSearch')}} {{if(isSearch,'lyteComboboxSearchPresent')}}"  lt-prop-selected = {{lbind(ltPropDropdownSelected)}} lt-prop-options={{ltPropOptions}} lt-prop-aria-button="{{ltPropAriaDropButton}}" lt-prop-aria-box="{{ltPropAriaDropBox}}" lt-prop-aria-body="{{ltPropAriaDropBody}}" lt-prop-disabled-list={{ltPropDisabledList}} on-option-selected="{{method('optionSelect')}}" on-show="{{method('dropBoxOpen')}}"  on-animation-end="{{method('onAnimateEnd')}}" on-key-navigation="{{method('keyNavigation')}}" on-before-show="{{method('beforeDropboxShow')}}" before-select="{{method('beforeSelect')}}" on-hide="{{method('hideDropbox')}}" on-before-hide="{{method('beforeHideDropbox')}}" on-scroll="{{method('scrollDropBox')}}" lt-prop-active-element = '.lyteCombobboxInput'
	lt-prop-yield = true lt-prop = {{stringify(ltPropDropdown)}} lt-prop-set-aria-on-active-element="{{setAriaOnActiveElem}}">
    <template is="registerYield" yield-name="yield">
      <template lyte-if="{{! ltPropYield}}">
        <lyte-drop-button>
          <template lyte-if="{{!selectValue}}">
            <template lyte-if="{{ltPropDropdown.displayValue}}">
              <span class="lyteMarginRight lyteDropdownLabel" onmouseenter={{action('toolTipConfig',this)}} lt-prop-title={{if(showToolTip,ltPropDropdown.displayValue,'')}} lt-prop-tooltip-config={{ltPropTooltip}}>{{ltPropDropdown.displayValue}}</span>
            </template>
            <template lyte-else-if="{{ltPropDropdown.placeholder}}">
              <span class="lyteDropPlaceholderNormal">{{ltPropDropdown.placeholder}}</span>
            </template>
            <template lyte-else>
              <span class="lyteMarginRight lyteDropdownLabel" onmouseenter={{action('toolTipConfig',this)}} lt-prop-title={{if(showToolTip,initialValue,'')}} lt-prop-tooltip-config={{ltPropTooltip}}>{{initialValue}}</span>
            </template>

          </template>
          <template lyte-else>
            <span class="lyteMarginRight lyteDropdownLabel" onmouseenter={{action('toolTipConfig',this)}} lt-prop-title={{if(showToolTip,selectValue,'')}} lt-prop-tooltip-config={{ltPropTooltip}}>{{selectValue}}</span>
            <template lyte-if="{{selectValue && ltPropShowRemoveIcon}}">
              <lyte-drop-remove class="lyteDropdownDeselectIcon"></lyte-drop-remove>
            </template>

          </template>

          <template lyte-if="{{isSearch && ltPropType == 'buttonSearch'}}">
            <lyte-input class="lyteComboboxBtnSearchInput" lt-prop-type="search" lt-prop-aria={{ltPropAria}} lt-prop-close-icon=true lt-prop-appearance ={{ltPropDropboxSearchAppearance}} lt-prop-class = "lyteComboboxBtnSearchOrigIpt lyteCombobboxInput" lt-prop-placeholder = {{ltPropSearchplaceholder}}  on-value-change="{{method('searchList')}}" on-clear="{{method('onSearchClear')}}" 
            oninput="{{action('oninput',this )}}" lt-prop-aria-attributes="{{ltPropAriaInput}}"></lyte-input>


          </template>

          <lyte-icon class="dropdown"></lyte-icon>
        </lyte-drop-button>
        <lyte-drop-box class="{{ltPropBoxClass}}">

          <template lyte-if="{{isSearch && ltPropType == 'boxSearch'}}">
            <lyte-drop-header>

              <lyte-input lt-prop-close-icon="true" lt-prop-type="search" lt-prop-aria={{ltPropAria}} class="lyteComboboxDropboxSearch" lt-prop-class="lyteComboboxDropboxSearchOrigIpt" lt-prop-appearance={{ltPropDropboxSearchAppearance}} lt-prop-placeholder={{ltPropSearchplaceholder}} on-value-change="{{method('searchList')}}" on-clear="{{method('onSearchClear')}}" lt-prop-aria-attributes="{{ltPropAriaInput}}"></lyte-input>

            </lyte-drop-header>
          </template>

          <lyte-drop-body>
            <template lyte-for="{{ltPropOptions}} as item indexVal "><template lyte-if="{{lyteUiOptGroupCheck(item)}}">
                <lyte-drop-group>
                  <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label>
                  <template lyte-for="{{lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item))}} as subitem indexval ">
                    <template lyte-if="{{lyteUiIsObject(subitem)}}">
                      <lyte-drop-item data-value={{subitem[ltPropDropdown.systemValue]}} disabled={{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropDropdown.systemValue])}}>{{subitem[ltPropDropdown.userValue]}}</lyte-drop-item>
                    </template>
                    <template lyte-else>
                      <lyte-drop-item data-value={{subitem}} disabled={{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}>{{subitem}}</lyte-drop-item>
                    </template>

                  </template>

                </lyte-drop-group>
              </template>
              <template lyte-else>
                <template lyte-if="{{lyteUiIsObject(item)}}">
                  <lyte-drop-item data-value={{item[ltPropDropdown.systemValue]}} disabled={{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropDropdown.systemValue])}}>{{item[ltPropDropdown.userValue]}}</lyte-drop-item>
                </template>
                <template lyte-else>
                  <lyte-drop-item data-value={{item}} disabled={{lyteUiCheckDisabled(ltPropDisabledList,item)}}>{{item}}</lyte-drop-item>
                </template>

              </template>

            </template>


            <template lyte-if="{{showNoResult}}">
              <div class="lyteDropdownNoResult lyteComboboxNoResult"> {{ltPropNoResultMessage}} </div>
            </template>


          </lyte-drop-body>
        </lyte-drop-box>
      </template>
      <template lyte-else>
        <lyte-drop-button>
          <lyte-yield is="registerYield" yield-name="headerYield">
          </lyte-yield>
          <template lyte-if="{{isSearch && ltPropType == 'buttonSearch'}}">
            <lyte-input class="lyteComboboxBtnSearchInput" lt-prop-close-icon=true lt-prop-aria={{ltPropAria}} lt-prop-appearance ={{ltPropDropboxSearchAppearance}} lt-prop-type="search" lt-prop-class = "lyteComboboxBtnSearchOrigIpt lyteCombobboxInput" lt-prop-placeholder = {{ltPropSearchplaceholder}}  on-value-change="{{method('searchList')}}" on-clear="{{method('onSearchClear')}}" lt-prop-aria-attributes="{{ltPropAriaInput}}" oninput="{{action('oninput',this )}}" ></lyte-input>
          </template>

        </lyte-drop-button>
        <lyte-drop-box class="{{ltPropBoxClass}}">
          <template lyte-if="{{isSearch && ltPropType == 'boxSearch'}}">
            <lyte-drop-header>

              <lyte-input class="lyteComboboxDropboxSearch" lt-prop-close-icon=true lt-prop-aria={{ltPropAria}} lt-prop-appearance={{ltPropDropboxSearchAppearance}} lt-prop-class="lyteComboboxDropboxSearchOrigIpt" lt-prop-placeholder={{ltPropSearchplaceholder}} on-value-change="{{method('searchList')}}" lt-prop-type="search" on-clear="{{method('onSearchClear')}}"  
              lt-prop-aria-attributes="{{ltPropAriaInput}}"></lyte-input>
            </lyte-drop-header>
          </template>

          <lyte-drop-body>

            <lyte-yield is="registerYield" yield-name="bodyYield">
            </lyte-yield>
            <template lyte-if="{{showNoResult}}">
              <div class="lyteDropdownNoResult lyteComboboxNoResult"> {{ltPropNoResultMessage}} </div>
            </template>

          </lyte-drop-body>

          <lyte-yield is="registerYield" yield-name="footerYield">
          </lyte-yield>
        </lyte-drop-box>
      </template>

    </template>
  </lyte-dropdown>
</template>