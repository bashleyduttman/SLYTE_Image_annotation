<template tag-name="lyte-timeline-view">
  <div class="timelineViewTable">
    <template lyte-if="{{!ltPropGroup}}">
      <div class="timelineViewContentElem lyteSchedulerTimeLineWrapper {{ltPropView}}Timeline" style="--timeline-total-rows: {{ltPropManipulatedEvent.length+3}}; --timeline-column-size: {{ltPropDateWidth[ltPropView]+'px'}}; --timeline-column-gridline-temp: {{(ltPropDateWidth[ltPropView]+1) + 'px'}} ;">
        <div class="timelineViewHeaderRowWrap">
          <template lyte-if="{{ltPropView == 'quarter'}}">
            <div class="timelineViewHeaderRow ">
              <div lyte-for="{{subheader}} as item index" class="timelineHeaderElem quarterHeader" style="--timeline-col-number: {{item.startColumn}}; grid-column-end: span {{item.endColumn}};">
                {{item.year}}
              </div>
            </div>
          </template>

          <div class="timelineViewHeaderRow">
            <div lyte-for="{{headerArray}} as item index" class="timelineHeaderMonthElem" style='--timeline-col-number: {{item.startColumn}}; grid-column-end: span {{item.endColumn}};'>
              <template lyte-if="{{ltPropView == 'week'}}">
                {{item.week}}
              </template>
              <template lyte-else-if="{{ltPropView == 'quarter'}}">
                {{item.quarter}}
              </template>
              <template lyte-else>
                {{months[item.month]}}{{item.year}}
              </template>

            </div>
          </div>
          <div class="timelineViewHeaderRow">
            <div lyte-for="{{timeline}} as item index" class="timelineHeaderElem lyteSchedulerDate " style="--timeline-col-number: {{indexIncrement(index)}}" data-date="{{lyteUiSchedulerGetDate(item)}}" id="{{lyteUiSchedulerGetDate(item)}}">
              <template lyte-if="{{ltPropView == 'quarter'}}">
                {{lytegetMonth(item,months)}}
              </template>
              <template lyte-else>
                {{lyteUiSchedulerGetDay(item)}}
              </template>

            </div>
          </div>
        </div>

        <div class="timeLineEventsContainer">
          <div lyte-for-in="{{populateObject}} as item index" class="timelineEvent {{lyteUiTimelineCss(item,this,timeline,ltPropView)}}" id="{{item.id}}" onmouseenter="{{action('onhoverEvent',event,this)}}" onmouseleave="{{action('onhoverEvent',event,this)}}">
            <div class="event {{item.class}}">
              <div class="lyteTimelineLeft" onmousedown="{{action('onmousedownEvent',event,'left',this,item)}}" lyte-if={{ltPropResizeEvent}}></div>
              <div class="hoverarrow hideArrow leftArrow eventArrow" onclick="{{action('onarrowclick',event,item.id)}}"></div>
              <lyte-yield yield-name="timeline-event" timeline-event="{{item}}">
              </lyte-yield>
              <div class="due" lyte-if="{{item.dueDate}}">
              </div>
              <div class="lyteTimelineRight" onmousedown="{{action('onmousedownEvent',event,'right',this,item)}}" lyte-if={{ltPropResizeEvent}}></div>
            </div>
          </div>
        </div>
        <div class="timelineLinesBg" style="--timeline-row-end: {{ltPropManipulatedEvent.length}}; --timeline-col-number: {{timeline.length}}"></div>
        <div class="timeLineArrowContainer">
          <div lyte-for-in="{{populateObject}} as item index" class="timelineArrow eventArrow hideArrow" style="grid-row: {{item.index}};" data-id="{{item.id}}" onclick="{{action('onarrowclick',event,item.id)}}">
            <div class="arrowbox"></div>
            <div>{{item[ltPropArrowKey]}}</div>
          </div>
        </div>
      </div>
    </template>
    <template lyte-else>
      <div class="timelineViewTable timelineViewWithGrouping ">
        <div class="timelineViewContentElem timelineWeekView lyteSchedulerTimeLineWrapper {{ltPropView}}Timeline" style="--timeline-total-rows: {{ltPropManipulatedEvent.length}}; --timeline-groupby-column-end: 2; --timeline-column-size: {{ltPropDateWidth[ltPropView]+'px'}}; --timeline-column-gridline-temp: {{(ltPropDateWidth[ltPropView]+1) + 'px'}} ;">
          <div class="timelineViewHeaderRowWrap">
            <div class="timelineViewGroupbyElementHeader" style="--timeline-groupby-grid-row-start: 1; --timeline-groupby-grid-row-end: 2;">
              <div>
                <div>Group by</div>

              </div>
            </div>
            <div class="timelineViewHeaderRow">
              <div lyte-for="{{headerArray}} as item index" class="timelineHeaderMonthElem" style='--timeline-col-number: {{item.startColumn}}; grid-column-end: span {{item.endColumn}};'>
                <template lyte-if="{{ltPropView == 'week'}}">
                  {{item.week}}
                </template>
                <template lyte-else-if="{{ltPropView == 'quarter'}}">
                  {{item.quarter}}
                </template>
                <template lyte-else>
                  {{months[item.month]}}{{item.year}}
                </template>

              </div>
            </div>
            <div class="timelineViewHeaderRow">
              <div lyte-for="{{timeline}} as item index" class="timelineHeaderElem lyteSchedulerDate " style="--timeline-col-number: {{indexIncrement(index)}}" data-date="{{lyteUiSchedulerGetDate(item)}}" id="{{lyteUiSchedulerGetDate(item)}}">
                <template lyte-if="{{ltPropView == 'quarter'}}">
                  {{lytegetMonth(item,months)}}
                </template>
                <template lyte-else>
                  {{lyteUiSchedulerGetDay(item)}}
                </template>

              </div>
            </div>
          </div>
          <div class="timelineViewGroupbyContainer" style="--timeline-col-number: {{timeline.length}}">
            <lyte-timeline-view-accordion lyte-for="{{ltPropGroupby}} as groupByDataArray index" class="timelineViewGroupbyAccordion {{lyteUiTimelineViewAccordionClosed(groupByDataArray,this)}}" style="--timeline-row-end: {{groupByDataArray.rowCount}}" group="{{groupByDataArray.systemValue}}">
              <div class=" timelineViewGroupbyElement" onclick="{{action('toggleAccordion',event,this,groupByDataArray)}}">
                <span class="timelineViewGroupbyElementLabel">{{groupByDataArray.userValue}}</span>
              </div>
              <div class="timelineViewGroupbyAccordionBody">
                <div class="timelineViewGroupbySubgroup">
                </div>
                <div class="timelineLinesBg" style=" --timeline-col-number: {{timeline.length}}"></div>
                <div class="timeLineEventsContainer">
                  <div lyte-for="{{groupByDataArray.chlidren}} as item index" class="timelineEvent" id="{{item.id}}" onmouseenter="{{action('onhoverEvent',event,this)}}" onmouseleave="{{action('onhoverEvent',event,this)}}" style="--timeline-row-number: {{index+1}};">
                    <div class="event timelineGroupBy {{item.class}}">
                      <div class="lyteTimelineLeft" onmousedown="{{action('onmousedownEvent',event,'left',this,item)}}" lyte-if={{ltPropResizeEvent}}></div>
                      <div class="hoverarrow hideArrow leftArrow eventArrow" onclick="{{action('onarrowclick',event,item.id,groupByDataArray.systemValue)}}"></div>
                      <lyte-yield yield-name="timeline-event" timeline-event="{{item}}">
                      </lyte-yield>
                      <div class="due" lyte-if="{{item.dueDate}}">
                      </div>
                      <div class="lyteTimelineRight" onmousedown="{{action('onmousedownEvent',event,'right',this,item)}}" lyte-if={{ltPropResizeEvent}}></div>
                    </div>
                  </div>
                  <div class="ltPropTimelineLoadMore" style="grid-column-start: 1; grid-column-end:{{timeline.length}}" lyte-if="{{groupByDataArray.loadmore}}">
                    <div onclick="{{action('loadmore',event,groupByDataArray,this)}}"> load More</div>
                  </div>
                  <div class="hideLoadmore loading" style="grid-column-start: 1; grid-column-end:{{timeline.length}}">
                    <div>loading</div>
                  </div>
                  <div class="timeLineArrowContainer">
                    <div lyte-for="{{groupByDataArray.chlidren}} as item index" class="timelineArrow eventArrow hideArrow" style="grid-row: {{index+1}};" data-id="{{item.id}}" onclick="{{action('onarrowclick',event,item.id,groupByDataArray.systemValue)}}">
                      <div class="arrowbox"></div>
                      <div>{{item[ltPropArrowKey]}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </lyte-timeline-view-accordion>
          </div>
        </div>
      </div>
    </template>

  </div>
</template>