<template tag-name="lyte-connect" onmousedown="{{action('mousedown',event)}}" ontouchstart="{{action('mousedown',event)}}" onscroll="{{action('scroll',event)}}" onkeydown="{{action('keydown',event)}}" tabindex="0">
  <div class="lyteConnectWrapper">
    <template lyte-for="{{ltPropData}} as item index "><template lyte-if="{{item.children}}">
        <lyte-connect-item lt-prop-selected={{item.selected}} lt-prop-suggested={{ltPropSuggested}} lt-prop-suggestion-data={{ltPropSuggestionData}} lt-prop-render-points={{ltPropRenderPoints}} lt-prop-ignore-corner-points={{ltPropIgnoreCornerPoints}} lt-prop-anywhere={{ltPropAnywhere}} lt-prop-default-anchors={{ltPropDefaultAnchors}} id="{{ltPropIdPrefix}}{{item.id}}" class="lyteConnectGroupShape {{item.class}}" data-index={{index}} lt-prop-item="{{details[item.id]}}" style="{{construct_style(item.position)}}" lt-prop-group-arrange={{ltPropGroupArrange}} onmouseenter="{{action('mouseenter',this,event)}}" onmouseleave="{{action('mouseleave',this,event)}}">
          <template lyte-for="{{item.children}} as _item _index ">
            <lyte-connect-item lt-prop-anywhere={{ltPropAnywhere}} lt-prop-default-anchors={{ltPropDefaultAnchors}} id="{{ltPropIdPrefix}}{{_item.id}}" class="lyteConnectInnerItem {{_item.class}}" data-index={{_index}} onmouseenter="{{action('mouseenter',this,event)}}" onmouseleave="{{action('mouseleave',this,event)}}" lt-prop-data={{_item}} is-child=true>
              <lyte-yield yield-name="connection" connection={{_item}}></lyte-yield>
            </lyte-connect-item>
          </template>

        </lyte-connect-item>
      </template>
      <template lyte-else>
        <lyte-connect-item lt-prop-selected={{item.selected}} lt-prop-suggested={{ltPropSuggested}} lt-prop-suggestion-data={{ltPropSuggestionData}} lt-prop-render-points={{ltPropRenderPoints}} lt-prop-ignore-corner-points={{ltPropIgnoreCornerPoints}} lt-prop-readonly={{ltPropReadonly}} lt-prop-anywhere={{ltPropAnywhere}} lt-prop-default-anchors={{ltPropDefaultAnchors}} id="{{ltPropIdPrefix}}{{item.id}}" class={{item.class}} data-index={{index}} style="{{construct_style(item.position)}}" onmouseenter="{{action('mouseenter',this,event)}}" onmouseleave="{{action('mouseleave',this,event)}}" lt-prop-item="{{details[item.id]}}">
          <lyte-yield yield-name="connection" connection={{item}}></lyte-yield>
          <template is="registerYield" yield-name="suggest_icon" from-parent></template>
        </lyte-connect-item>
      </template>
    </template>
    <template lyte-for="{{fakeData}} as item index ">
      <lyte-connect-item id="{{ltPropIdPrefix}}{{item.id}}" class={{item.class}} data-index={{index}} style="{{construct_style(item.position)}}" lt-prop-item="{{details[item.id]}}">
        <lyte-yield yield-name="fakeConnection" connection={{item}}></lyte-yield>
      </lyte-connect-item>
    </template>

    <template lyte-if="{{!ltPropSwimLanes}}">
      <svg xmlns="http://www.w3.org/2000/svg" class="lyteConnectionMarker" width={{ltPropWidth}} height={{ltPropHeight}} viewBox={{viewBox}} style="{{styleValue}}">
        <defs>

        </defs>
      </svg>
    </template>

    <template lyte-if="{{ltPropSmartGuide}}">
      <div class="lyteSmartGuides lyteSmartHorizontal lyteConnectHiddenElem"></div>
      <div class="lyteSmartGuides lyteSmartVertical lyteConnectHiddenElem"></div>
    </template>
    <template lyte-if="{{ltPropTextBox}}"><template lyte-for="{{textBoxArray}} as item index ">
        <lyte-textbox index={{index}} onclick="{{action('textclick',event,this,index)}}" id={{item.id}} class="{{lyteTextBox(item, item.class, item.hoverClass, item.text.length)}}" style={{item.style}}>
          <lyte-yield yield-name="textbox" lt-prop-item={{item}}></lyte-yield>
        </lyte-textbox>
      </template>
    </template>
    <template lyte-if="{{renderReconnect}}">
      <span class="lyteConnectReconnectElement lyteConnectStart" style="{{reconnectStart}}"></span>
      <span class="lyteConnectReconnectElement lyteConnectEnd" style="{{reconnectEnd}}"></span>
    </template>
    <template lyte-if="{{ltPropAdjustLines}}"><template lyte-for="{{adjustPositions}} as item index ">
        <span connector = {{item.connector}} onmouseenter="{{action('adjustEnter', event, this)}}" onmouseleave="{{action('adjustEnter', event, this)}}" class="lyteConnectLineAdjustElement {{item.class}}" data-index = {{index}} style="{{item.style}}"></span>
      </template>
    </template>

  </div>
  <template lyte-if="{{ltPropPreview}}">
    <lyte-wormhole class="lyteConnectWormhole" lt-prop-query={{ltPropQuery}} on-before-append="{{method('wormhole')}}">
      <template is="registerYield" yield-name="lyte-content">
        <div class="lyteConnectPreview" onmousedown="{{action('preview_down',event)}}" ontouchstart="{{action('preview_down',event)}}" onclick="{{action('preview_click',event)}}">
          <div class="lytePreviewSvg" style="width: 100%;height: 100%;">
            <div class="lytePreviewForeignObject" style="width: 100%;height: 100%;">
              <template lyte-for-in="{{details}} as value key ">
                <div id="preview_{{key}}" class="lytePreviewElement {{value.data.class}}" style="{{construct_style(value.position)}}">
                  <template lyte-if="{{value.data.type == &quot;groupshape&quot;}}"><template lyte-for-in="{{value.children}} as _value _key ">
                      <div id="preview_{{_key}}" class="lytePreviewElement lyteChildPreview" style="{{construct_style(_value.position)}}">
                        <lyte-yield yield-name="preview" data={{_value.data}} module_id={{_key}}></lyte-yield>
                      </div>
                    </template>
                  </template>
                  <template lyte-else>
                    <lyte-yield yield-name="preview" data={{value.data}} module_id={{key}}></lyte-yield>
                  </template>

                </div>
              </template>
              <template lyte-if="{{ltPropRenderConnectorsInPreview}}">
                <svg xmlns="http://www.w3.org/2000/svg" class="lyteConnectionPreviewMarker" width={{ltPropWidth}} height={{ltPropHeight}} viewBox={{viewBox}} style="{{styleValue}}">
                </svg>
                <template lyte-if="{{ltPropTextBox}}"><template lyte-for="{{textBoxArray}} as item index ">
                    <lyte-textbox index={{index}} id="preview_{{item.id}}" class="{{lyteTextBox(item, item.class, item.hoverClass, item.text.length,true)}}" style={{item.style}}>
                      <lyte-yield yield-name="textbox" lt-prop-item={{item}}></lyte-yield>
                    </lyte-textbox>
                  </template>
                </template>
              </template>

            </div>
          </div>
          <div class="lyteConnectOverlay"></div>
        </div>
      </template>
    </lyte-wormhole>
  </template>

</template>