<template tag-name="lyte-tag">
  <lyte-dropdown on-before-show={{method('preventOpen')}} on-before-add={{method('validate')}} on-add={{method('onItemSelected')}} on-remove={{method('onItemRemoved')}} on-before-remove={{method('storeRemovedItem')}} on-change="{{method('fireOnChange')}}" lt-prop-type="multisearch" lt-prop-no-result={{ltPropNoResult}} lt-prop-options={{standardizedOptions}} lt-prop-user-value={{ltPropUserValue}} lt-prop-system-value={{ltPropSystemValue}} lt-prop-selected-list={{standardizedList}} lt-prop-disabled={{ltPropDisabled}} lt-prop={{stringify(ltPropDropdown)}}>
    <template is="registerYield" yield-name="yield">
      <lyte-drop-button>
        <div class="lyteMultiSelect">
          <ul class="lyteMultipleSelect">
            <template lyte-if="{{ltPropButtonYield}}">
              <lyte-yield yield-name="button" lyte-options-selected={{standardizedList}}></lyte-yield>
            </template>
            <template lyte-else>
              <template lyte-for="{{standardizedList}} as item index ">
                <li data-value={{item[ltPropSystemValue]}}>
                  <span class="lyteTagItem">{{item[ltPropUserValue]}}</span>
                  <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove>
                </li>
              </template>

            </template>

            <li class="lyteTagInputLi">
              <input onclick="{{action('fireOnClick',event)}}" placeholder={{ltPropPlaceholder}} class="lyteDropdownTextField" type="text" oninput={{action('searchItemsOnInput',event)}} onblur={{action('searchItemsOnBlur',event)}} onkeydown={{action('handleOtherKeys',event)}} disabled={{ltPropDisabled}} />
            </li>
          </ul>
        </div>
      </lyte-drop-button>
      <template lyte-if="{{ltPropBoxYield}}">
        <lyte-yield yield-name="box" lyte-options={{lyteOptions}}></lyte-yield>
      </template>
      <template lyte-else>
        <lyte-drop-box>
          <lyte-drop-body>
            <template lyte-for="{{lyteOptions}} as item index ">
              <template lyte-if="{{lyteUiOptGroupCheck( item )}}">
                <lyte-drop-group>
                  <lyte-drop-label>{{ lyteUiReturnOnlyKey( item ) }}</lyte-drop-label>
                  <template lyte-for="{{lyteUiReturnValueBy( item, lyteUiReturnOnlyKey( item ) )}} as subitem indexval ">
                    <lyte-drop-item data-value={{subitem[ltPropSystemValue]}}>
                      <lyte-tag-label>
                        {{ subitem[ ltPropUserValue ] }}
                      </lyte-tag-label>
                      <template lyte-if="{{subitem[ ltPropDescriptionValue ]}}">
                        <lyte-tag-description>
                          {{ subitem[ ltPropDescriptionValue ] }}
                        </lyte-tag-description>
                      </template>

                    </lyte-drop-item>
                  </template>

                </lyte-drop-group>
              </template>
              <template lyte-else>
                <lyte-drop-item data-value={{item[ltPropSystemValue]}}>
                  <lyte-tag-label>
                    {{ item[ ltPropUserValue ] }}
                  </lyte-tag-label>
                  <template lyte-if="{{item[ ltPropDescriptionValue ]}}">
                    <lyte-tag-description>
                      {{ item[ ltPropDescriptionValue ] }}
                    </lyte-tag-description>
                  </template>

                </lyte-drop-item>
              </template>


            </template>

          </lyte-drop-body>
        </lyte-drop-box>
      </template>

    </template>
  </lyte-dropdown>
</template>