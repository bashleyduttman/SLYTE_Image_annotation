<template tag-name="lyte-scheduler-week">
  <template lyte-if="{{ltPropMultiUserView}}">
    <template lyte-if="{{selectedUserArr.length >  0}}">
      <div>
        <div>
          <template lyte-for="{{selectedUserArr}} as item index ">
            <div>
              <lyte-yield yield-name='lyteSchedulerUserIconYield' scheduler-user="{{ltPropSchedulerUser[item]}}">
              </lyte-yield>
            </div>
          </template>

        </div>
        <div onclick="{{action('clearSelection')}}">
          clear
        </div>
      </div>
    </template>

    <div class="lyteSchedulerMultiUserView lyteSchedulerWeekViewWrapper lyteSchedulerViewWrapper">
      <table class='lyteSchedulerViewMainTable lyteSchedulerWeekView'>
        <thead>
          <tr class='lyteSchedulerWeekViewHeader'>
            <th class='lyteSchedulerFirstColHeader'>
              <template lyte-if="{{ltPropSchedulerSearch}}">
                <lyte-search lt-prop-query-selector='{"scope" : "lyte-popover-content", "search" : ".lyteSchedulerUserSearch"}' on-focus="{{method('openUserSearch')}}"></lyte-search>
              </template>

            </th>
            <template lyte-for="{{ltPropDateArray}} as item index ">
              <th class='lyteSchedulerWeekTh {{item.buisness}} {{if(ifEquals(item.currentDate,true),"lyteSchedulerCurrDate","")}}'>
                <template lyte-if="{{ltPropSchedulerLabelFormat}}">
                  <div>{{lyteUiSchedulerLabelFormat(ltPropSchedulerLabelFormat,item.month,item.date,ltPropDisplayYear)}}</div>
                </template>
                <template lyte-else>
                  <div class="lyteSchedulerMonthLabel">{{month[item.month]}}</div>
                  <div>
                    <span class="lyteSchedulerDateLabel">{{item.date}}</span>
                    <span class="lyteSchedulerDayLabel">{{label[index]}}</span>
                  </div>
                </template>

              </th>
            </template>

          </tr>
        </thead>
        <tbody>
          <template lyte-for="{{ltPropSchedulerUser}} as user index ">
            <tr data-userid={{user.id}} class='lyteSchedulerMultiUserRow'>
              <td class="lyteSchedulerUserCol">
                <lyte-scheduler-user lt-prop-userid={{user.id}}>
                  <lyte-yield yield-name='lyteSchedulerUserYield' scheduler-user={{user}}>
                  </lyte-yield>
                </lyte-scheduler-user>
              </td>
              <template lyte-for="{{ltPropDateArray}} as item index ">
                <td class='{{item.buisness}} {{if(ifEquals(item.currentDate,true),"lyteSchedulerCurrDate","")}} lyteSchedulerDate lyteSchedulerAllDayEvent'>
                  <div class="lyteSchedulerMultiUserViewEventElem scheduler-event-div" data-date={{lyteUiSchedulerGetDate(item.val)}}>
                    <template lyte-if="{{item.events}}">
                      <template lyte-for="{{item.events[user.id]}} as event index ">
                        <lyte-yield yield-name="lyteSchedulerEventYield" scheduler-event={{event}} lyte-if="{{lyteUiSchedulerEvent(event)}}">
                        </lyte-yield>
                      </template>

                      <div class='lyteSchedulerEventMoreBtn lyteSchedulerEventMoreBtnHide' onclick='{{action("hiddenEvent",event,item.val)}}'>{{lyteUiSchedulerhiddenEvent(hiddenObj,lyteUiSchedulerGetDate(item.val),this,user.id)}}</div>
                    </template>

                  </div>
                </td>
              </template>

            </tr>
          </template>

        </tbody>
      </table>
    </div>
  </template>
  <template lyte-else>
    <div class="lyteSchedulerWeekViewWrapper lyteSchedulerViewWrapper">
      <div class="lyteSchedularWeekViewInnerWrapper">
        <table class='lyteSchedulerViewMainTable lyteSchedulerWeekView'>
          <thead>
            <tr class='lyteSchedulerWeekViewHeader'>
              <th class='lyteSchedulerWeekTh'></th>

              <template lyte-for="{{ltPropDateArray}} as item index ">

                <th class='lyteSchedulerWeekTh {{if(ifEquals(item.currentDate,true),"lyteSchedulerCurrDate","")}} {{item.buisness}}'>
                  <template lyte-if="{{ltPropSchedulerLabelFormat}}">
                    <div>{{lyteUiSchedulerLabelFormat(ltPropSchedulerLabelFormat,item.month,item.date,ltPropDisplayYear,item)}}</div>
                  </template>
                  <template lyte-else>
                    <div class="lyteSchedulerMonthLabel">{{month[item.month]}}</div>
                    <div>
                      <span class="lyteSchedulerDateLabel">{{item.date}}</span>
                      <span class="lyteSchedulerDayLabel">{{label[index]}}</span>
                    </div>
                  </template>

                </th>

              </template>

            </tr>
            <tr class="lyteSchedulerWeekViewAllDayRow">
              <td>all-day</td>
              <template lyte-for="{{ltPropDateArray}} as item index ">
                <td class='lyteSchedulerDate lyteSchedulerAllDayEvent {{item.buisness}}'>
                  <div class='scheduler-event-div' data-date={{lyteUiSchedulerGetDate(item.val)}}>
                    <template lyte-if="{{item.events}}">
                      <template lyte-for="{{item.events}} as event index ">
                        <template lyte-if="{{event.allDayEvent}}">
                          <lyte-yield yield-name="lyteSchedulerEventYield" scheduler-event={{event}} lyte-if="{{lyteUiSchedulerEvent(event)}}">
                          </lyte-yield>
                        </template>

                      </template>

                      <div class='lyteSchedulerEventMoreBtn lyteSchedulerEventMoreBtnHide' onclick='{{action("hiddenEvent",event,item.val)}}'>{{lyteUiSchedulerhiddenEvent(hiddenObj,lyteUiSchedulerGetDate(item.val),this)}}</div>
                    </template>

                  </div>
                </td>
              </template>

            </tr>
          </thead>
          <tbody>
            <template lyte-for="{{timeLine}} as time index ">
              <template lyte-for="{{timelineArray}} as min index ">
                <tr data-time='{{lyteUiSchedulerTimeFormat(time,min)}}' class='lyteSchedulerDate lyteSchedulerTimeLineEvent {{lyteUiSchedulerBusinessHour(ltPropSchedulerBusinessHour,this)}}'>
                  <td style='width: 100px;'>
                    <div class="lyteSchedulerHourLabel">{{lyteUiSchedulerTimeFormat(time,min)}}</div>
                    <div class="lyteSchedulerHourQuarterLine"></div>
                    <div class="lyteSchedulerHourHalfLine"></div>
                    <div class="lyteSchedulerHourQuarterLine"></div>
                  </td>
                  <template lyte-for="{{ltPropDateArray}} as item index ">
                    <td></td>
                  </template>

                </tr>
              </template>

            </template>

          </tbody>
        </table>
        <div class="lyteSchedulerOverlay">
          <table class="lyteSchedulerWeekOverlayTable">
            <tbody>
              <tr>
                <td style="width:100px"></td>
                <template lyte-for="{{ltPropDateArray}} as item index ">
                  <td class='lyteSchedulerDate  {{if(ifEquals(item.currentDate,true),"lyteSchedulerCurrDate","")}} {{item.buisness}}'>
                    <div class='scheduler-event-div' data-date={{lyteUiSchedulerGetDate(item.val)}}>
                      <template lyte-if="{{item.events}}">
                        <template lyte-for="{{item.events}} as event index ">
                          <template lyte-if="{{!event.allDayEvent}}">
                            <lyte-yield yield-name="lyteSchedulerEventYield" scheduler-event={{event}} lyte-if="{{lyteUiSchedulerEvent(event)}}">
                            </lyte-yield>
                          </template>

                        </template>

                      </template>

                    </div>
                  </td>
                </template>

              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </template>

</template>